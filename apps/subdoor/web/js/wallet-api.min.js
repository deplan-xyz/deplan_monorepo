"use strict";(()=>{var Jf=Object.create;var ys=Object.defineProperty;var Xf=Object.getOwnPropertyDescriptor;var Qf=Object.getOwnPropertyNames;var tl=Object.getPrototypeOf,el=Object.prototype.hasOwnProperty;var Be=(r,t)=>()=>(r&&(t=r(r=0)),t);var pe=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),fc=(r,t)=>{for(var e in t)ys(r,e,{get:t[e],enumerable:!0})},lc=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Qf(t))!el.call(r,s)&&s!==e&&ys(r,s,{get:()=>t[s],enumerable:!(n=Xf(t,s))||n.enumerable});return r};var We=(r,t,e)=>(e=r!=null?Jf(tl(r)):{},lc(t||!r||!r.__esModule?ys(e,"default",{value:r,enumerable:!0}):e,r)),hc=r=>lc(ys({},"__esModule",{value:!0}),r);var wc=pe((pp,ho)=>{"use strict";var pl=Object.prototype.hasOwnProperty,Ee="~";function Tn(){}Object.create&&(Tn.prototype=Object.create(null),new Tn().__proto__||(Ee=!1));function yl(r,t,e){this.fn=r,this.context=t,this.once=e||!1}function mc(r,t,e,n,s){if(typeof e!="function")throw new TypeError("The listener must be a function");var i=new yl(e,n||r,s),o=Ee?Ee+t:t;return r._events[o]?r._events[o].fn?r._events[o]=[r._events[o],i]:r._events[o].push(i):(r._events[o]=i,r._eventsCount++),r}function xs(r,t){--r._eventsCount===0?r._events=new Tn:delete r._events[t]}function ye(){this._events=new Tn,this._eventsCount=0}ye.prototype.eventNames=function(){var t=[],e,n;if(this._eventsCount===0)return t;for(n in e=this._events)pl.call(e,n)&&t.push(Ee?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};ye.prototype.listeners=function(t){var e=Ee?Ee+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,i=n.length,o=new Array(i);s<i;s++)o[s]=n[s].fn;return o};ye.prototype.listenerCount=function(t){var e=Ee?Ee+t:t,n=this._events[e];return n?n.fn?1:n.length:0};ye.prototype.emit=function(t,e,n,s,i,o){var h=Ee?Ee+t:t;if(!this._events[h])return!1;var f=this._events[h],b=arguments.length,w,k;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),b){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,n),!0;case 4:return f.fn.call(f.context,e,n,s),!0;case 5:return f.fn.call(f.context,e,n,s,i),!0;case 6:return f.fn.call(f.context,e,n,s,i,o),!0}for(k=1,w=new Array(b-1);k<b;k++)w[k-1]=arguments[k];f.fn.apply(f.context,w)}else{var I=f.length,B;for(k=0;k<I;k++)switch(f[k].once&&this.removeListener(t,f[k].fn,void 0,!0),b){case 1:f[k].fn.call(f[k].context);break;case 2:f[k].fn.call(f[k].context,e);break;case 3:f[k].fn.call(f[k].context,e,n);break;case 4:f[k].fn.call(f[k].context,e,n,s);break;default:if(!w)for(B=1,w=new Array(b-1);B<b;B++)w[B-1]=arguments[B];f[k].fn.apply(f[k].context,w)}}return!0};ye.prototype.on=function(t,e,n){return mc(this,t,e,n,!1)};ye.prototype.once=function(t,e,n){return mc(this,t,e,n,!0)};ye.prototype.removeListener=function(t,e,n,s){var i=Ee?Ee+t:t;if(!this._events[i])return this;if(!e)return xs(this,i),this;var o=this._events[i];if(o.fn)o.fn===e&&(!s||o.once)&&(!n||o.context===n)&&xs(this,i);else{for(var h=0,f=[],b=o.length;h<b;h++)(o[h].fn!==e||s&&!o[h].once||n&&o[h].context!==n)&&f.push(o[h]);f.length?this._events[i]=f.length===1?f[0]:f:xs(this,i)}return this};ye.prototype.removeAllListeners=function(t){var e;return t?(e=Ee?Ee+t:t,this._events[e]&&xs(this,e)):(this._events=new Tn,this._eventsCount=0),this};ye.prototype.off=ye.prototype.removeListener;ye.prototype.addListener=ye.prototype.on;ye.prefixed=Ee;ye.EventEmitter=ye;typeof ho<"u"&&(ho.exports=ye)});var Gc=pe(Ds=>{"use strict";Ds.byteLength=wh;Ds.toByteArray=xh;Ds.fromByteArray=Sh;var Je=[],Fe=[],mh=typeof Uint8Array<"u"?Uint8Array:Array,Wo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Hr=0,$c=Wo.length;Hr<$c;++Hr)Je[Hr]=Wo[Hr],Fe[Wo.charCodeAt(Hr)]=Hr;var Hr,$c;Fe[45]=62;Fe[95]=63;function jc(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");e===-1&&(e=t);var n=e===t?0:4-e%4;return[e,n]}function wh(r){var t=jc(r),e=t[0],n=t[1];return(e+n)*3/4-n}function bh(r,t,e){return(t+e)*3/4-e}function xh(r){var t,e=jc(r),n=e[0],s=e[1],i=new mh(bh(r,n,s)),o=0,h=s>0?n-4:n,f;for(f=0;f<h;f+=4)t=Fe[r.charCodeAt(f)]<<18|Fe[r.charCodeAt(f+1)]<<12|Fe[r.charCodeAt(f+2)]<<6|Fe[r.charCodeAt(f+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=Fe[r.charCodeAt(f)]<<2|Fe[r.charCodeAt(f+1)]>>4,i[o++]=t&255),s===1&&(t=Fe[r.charCodeAt(f)]<<10|Fe[r.charCodeAt(f+1)]<<4|Fe[r.charCodeAt(f+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function vh(r){return Je[r>>18&63]+Je[r>>12&63]+Je[r>>6&63]+Je[r&63]}function kh(r,t,e){for(var n,s=[],i=t;i<e;i+=3)n=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),s.push(vh(n));return s.join("")}function Sh(r){for(var t,e=r.length,n=e%3,s=[],i=16383,o=0,h=e-n;o<h;o+=i)s.push(kh(r,o,o+i>h?h:o+i));return n===1?(t=r[e-1],s.push(Je[t>>2]+Je[t<<4&63]+"==")):n===2&&(t=(r[e-2]<<8)+r[e-1],s.push(Je[t>>10]+Je[t>>4&63]+Je[t<<2&63]+"=")),s.join("")}});var Zc=pe(Fo=>{Fo.read=function(r,t,e,n,s){var i,o,h=s*8-n-1,f=(1<<h)-1,b=f>>1,w=-7,k=e?s-1:0,I=e?-1:1,B=r[t+k];for(k+=I,i=B&(1<<-w)-1,B>>=-w,w+=h;w>0;i=i*256+r[t+k],k+=I,w-=8);for(o=i&(1<<-w)-1,i>>=-w,w+=n;w>0;o=o*256+r[t+k],k+=I,w-=8);if(i===0)i=1-b;else{if(i===f)return o?NaN:(B?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-b}return(B?-1:1)*o*Math.pow(2,i-n)};Fo.write=function(r,t,e,n,s,i){var o,h,f,b=i*8-s-1,w=(1<<b)-1,k=w>>1,I=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=n?0:i-1,O=n?1:-1,L=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(h=isNaN(t)?1:0,o=w):(o=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-o))<1&&(o--,f*=2),o+k>=1?t+=I/f:t+=I*Math.pow(2,1-k),t*f>=2&&(o++,f/=2),o+k>=w?(h=0,o=w):o+k>=1?(h=(t*f-1)*Math.pow(2,s),o=o+k):(h=t*Math.pow(2,k-1)*Math.pow(2,s),o=0));s>=8;r[e+B]=h&255,B+=O,h/=256,s-=8);for(o=o<<s|h,b+=s;b>0;r[e+B]=o&255,B+=O,o/=256,b-=8);r[e+B-O]|=L*128}});var Fn=pe(yn=>{"use strict";var qo=Gc(),dn=Zc(),Yc=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;yn.Buffer=R;yn.SlowBuffer=Lh;yn.INSPECT_MAX_BYTES=50;var Ks=2147483647;yn.kMaxLength=Ks;R.TYPED_ARRAY_SUPPORT=Bh();!R.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Bh(){try{let r=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(r,t),r.foo()===42}catch{return!1}}Object.defineProperty(R.prototype,"parent",{enumerable:!0,get:function(){if(R.isBuffer(this))return this.buffer}});Object.defineProperty(R.prototype,"offset",{enumerable:!0,get:function(){if(R.isBuffer(this))return this.byteOffset}});function ur(r){if(r>Ks)throw new RangeError('The value "'+r+'" is invalid for option "size"');let t=new Uint8Array(r);return Object.setPrototypeOf(t,R.prototype),t}function R(r,t,e){if(typeof r=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Vo(r)}return tu(r,t,e)}R.poolSize=8192;function tu(r,t,e){if(typeof r=="string")return Ih(r,t);if(ArrayBuffer.isView(r))return _h(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(Xe(r,ArrayBuffer)||r&&Xe(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Xe(r,SharedArrayBuffer)||r&&Xe(r.buffer,SharedArrayBuffer)))return Ko(r,t,e);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return R.from(n,t,e);let s=Ah(r);if(s)return s;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return R.from(r[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}R.from=function(r,t,e){return tu(r,t,e)};Object.setPrototypeOf(R.prototype,Uint8Array.prototype);Object.setPrototypeOf(R,Uint8Array);function eu(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Eh(r,t,e){return eu(r),r<=0?ur(r):t!==void 0?typeof e=="string"?ur(r).fill(t,e):ur(r).fill(t):ur(r)}R.alloc=function(r,t,e){return Eh(r,t,e)};function Vo(r){return eu(r),ur(r<0?0:$o(r)|0)}R.allocUnsafe=function(r){return Vo(r)};R.allocUnsafeSlow=function(r){return Vo(r)};function Ih(r,t){if((typeof t!="string"||t==="")&&(t="utf8"),!R.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let e=ru(r,t)|0,n=ur(e),s=n.write(r,t);return s!==e&&(n=n.slice(0,s)),n}function Do(r){let t=r.length<0?0:$o(r.length)|0,e=ur(t);for(let n=0;n<t;n+=1)e[n]=r[n]&255;return e}function _h(r){if(Xe(r,Uint8Array)){let t=new Uint8Array(r);return Ko(t.buffer,t.byteOffset,t.byteLength)}return Do(r)}function Ko(r,t,e){if(t<0||r.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');let n;return t===void 0&&e===void 0?n=new Uint8Array(r):e===void 0?n=new Uint8Array(r,t):n=new Uint8Array(r,t,e),Object.setPrototypeOf(n,R.prototype),n}function Ah(r){if(R.isBuffer(r)){let t=$o(r.length)|0,e=ur(t);return e.length===0||r.copy(e,0,0,t),e}if(r.length!==void 0)return typeof r.length!="number"||Go(r.length)?ur(0):Do(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Do(r.data)}function $o(r){if(r>=Ks)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Ks.toString(16)+" bytes");return r|0}function Lh(r){return+r!=r&&(r=0),R.alloc(+r)}R.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==R.prototype};R.compare=function(t,e){if(Xe(t,Uint8Array)&&(t=R.from(t,t.offset,t.byteLength)),Xe(e,Uint8Array)&&(e=R.from(e,e.offset,e.byteLength)),!R.isBuffer(t)||!R.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,s=e.length;for(let i=0,o=Math.min(n,s);i<o;++i)if(t[i]!==e[i]){n=t[i],s=e[i];break}return n<s?-1:s<n?1:0};R.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};R.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return R.alloc(0);let n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;let s=R.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){let o=t[n];if(Xe(o,Uint8Array))i+o.length>s.length?(R.isBuffer(o)||(o=R.from(o)),o.copy(s,i)):Uint8Array.prototype.set.call(s,o,i);else if(R.isBuffer(o))o.copy(s,i);else throw new TypeError('"list" argument must be an Array of Buffers');i+=o.length}return s};function ru(r,t){if(R.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||Xe(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let e=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&e===0)return 0;let s=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return Ho(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return lu(r).length;default:if(s)return n?-1:Ho(r).length;t=(""+t).toLowerCase(),s=!0}}R.byteLength=ru;function Rh(r,t,e){let n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(r||(r="utf8");;)switch(r){case"hex":return Fh(this,t,e);case"utf8":case"utf-8":return su(this,t,e);case"ascii":return zh(this,t,e);case"latin1":case"binary":return Wh(this,t,e);case"base64":return Nh(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qh(this,t,e);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}R.prototype._isBuffer=!0;function Vr(r,t,e){let n=r[t];r[t]=r[e],r[e]=n}R.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)Vr(this,e,e+1);return this};R.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)Vr(this,e,e+3),Vr(this,e+1,e+2);return this};R.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)Vr(this,e,e+7),Vr(this,e+1,e+6),Vr(this,e+2,e+5),Vr(this,e+3,e+4);return this};R.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?su(this,0,t):Rh.apply(this,arguments)};R.prototype.toLocaleString=R.prototype.toString;R.prototype.equals=function(t){if(!R.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:R.compare(this,t)===0};R.prototype.inspect=function(){let t="",e=yn.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"};Yc&&(R.prototype[Yc]=R.prototype.inspect);R.prototype.compare=function(t,e,n,s,i){if(Xe(t,Uint8Array)&&(t=R.from(t,t.offset,t.byteLength)),!R.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),s===void 0&&(s=0),i===void 0&&(i=this.length),e<0||n>t.length||s<0||i>this.length)throw new RangeError("out of range index");if(s>=i&&e>=n)return 0;if(s>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,s>>>=0,i>>>=0,this===t)return 0;let o=i-s,h=n-e,f=Math.min(o,h),b=this.slice(s,i),w=t.slice(e,n);for(let k=0;k<f;++k)if(b[k]!==w[k]){o=b[k],h=w[k];break}return o<h?-1:h<o?1:0};function nu(r,t,e,n,s){if(r.length===0)return-1;if(typeof e=="string"?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,Go(e)&&(e=s?0:r.length-1),e<0&&(e=r.length+e),e>=r.length){if(s)return-1;e=r.length-1}else if(e<0)if(s)e=0;else return-1;if(typeof t=="string"&&(t=R.from(t,n)),R.isBuffer(t))return t.length===0?-1:Jc(r,t,e,n,s);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(r,t,e):Uint8Array.prototype.lastIndexOf.call(r,t,e):Jc(r,[t],e,n,s);throw new TypeError("val must be string, number or Buffer")}function Jc(r,t,e,n,s){let i=1,o=r.length,h=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||t.length<2)return-1;i=2,o/=2,h/=2,e/=2}function f(w,k){return i===1?w[k]:w.readUInt16BE(k*i)}let b;if(s){let w=-1;for(b=e;b<o;b++)if(f(r,b)===f(t,w===-1?0:b-w)){if(w===-1&&(w=b),b-w+1===h)return w*i}else w!==-1&&(b-=b-w),w=-1}else for(e+h>o&&(e=o-h),b=e;b>=0;b--){let w=!0;for(let k=0;k<h;k++)if(f(r,b+k)!==f(t,k)){w=!1;break}if(w)return b}return-1}R.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1};R.prototype.indexOf=function(t,e,n){return nu(this,t,e,n,!0)};R.prototype.lastIndexOf=function(t,e,n){return nu(this,t,e,n,!1)};function Th(r,t,e,n){e=Number(e)||0;let s=r.length-e;n?(n=Number(n),n>s&&(n=s)):n=s;let i=t.length;n>i/2&&(n=i/2);let o;for(o=0;o<n;++o){let h=parseInt(t.substr(o*2,2),16);if(Go(h))return o;r[e+o]=h}return o}function Mh(r,t,e,n){return Hs(Ho(t,r.length-e),r,e,n)}function Ph(r,t,e,n){return Hs(Vh(t),r,e,n)}function Ch(r,t,e,n){return Hs(lu(t),r,e,n)}function Oh(r,t,e,n){return Hs($h(t,r.length-e),r,e,n)}R.prototype.write=function(t,e,n,s){if(e===void 0)s="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")s=e,n=this.length,e=0;else if(isFinite(e))e=e>>>0,isFinite(n)?(n=n>>>0,s===void 0&&(s="utf8")):(s=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let i=this.length-e;if((n===void 0||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let o=!1;for(;;)switch(s){case"hex":return Th(this,t,e,n);case"utf8":case"utf-8":return Mh(this,t,e,n);case"ascii":case"latin1":case"binary":return Ph(this,t,e,n);case"base64":return Ch(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Oh(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),o=!0}};R.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Nh(r,t,e){return t===0&&e===r.length?qo.fromByteArray(r):qo.fromByteArray(r.slice(t,e))}function su(r,t,e){e=Math.min(r.length,e);let n=[],s=t;for(;s<e;){let i=r[s],o=null,h=i>239?4:i>223?3:i>191?2:1;if(s+h<=e){let f,b,w,k;switch(h){case 1:i<128&&(o=i);break;case 2:f=r[s+1],(f&192)===128&&(k=(i&31)<<6|f&63,k>127&&(o=k));break;case 3:f=r[s+1],b=r[s+2],(f&192)===128&&(b&192)===128&&(k=(i&15)<<12|(f&63)<<6|b&63,k>2047&&(k<55296||k>57343)&&(o=k));break;case 4:f=r[s+1],b=r[s+2],w=r[s+3],(f&192)===128&&(b&192)===128&&(w&192)===128&&(k=(i&15)<<18|(f&63)<<12|(b&63)<<6|w&63,k>65535&&k<1114112&&(o=k))}}o===null?(o=65533,h=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),s+=h}return Uh(n)}var Xc=4096;function Uh(r){let t=r.length;if(t<=Xc)return String.fromCharCode.apply(String,r);let e="",n=0;for(;n<t;)e+=String.fromCharCode.apply(String,r.slice(n,n+=Xc));return e}function zh(r,t,e){let n="";e=Math.min(r.length,e);for(let s=t;s<e;++s)n+=String.fromCharCode(r[s]&127);return n}function Wh(r,t,e){let n="";e=Math.min(r.length,e);for(let s=t;s<e;++s)n+=String.fromCharCode(r[s]);return n}function Fh(r,t,e){let n=r.length;(!t||t<0)&&(t=0),(!e||e<0||e>n)&&(e=n);let s="";for(let i=t;i<e;++i)s+=jh[r[i]];return s}function qh(r,t,e){let n=r.slice(t,e),s="";for(let i=0;i<n.length-1;i+=2)s+=String.fromCharCode(n[i]+n[i+1]*256);return s}R.prototype.slice=function(t,e){let n=this.length;t=~~t,e=e===void 0?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);let s=this.subarray(t,e);return Object.setPrototypeOf(s,R.prototype),s};function ce(r,t,e){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+t>e)throw new RangeError("Trying to access beyond buffer length")}R.prototype.readUintLE=R.prototype.readUIntLE=function(t,e,n){t=t>>>0,e=e>>>0,n||ce(t,e,this.length);let s=this[t],i=1,o=0;for(;++o<e&&(i*=256);)s+=this[t+o]*i;return s};R.prototype.readUintBE=R.prototype.readUIntBE=function(t,e,n){t=t>>>0,e=e>>>0,n||ce(t,e,this.length);let s=this[t+--e],i=1;for(;e>0&&(i*=256);)s+=this[t+--e]*i;return s};R.prototype.readUint8=R.prototype.readUInt8=function(t,e){return t=t>>>0,e||ce(t,1,this.length),this[t]};R.prototype.readUint16LE=R.prototype.readUInt16LE=function(t,e){return t=t>>>0,e||ce(t,2,this.length),this[t]|this[t+1]<<8};R.prototype.readUint16BE=R.prototype.readUInt16BE=function(t,e){return t=t>>>0,e||ce(t,2,this.length),this[t]<<8|this[t+1]};R.prototype.readUint32LE=R.prototype.readUInt32LE=function(t,e){return t=t>>>0,e||ce(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};R.prototype.readUint32BE=R.prototype.readUInt32BE=function(t,e){return t=t>>>0,e||ce(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};R.prototype.readBigUInt64LE=Ir(function(t){t=t>>>0,pn(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&Wn(t,this.length-8);let s=e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,i=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(s)+(BigInt(i)<<BigInt(32))});R.prototype.readBigUInt64BE=Ir(function(t){t=t>>>0,pn(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&Wn(t,this.length-8);let s=e*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],i=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(s)<<BigInt(32))+BigInt(i)});R.prototype.readIntLE=function(t,e,n){t=t>>>0,e=e>>>0,n||ce(t,e,this.length);let s=this[t],i=1,o=0;for(;++o<e&&(i*=256);)s+=this[t+o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s};R.prototype.readIntBE=function(t,e,n){t=t>>>0,e=e>>>0,n||ce(t,e,this.length);let s=e,i=1,o=this[t+--s];for(;s>0&&(i*=256);)o+=this[t+--s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o};R.prototype.readInt8=function(t,e){return t=t>>>0,e||ce(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};R.prototype.readInt16LE=function(t,e){t=t>>>0,e||ce(t,2,this.length);let n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};R.prototype.readInt16BE=function(t,e){t=t>>>0,e||ce(t,2,this.length);let n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};R.prototype.readInt32LE=function(t,e){return t=t>>>0,e||ce(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};R.prototype.readInt32BE=function(t,e){return t=t>>>0,e||ce(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};R.prototype.readBigInt64LE=Ir(function(t){t=t>>>0,pn(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&Wn(t,this.length-8);let s=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(s)<<BigInt(32))+BigInt(e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});R.prototype.readBigInt64BE=Ir(function(t){t=t>>>0,pn(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&Wn(t,this.length-8);let s=(e<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(s)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)});R.prototype.readFloatLE=function(t,e){return t=t>>>0,e||ce(t,4,this.length),dn.read(this,t,!0,23,4)};R.prototype.readFloatBE=function(t,e){return t=t>>>0,e||ce(t,4,this.length),dn.read(this,t,!1,23,4)};R.prototype.readDoubleLE=function(t,e){return t=t>>>0,e||ce(t,8,this.length),dn.read(this,t,!0,52,8)};R.prototype.readDoubleBE=function(t,e){return t=t>>>0,e||ce(t,8,this.length),dn.read(this,t,!1,52,8)};function Te(r,t,e,n,s,i){if(!R.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<i)throw new RangeError('"value" argument is out of bounds');if(e+n>r.length)throw new RangeError("Index out of range")}R.prototype.writeUintLE=R.prototype.writeUIntLE=function(t,e,n,s){if(t=+t,e=e>>>0,n=n>>>0,!s){let h=Math.pow(2,8*n)-1;Te(this,t,e,n,h,0)}let i=1,o=0;for(this[e]=t&255;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n};R.prototype.writeUintBE=R.prototype.writeUIntBE=function(t,e,n,s){if(t=+t,e=e>>>0,n=n>>>0,!s){let h=Math.pow(2,8*n)-1;Te(this,t,e,n,h,0)}let i=n-1,o=1;for(this[e+i]=t&255;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n};R.prototype.writeUint8=R.prototype.writeUInt8=function(t,e,n){return t=+t,e=e>>>0,n||Te(this,t,e,1,255,0),this[e]=t&255,e+1};R.prototype.writeUint16LE=R.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=e>>>0,n||Te(this,t,e,2,65535,0),this[e]=t&255,this[e+1]=t>>>8,e+2};R.prototype.writeUint16BE=R.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=e>>>0,n||Te(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=t&255,e+2};R.prototype.writeUint32LE=R.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=e>>>0,n||Te(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255,e+4};R.prototype.writeUint32BE=R.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=e>>>0,n||Te(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};function iu(r,t,e,n,s){fu(t,n,s,r,e,7);let i=Number(t&BigInt(4294967295));r[e++]=i,i=i>>8,r[e++]=i,i=i>>8,r[e++]=i,i=i>>8,r[e++]=i;let o=Number(t>>BigInt(32)&BigInt(4294967295));return r[e++]=o,o=o>>8,r[e++]=o,o=o>>8,r[e++]=o,o=o>>8,r[e++]=o,e}function ou(r,t,e,n,s){fu(t,n,s,r,e,7);let i=Number(t&BigInt(4294967295));r[e+7]=i,i=i>>8,r[e+6]=i,i=i>>8,r[e+5]=i,i=i>>8,r[e+4]=i;let o=Number(t>>BigInt(32)&BigInt(4294967295));return r[e+3]=o,o=o>>8,r[e+2]=o,o=o>>8,r[e+1]=o,o=o>>8,r[e]=o,e+8}R.prototype.writeBigUInt64LE=Ir(function(t,e=0){return iu(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))});R.prototype.writeBigUInt64BE=Ir(function(t,e=0){return ou(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))});R.prototype.writeIntLE=function(t,e,n,s){if(t=+t,e=e>>>0,!s){let f=Math.pow(2,8*n-1);Te(this,t,e,n,f-1,-f)}let i=0,o=1,h=0;for(this[e]=t&255;++i<n&&(o*=256);)t<0&&h===0&&this[e+i-1]!==0&&(h=1),this[e+i]=(t/o>>0)-h&255;return e+n};R.prototype.writeIntBE=function(t,e,n,s){if(t=+t,e=e>>>0,!s){let f=Math.pow(2,8*n-1);Te(this,t,e,n,f-1,-f)}let i=n-1,o=1,h=0;for(this[e+i]=t&255;--i>=0&&(o*=256);)t<0&&h===0&&this[e+i+1]!==0&&(h=1),this[e+i]=(t/o>>0)-h&255;return e+n};R.prototype.writeInt8=function(t,e,n){return t=+t,e=e>>>0,n||Te(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=t&255,e+1};R.prototype.writeInt16LE=function(t,e,n){return t=+t,e=e>>>0,n||Te(this,t,e,2,32767,-32768),this[e]=t&255,this[e+1]=t>>>8,e+2};R.prototype.writeInt16BE=function(t,e,n){return t=+t,e=e>>>0,n||Te(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=t&255,e+2};R.prototype.writeInt32LE=function(t,e,n){return t=+t,e=e>>>0,n||Te(this,t,e,4,2147483647,-2147483648),this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4};R.prototype.writeInt32BE=function(t,e,n){return t=+t,e=e>>>0,n||Te(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};R.prototype.writeBigInt64LE=Ir(function(t,e=0){return iu(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});R.prototype.writeBigInt64BE=Ir(function(t,e=0){return ou(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function au(r,t,e,n,s,i){if(e+n>r.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function cu(r,t,e,n,s){return t=+t,e=e>>>0,s||au(r,t,e,4,34028234663852886e22,-34028234663852886e22),dn.write(r,t,e,n,23,4),e+4}R.prototype.writeFloatLE=function(t,e,n){return cu(this,t,e,!0,n)};R.prototype.writeFloatBE=function(t,e,n){return cu(this,t,e,!1,n)};function uu(r,t,e,n,s){return t=+t,e=e>>>0,s||au(r,t,e,8,17976931348623157e292,-17976931348623157e292),dn.write(r,t,e,n,52,8),e+8}R.prototype.writeDoubleLE=function(t,e,n){return uu(this,t,e,!0,n)};R.prototype.writeDoubleBE=function(t,e,n){return uu(this,t,e,!1,n)};R.prototype.copy=function(t,e,n,s){if(!R.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!s&&s!==0&&(s=this.length),e>=t.length&&(e=t.length),e||(e=0),s>0&&s<n&&(s=n),s===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-e<s-n&&(s=t.length-e+n);let i=s-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(e,n,s):Uint8Array.prototype.set.call(t,this.subarray(n,s),e),i};R.prototype.fill=function(t,e,n,s){if(typeof t=="string"){if(typeof e=="string"?(s=e,e=0,n=this.length):typeof n=="string"&&(s=n,n=this.length),s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!R.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(t.length===1){let o=t.charCodeAt(0);(s==="utf8"&&o<128||s==="latin1")&&(t=o)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e=e>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let i;if(typeof t=="number")for(i=e;i<n;++i)this[i]=t;else{let o=R.isBuffer(t)?t:R.from(t,s),h=o.length;if(h===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=o[i%h]}return this};var hn={};function jo(r,t,e){hn[r]=class extends e{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(s){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:s,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}jo("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);jo("ERR_INVALID_ARG_TYPE",function(r,t){return`The "${r}" argument must be of type number. Received type ${typeof t}`},TypeError);jo("ERR_OUT_OF_RANGE",function(r,t,e){let n=`The value of "${r}" is out of range.`,s=e;return Number.isInteger(e)&&Math.abs(e)>2**32?s=Qc(String(e)):typeof e=="bigint"&&(s=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(s=Qc(s)),s+="n"),n+=` It must be ${t}. Received ${s}`,n},RangeError);function Qc(r){let t="",e=r.length,n=r[0]==="-"?1:0;for(;e>=n+4;e-=3)t=`_${r.slice(e-3,e)}${t}`;return`${r.slice(0,e)}${t}`}function Dh(r,t,e){pn(t,"offset"),(r[t]===void 0||r[t+e]===void 0)&&Wn(t,r.length-(e+1))}function fu(r,t,e,n,s,i){if(r>e||r<t){let o=typeof t=="bigint"?"n":"",h;throw i>3?t===0||t===BigInt(0)?h=`>= 0${o} and < 2${o} ** ${(i+1)*8}${o}`:h=`>= -(2${o} ** ${(i+1)*8-1}${o}) and < 2 ** ${(i+1)*8-1}${o}`:h=`>= ${t}${o} and <= ${e}${o}`,new hn.ERR_OUT_OF_RANGE("value",h,r)}Dh(n,s,i)}function pn(r,t){if(typeof r!="number")throw new hn.ERR_INVALID_ARG_TYPE(t,"number",r)}function Wn(r,t,e){throw Math.floor(r)!==r?(pn(r,e),new hn.ERR_OUT_OF_RANGE(e||"offset","an integer",r)):t<0?new hn.ERR_BUFFER_OUT_OF_BOUNDS:new hn.ERR_OUT_OF_RANGE(e||"offset",`>= ${e?1:0} and <= ${t}`,r)}var Kh=/[^+/0-9A-Za-z-_]/g;function Hh(r){if(r=r.split("=")[0],r=r.trim().replace(Kh,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Ho(r,t){t=t||1/0;let e,n=r.length,s=null,i=[];for(let o=0;o<n;++o){if(e=r.charCodeAt(o),e>55295&&e<57344){if(!s){if(e>56319){(t-=3)>-1&&i.push(239,191,189);continue}else if(o+1===n){(t-=3)>-1&&i.push(239,191,189);continue}s=e;continue}if(e<56320){(t-=3)>-1&&i.push(239,191,189),s=e;continue}e=(s-55296<<10|e-56320)+65536}else s&&(t-=3)>-1&&i.push(239,191,189);if(s=null,e<128){if((t-=1)<0)break;i.push(e)}else if(e<2048){if((t-=2)<0)break;i.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;i.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;i.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return i}function Vh(r){let t=[];for(let e=0;e<r.length;++e)t.push(r.charCodeAt(e)&255);return t}function $h(r,t){let e,n,s,i=[];for(let o=0;o<r.length&&!((t-=2)<0);++o)e=r.charCodeAt(o),n=e>>8,s=e%256,i.push(s),i.push(n);return i}function lu(r){return qo.toByteArray(Hh(r))}function Hs(r,t,e,n){let s;for(s=0;s<n&&!(s+e>=t.length||s>=r.length);++s)t[s+e]=r[s];return s}function Xe(r,t){return r instanceof t||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===t.name}function Go(r){return r!==r}var jh=function(){let r="0123456789abcdef",t=new Array(256);for(let e=0;e<16;++e){let n=e*16;for(let s=0;s<16;++s)t[n+s]=r[e]+r[s]}return t}();function Ir(r){return typeof BigInt>"u"?Gh:r}function Gh(){throw new Error("BigInt not supported")}});var hu=pe(()=>{});var Yo=pe((du,Zo)=>{(function(r,t){"use strict";function e(x,a){if(!x)throw new Error(a||"Assertion failed")}function n(x,a){x.super_=a;var u=function(){};u.prototype=a.prototype,x.prototype=new u,x.prototype.constructor=x}function s(x,a,u){if(s.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((a==="le"||a==="be")&&(u=a,a=10),this._init(x||0,a||10,u||"be"))}typeof r=="object"?r.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var i;try{typeof window<"u"&&typeof window.Buffer<"u"?i=window.Buffer:i=hu().Buffer}catch{}s.isBN=function(a){return a instanceof s?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===s.wordSize&&Array.isArray(a.words)},s.max=function(a,u){return a.cmp(u)>0?a:u},s.min=function(a,u){return a.cmp(u)<0?a:u},s.prototype._init=function(a,u,l){if(typeof a=="number")return this._initNumber(a,u,l);if(typeof a=="object")return this._initArray(a,u,l);u==="hex"&&(u=16),e(u===(u|0)&&u>=2&&u<=36),a=a.toString().replace(/\s+/g,"");var d=0;a[0]==="-"&&(d++,this.negative=1),d<a.length&&(u===16?this._parseHex(a,d,l):(this._parseBase(a,u,d),l==="le"&&this._initArray(this.toArray(),u,l)))},s.prototype._initNumber=function(a,u,l){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(e(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),l==="le"&&this._initArray(this.toArray(),u,l)},s.prototype._initArray=function(a,u,l){if(e(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var p,m,S=0;if(l==="be")for(d=a.length-1,p=0;d>=0;d-=3)m=a[d]|a[d-1]<<8|a[d-2]<<16,this.words[p]|=m<<S&67108863,this.words[p+1]=m>>>26-S&67108863,S+=24,S>=26&&(S-=26,p++);else if(l==="le")for(d=0,p=0;d<a.length;d+=3)m=a[d]|a[d+1]<<8|a[d+2]<<16,this.words[p]|=m<<S&67108863,this.words[p+1]=m>>>26-S&67108863,S+=24,S>=26&&(S-=26,p++);return this._strip()};function o(x,a){var u=x.charCodeAt(a);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;e(!1,"Invalid character in "+x)}function h(x,a,u){var l=o(x,u);return u-1>=a&&(l|=o(x,u-1)<<4),l}s.prototype._parseHex=function(a,u,l){this.length=Math.ceil((a.length-u)/6),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var p=0,m=0,S;if(l==="be")for(d=a.length-1;d>=u;d-=2)S=h(a,u,d)<<p,this.words[m]|=S&67108863,p>=18?(p-=18,m+=1,this.words[m]|=S>>>26):p+=8;else{var y=a.length-u;for(d=y%2===0?u+1:u;d<a.length;d+=2)S=h(a,u,d)<<p,this.words[m]|=S&67108863,p>=18?(p-=18,m+=1,this.words[m]|=S>>>26):p+=8}this._strip()};function f(x,a,u,l){for(var d=0,p=0,m=Math.min(x.length,u),S=a;S<m;S++){var y=x.charCodeAt(S)-48;d*=l,y>=49?p=y-49+10:y>=17?p=y-17+10:p=y,e(y>=0&&p<l,"Invalid character"),d+=p}return d}s.prototype._parseBase=function(a,u,l){this.words=[0],this.length=1;for(var d=0,p=1;p<=67108863;p*=u)d++;d--,p=p/u|0;for(var m=a.length-l,S=m%d,y=Math.min(m,m-S)+l,c=0,g=l;g<y;g+=d)c=f(a,g,g+d,u),this.imuln(p),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(S!==0){var P=1;for(c=f(a,g,a.length,u),g=0;g<S;g++)P*=u;this.imuln(P),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},s.prototype.copy=function(a){a.words=new Array(this.length);for(var u=0;u<this.length;u++)a.words[u]=this.words[u];a.length=this.length,a.negative=this.negative,a.red=this.red};function b(x,a){x.words=a.words,x.length=a.length,x.negative=a.negative,x.red=a.red}if(s.prototype._move=function(a){b(a,this)},s.prototype.clone=function(){var a=new s(null);return this.copy(a),a},s.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=w}catch{s.prototype.inspect=w}else s.prototype.inspect=w;function w(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var k=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(a,u){a=a||10,u=u|0||1;var l;if(a===16||a==="hex"){l="";for(var d=0,p=0,m=0;m<this.length;m++){var S=this.words[m],y=((S<<d|p)&16777215).toString(16);p=S>>>24-d&16777215,d+=2,d>=26&&(d-=26,m--),p!==0||m!==this.length-1?l=k[6-y.length]+y+l:l=y+l}for(p!==0&&(l=p.toString(16)+l);l.length%u!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}if(a===(a|0)&&a>=2&&a<=36){var c=I[a],g=B[a];l="";var P=this.clone();for(P.negative=0;!P.isZero();){var N=P.modrn(g).toString(a);P=P.idivn(g),P.isZero()?l=N+l:l=k[c-N.length]+N+l}for(this.isZero()&&(l="0"+l);l.length%u!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}e(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&e(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},s.prototype.toJSON=function(){return this.toString(16,2)},i&&(s.prototype.toBuffer=function(a,u){return this.toArrayLike(i,a,u)}),s.prototype.toArray=function(a,u){return this.toArrayLike(Array,a,u)};var O=function(a,u){return a.allocUnsafe?a.allocUnsafe(u):new a(u)};s.prototype.toArrayLike=function(a,u,l){this._strip();var d=this.byteLength(),p=l||Math.max(1,d);e(d<=p,"byte array longer than desired length"),e(p>0,"Requested array length <= 0");var m=O(a,p),S=u==="le"?"LE":"BE";return this["_toArrayLike"+S](m,d),m},s.prototype._toArrayLikeLE=function(a,u){for(var l=0,d=0,p=0,m=0;p<this.length;p++){var S=this.words[p]<<m|d;a[l++]=S&255,l<a.length&&(a[l++]=S>>8&255),l<a.length&&(a[l++]=S>>16&255),m===6?(l<a.length&&(a[l++]=S>>24&255),d=0,m=0):(d=S>>>24,m+=2)}if(l<a.length)for(a[l++]=d;l<a.length;)a[l++]=0},s.prototype._toArrayLikeBE=function(a,u){for(var l=a.length-1,d=0,p=0,m=0;p<this.length;p++){var S=this.words[p]<<m|d;a[l--]=S&255,l>=0&&(a[l--]=S>>8&255),l>=0&&(a[l--]=S>>16&255),m===6?(l>=0&&(a[l--]=S>>24&255),d=0,m=0):(d=S>>>24,m+=2)}if(l>=0)for(a[l--]=d;l>=0;)a[l--]=0},Math.clz32?s.prototype._countBits=function(a){return 32-Math.clz32(a)}:s.prototype._countBits=function(a){var u=a,l=0;return u>=4096&&(l+=13,u>>>=13),u>=64&&(l+=7,u>>>=7),u>=8&&(l+=4,u>>>=4),u>=2&&(l+=2,u>>>=2),l+u},s.prototype._zeroBits=function(a){if(a===0)return 26;var u=a,l=0;return u&8191||(l+=13,u>>>=13),u&127||(l+=7,u>>>=7),u&15||(l+=4,u>>>=4),u&3||(l+=2,u>>>=2),u&1||l++,l},s.prototype.bitLength=function(){var a=this.words[this.length-1],u=this._countBits(a);return(this.length-1)*26+u};function L(x){for(var a=new Array(x.bitLength()),u=0;u<a.length;u++){var l=u/26|0,d=u%26;a[u]=x.words[l]>>>d&1}return a}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,u=0;u<this.length;u++){var l=this._zeroBits(this.words[u]);if(a+=l,l!==26)break}return a},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},s.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var u=0;u<a.length;u++)this.words[u]=this.words[u]|a.words[u];return this._strip()},s.prototype.ior=function(a){return e((this.negative|a.negative)===0),this.iuor(a)},s.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},s.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},s.prototype.iuand=function(a){var u;this.length>a.length?u=a:u=this;for(var l=0;l<u.length;l++)this.words[l]=this.words[l]&a.words[l];return this.length=u.length,this._strip()},s.prototype.iand=function(a){return e((this.negative|a.negative)===0),this.iuand(a)},s.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},s.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},s.prototype.iuxor=function(a){var u,l;this.length>a.length?(u=this,l=a):(u=a,l=this);for(var d=0;d<l.length;d++)this.words[d]=u.words[d]^l.words[d];if(this!==u)for(;d<u.length;d++)this.words[d]=u.words[d];return this.length=u.length,this._strip()},s.prototype.ixor=function(a){return e((this.negative|a.negative)===0),this.iuxor(a)},s.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},s.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},s.prototype.inotn=function(a){e(typeof a=="number"&&a>=0);var u=Math.ceil(a/26)|0,l=a%26;this._expand(u),l>0&&u--;for(var d=0;d<u;d++)this.words[d]=~this.words[d]&67108863;return l>0&&(this.words[d]=~this.words[d]&67108863>>26-l),this._strip()},s.prototype.notn=function(a){return this.clone().inotn(a)},s.prototype.setn=function(a,u){e(typeof a=="number"&&a>=0);var l=a/26|0,d=a%26;return this._expand(l+1),u?this.words[l]=this.words[l]|1<<d:this.words[l]=this.words[l]&~(1<<d),this._strip()},s.prototype.iadd=function(a){var u;if(this.negative!==0&&a.negative===0)return this.negative=0,u=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,u=this.isub(a),a.negative=1,u._normSign();var l,d;this.length>a.length?(l=this,d=a):(l=a,d=this);for(var p=0,m=0;m<d.length;m++)u=(l.words[m]|0)+(d.words[m]|0)+p,this.words[m]=u&67108863,p=u>>>26;for(;p!==0&&m<l.length;m++)u=(l.words[m]|0)+p,this.words[m]=u&67108863,p=u>>>26;if(this.length=l.length,p!==0)this.words[this.length]=p,this.length++;else if(l!==this)for(;m<l.length;m++)this.words[m]=l.words[m];return this},s.prototype.add=function(a){var u;return a.negative!==0&&this.negative===0?(a.negative=0,u=this.sub(a),a.negative^=1,u):a.negative===0&&this.negative!==0?(this.negative=0,u=a.sub(this),this.negative=1,u):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},s.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var u=this.iadd(a);return a.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var l=this.cmp(a);if(l===0)return this.negative=0,this.length=1,this.words[0]=0,this;var d,p;l>0?(d=this,p=a):(d=a,p=this);for(var m=0,S=0;S<p.length;S++)u=(d.words[S]|0)-(p.words[S]|0)+m,m=u>>26,this.words[S]=u&67108863;for(;m!==0&&S<d.length;S++)u=(d.words[S]|0)+m,m=u>>26,this.words[S]=u&67108863;if(m===0&&S<d.length&&d!==this)for(;S<d.length;S++)this.words[S]=d.words[S];return this.length=Math.max(this.length,S),d!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(a){return this.clone().isub(a)};function E(x,a,u){u.negative=a.negative^x.negative;var l=x.length+a.length|0;u.length=l,l=l-1|0;var d=x.words[0]|0,p=a.words[0]|0,m=d*p,S=m&67108863,y=m/67108864|0;u.words[0]=S;for(var c=1;c<l;c++){for(var g=y>>>26,P=y&67108863,N=Math.min(c,a.length-1),W=Math.max(0,c-x.length+1);W<=N;W++){var V=c-W|0;d=x.words[V]|0,p=a.words[W]|0,m=d*p+P,g+=m/67108864|0,P=m&67108863}u.words[c]=P|0,y=g|0}return y!==0?u.words[c]=y|0:u.length--,u._strip()}var M=function(a,u,l){var d=a.words,p=u.words,m=l.words,S=0,y,c,g,P=d[0]|0,N=P&8191,W=P>>>13,V=d[1]|0,X=V&8191,tt=V>>>13,xt=d[2]|0,nt=xt&8191,it=xt>>>13,Ce=d[3]|0,ht=Ce&8191,wt=Ce>>>13,ls=d[4]|0,Mt=ls&8191,Pt=ls>>>13,hs=d[5]|0,Et=hs&8191,It=hs>>>13,nn=d[6]|0,_t=nn&8191,At=nn>>>13,An=d[7]|0,Lt=An&8191,Rt=An>>>13,ds=d[8]|0,Ct=ds&8191,Ot=ds>>>13,ps=d[9]|0,Ut=ps&8191,zt=ps>>>13,tc=p[0]|0,Wt=tc&8191,Ft=tc>>>13,ec=p[1]|0,qt=ec&8191,Dt=ec>>>13,rc=p[2]|0,Kt=rc&8191,Ht=rc>>>13,nc=p[3]|0,Vt=nc&8191,$t=nc>>>13,sc=p[4]|0,jt=sc&8191,Gt=sc>>>13,ic=p[5]|0,Zt=ic&8191,Yt=ic>>>13,oc=p[6]|0,Jt=oc&8191,Xt=oc>>>13,ac=p[7]|0,Qt=ac&8191,te=ac>>>13,cc=p[8]|0,ee=cc&8191,re=cc>>>13,uc=p[9]|0,ne=uc&8191,se=uc>>>13;l.negative=a.negative^u.negative,l.length=19,y=Math.imul(N,Wt),c=Math.imul(N,Ft),c=c+Math.imul(W,Wt)|0,g=Math.imul(W,Ft);var Vi=(S+y|0)+((c&8191)<<13)|0;S=(g+(c>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,y=Math.imul(X,Wt),c=Math.imul(X,Ft),c=c+Math.imul(tt,Wt)|0,g=Math.imul(tt,Ft),y=y+Math.imul(N,qt)|0,c=c+Math.imul(N,Dt)|0,c=c+Math.imul(W,qt)|0,g=g+Math.imul(W,Dt)|0;var $i=(S+y|0)+((c&8191)<<13)|0;S=(g+(c>>>13)|0)+($i>>>26)|0,$i&=67108863,y=Math.imul(nt,Wt),c=Math.imul(nt,Ft),c=c+Math.imul(it,Wt)|0,g=Math.imul(it,Ft),y=y+Math.imul(X,qt)|0,c=c+Math.imul(X,Dt)|0,c=c+Math.imul(tt,qt)|0,g=g+Math.imul(tt,Dt)|0,y=y+Math.imul(N,Kt)|0,c=c+Math.imul(N,Ht)|0,c=c+Math.imul(W,Kt)|0,g=g+Math.imul(W,Ht)|0;var ji=(S+y|0)+((c&8191)<<13)|0;S=(g+(c>>>13)|0)+(ji>>>26)|0,ji&=67108863,y=Math.imul(ht,Wt),c=Math.imul(ht,Ft),c=c+Math.imul(wt,Wt)|0,g=Math.imul(wt,Ft),y=y+Math.imul(nt,qt)|0,c=c+Math.imul(nt,Dt)|0,c=c+Math.imul(it,qt)|0,g=g+Math.imul(it,Dt)|0,y=y+Math.imul(X,Kt)|0,c=c+Math.imul(X,Ht)|0,c=c+Math.imul(tt,Kt)|0,g=g+Math.imul(tt,Ht)|0,y=y+Math.imul(N,Vt)|0,c=c+Math.imul(N,$t)|0,c=c+Math.imul(W,Vt)|0,g=g+Math.imul(W,$t)|0;var Gi=(S+y|0)+((c&8191)<<13)|0;S=(g+(c>>>13)|0)+(Gi>>>26)|0,Gi&=67108863,y=Math.imul(Mt,Wt),c=Math.imul(Mt,Ft),c=c+Math.imul(Pt,Wt)|0,g=Math.imul(Pt,Ft),y=y+Math.imul(ht,qt)|0,c=c+Math.imul(ht,Dt)|0,c=c+Math.imul(wt,qt)|0,g=g+Math.imul(wt,Dt)|0,y=y+Math.imul(nt,Kt)|0,c=c+Math.imul(nt,Ht)|0,c=c+Math.imul(it,Kt)|0,g=g+Math.imul(it,Ht)|0,y=y+Math.imul(X,Vt)|0,c=c+Math.imul(X,$t)|0,c=c+Math.imul(tt,Vt)|0,g=g+Math.imul(tt,$t)|0,y=y+Math.imul(N,jt)|0,c=c+Math.imul(N,Gt)|0,c=c+Math.imul(W,jt)|0,g=g+Math.imul(W,Gt)|0;var Zi=(S+y|0)+((c&8191)<<13)|0;S=(g+(c>>>13)|0)+(Zi>>>26)|0,Zi&=67108863,y=Math.imul(Et,Wt),c=Math.imul(Et,Ft),c=c+Math.imul(It,Wt)|0,g=Math.imul(It,Ft),y=y+Math.imul(Mt,qt)|0,c=c+Math.imul(Mt,Dt)|0,c=c+Math.imul(Pt,qt)|0,g=g+Math.imul(Pt,Dt)|0,y=y+Math.imul(ht,Kt)|0,c=c+Math.imul(ht,Ht)|0,c=c+Math.imul(wt,Kt)|0,g=g+Math.imul(wt,Ht)|0,y=y+Math.imul(nt,Vt)|0,c=c+Math.imul(nt,$t)|0,c=c+Math.imul(it,Vt)|0,g=g+Math.imul(it,$t)|0,y=y+Math.imul(X,jt)|0,c=c+Math.imul(X,Gt)|0,c=c+Math.imul(tt,jt)|0,g=g+Math.imul(tt,Gt)|0,y=y+Math.imul(N,Zt)|0,c=c+Math.imul(N,Yt)|0,c=c+Math.imul(W,Zt)|0,g=g+Math.imul(W,Yt)|0;var Yi=(S+y|0)+((c&8191)<<13)|0;S=(g+(c>>>13)|0)+(Yi>>>26)|0,Yi&=67108863,y=Math.imul(_t,Wt),c=Math.imul(_t,Ft),c=c+Math.imul(At,Wt)|0,g=Math.imul(At,Ft),y=y+Math.imul(Et,qt)|0,c=c+Math.imul(Et,Dt)|0,c=c+Math.imul(It,qt)|0,g=g+Math.imul(It,Dt)|0,y=y+Math.imul(Mt,Kt)|0,c=c+Math.imul(Mt,Ht)|0,c=c+Math.imul(Pt,Kt)|0,g=g+Math.imul(Pt,Ht)|0,y=y+Math.imul(ht,Vt)|0,c=c+Math.imul(ht,$t)|0,c=c+Math.imul(wt,Vt)|0,g=g+Math.imul(wt,$t)|0,y=y+Math.imul(nt,jt)|0,c=c+Math.imul(nt,Gt)|0,c=c+Math.imul(it,jt)|0,g=g+Math.imul(it,Gt)|0,y=y+Math.imul(X,Zt)|0,c=c+Math.imul(X,Yt)|0,c=c+Math.imul(tt,Zt)|0,g=g+Math.imul(tt,Yt)|0,y=y+Math.imul(N,Jt)|0,c=c+Math.imul(N,Xt)|0,c=c+Math.imul(W,Jt)|0,g=g+Math.imul(W,Xt)|0;var Ji=(S+y|0)+((c&8191)<<13)|0;S=(g+(c>>>13)|0)+(Ji>>>26)|0,Ji&=67108863,y=Math.imul(Lt,Wt),c=Math.imul(Lt,Ft),c=c+Math.imul(Rt,Wt)|0,g=Math.imul(Rt,Ft),y=y+Math.imul(_t,qt)|0,c=c+Math.imul(_t,Dt)|0,c=c+Math.imul(At,qt)|0,g=g+Math.imul(At,Dt)|0,y=y+Math.imul(Et,Kt)|0,c=c+Math.imul(Et,Ht)|0,c=c+Math.imul(It,Kt)|0,g=g+Math.imul(It,Ht)|0,y=y+Math.imul(Mt,Vt)|0,c=c+Math.imul(Mt,$t)|0,c=c+Math.imul(Pt,Vt)|0,g=g+Math.imul(Pt,$t)|0,y=y+Math.imul(ht,jt)|0,c=c+Math.imul(ht,Gt)|0,c=c+Math.imul(wt,jt)|0,g=g+Math.imul(wt,Gt)|0,y=y+Math.imul(nt,Zt)|0,c=c+Math.imul(nt,Yt)|0,c=c+Math.imul(it,Zt)|0,g=g+Math.imul(it,Yt)|0,y=y+Math.imul(X,Jt)|0,c=c+Math.imul(X,Xt)|0,c=c+Math.imul(tt,Jt)|0,g=g+Math.imul(tt,Xt)|0,y=y+Math.imul(N,Qt)|0,c=c+Math.imul(N,te)|0,c=c+Math.imul(W,Qt)|0,g=g+Math.imul(W,te)|0;var Xi=(S+y|0)+((c&8191)<<13)|0;S=(g+(c>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,y=Math.imul(Ct,Wt),c=Math.imul(Ct,Ft),c=c+Math.imul(Ot,Wt)|0,g=Math.imul(Ot,Ft),y=y+Math.imul(Lt,qt)|0,c=c+Math.imul(Lt,Dt)|0,c=c+Math.imul(Rt,qt)|0,g=g+Math.imul(Rt,Dt)|0,y=y+Math.imul(_t,Kt)|0,c=c+Math.imul(_t,Ht)|0,c=c+Math.imul(At,Kt)|0,g=g+Math.imul(At,Ht)|0,y=y+Math.imul(Et,Vt)|0,c=c+Math.imul(Et,$t)|0,c=c+Math.imul(It,Vt)|0,g=g+Math.imul(It,$t)|0,y=y+Math.imul(Mt,jt)|0,c=c+Math.imul(Mt,Gt)|0,c=c+Math.imul(Pt,jt)|0,g=g+Math.imul(Pt,Gt)|0,y=y+Math.imul(ht,Zt)|0,c=c+Math.imul(ht,Yt)|0,c=c+Math.imul(wt,Zt)|0,g=g+Math.imul(wt,Yt)|0,y=y+Math.imul(nt,Jt)|0,c=c+Math.imul(nt,Xt)|0,c=c+Math.imul(it,Jt)|0,g=g+Math.imul(it,Xt)|0,y=y+Math.imul(X,Qt)|0,c=c+Math.imul(X,te)|0,c=c+Math.imul(tt,Qt)|0,g=g+Math.imul(tt,te)|0,y=y+Math.imul(N,ee)|0,c=c+Math.imul(N,re)|0,c=c+Math.imul(W,ee)|0,g=g+Math.imul(W,re)|0;var Qi=(S+y|0)+((c&8191)<<13)|0;S=(g+(c>>>13)|0)+(Qi>>>26)|0,Qi&=67108863,y=Math.imul(Ut,Wt),c=Math.imul(Ut,Ft),c=c+Math.imul(zt,Wt)|0,g=Math.imul(zt,Ft),y=y+Math.imul(Ct,qt)|0,c=c+Math.imul(Ct,Dt)|0,c=c+Math.imul(Ot,qt)|0,g=g+Math.imul(Ot,Dt)|0,y=y+Math.imul(Lt,Kt)|0,c=c+Math.imul(Lt,Ht)|0,c=c+Math.imul(Rt,Kt)|0,g=g+Math.imul(Rt,Ht)|0,y=y+Math.imul(_t,Vt)|0,c=c+Math.imul(_t,$t)|0,c=c+Math.imul(At,Vt)|0,g=g+Math.imul(At,$t)|0,y=y+Math.imul(Et,jt)|0,c=c+Math.imul(Et,Gt)|0,c=c+Math.imul(It,jt)|0,g=g+Math.imul(It,Gt)|0,y=y+Math.imul(Mt,Zt)|0,c=c+Math.imul(Mt,Yt)|0,c=c+Math.imul(Pt,Zt)|0,g=g+Math.imul(Pt,Yt)|0,y=y+Math.imul(ht,Jt)|0,c=c+Math.imul(ht,Xt)|0,c=c+Math.imul(wt,Jt)|0,g=g+Math.imul(wt,Xt)|0,y=y+Math.imul(nt,Qt)|0,c=c+Math.imul(nt,te)|0,c=c+Math.imul(it,Qt)|0,g=g+Math.imul(it,te)|0,y=y+Math.imul(X,ee)|0,c=c+Math.imul(X,re)|0,c=c+Math.imul(tt,ee)|0,g=g+Math.imul(tt,re)|0,y=y+Math.imul(N,ne)|0,c=c+Math.imul(N,se)|0,c=c+Math.imul(W,ne)|0,g=g+Math.imul(W,se)|0;var to=(S+y|0)+((c&8191)<<13)|0;S=(g+(c>>>13)|0)+(to>>>26)|0,to&=67108863,y=Math.imul(Ut,qt),c=Math.imul(Ut,Dt),c=c+Math.imul(zt,qt)|0,g=Math.imul(zt,Dt),y=y+Math.imul(Ct,Kt)|0,c=c+Math.imul(Ct,Ht)|0,c=c+Math.imul(Ot,Kt)|0,g=g+Math.imul(Ot,Ht)|0,y=y+Math.imul(Lt,Vt)|0,c=c+Math.imul(Lt,$t)|0,c=c+Math.imul(Rt,Vt)|0,g=g+Math.imul(Rt,$t)|0,y=y+Math.imul(_t,jt)|0,c=c+Math.imul(_t,Gt)|0,c=c+Math.imul(At,jt)|0,g=g+Math.imul(At,Gt)|0,y=y+Math.imul(Et,Zt)|0,c=c+Math.imul(Et,Yt)|0,c=c+Math.imul(It,Zt)|0,g=g+Math.imul(It,Yt)|0,y=y+Math.imul(Mt,Jt)|0,c=c+Math.imul(Mt,Xt)|0,c=c+Math.imul(Pt,Jt)|0,g=g+Math.imul(Pt,Xt)|0,y=y+Math.imul(ht,Qt)|0,c=c+Math.imul(ht,te)|0,c=c+Math.imul(wt,Qt)|0,g=g+Math.imul(wt,te)|0,y=y+Math.imul(nt,ee)|0,c=c+Math.imul(nt,re)|0,c=c+Math.imul(it,ee)|0,g=g+Math.imul(it,re)|0,y=y+Math.imul(X,ne)|0,c=c+Math.imul(X,se)|0,c=c+Math.imul(tt,ne)|0,g=g+Math.imul(tt,se)|0;var eo=(S+y|0)+((c&8191)<<13)|0;S=(g+(c>>>13)|0)+(eo>>>26)|0,eo&=67108863,y=Math.imul(Ut,Kt),c=Math.imul(Ut,Ht),c=c+Math.imul(zt,Kt)|0,g=Math.imul(zt,Ht),y=y+Math.imul(Ct,Vt)|0,c=c+Math.imul(Ct,$t)|0,c=c+Math.imul(Ot,Vt)|0,g=g+Math.imul(Ot,$t)|0,y=y+Math.imul(Lt,jt)|0,c=c+Math.imul(Lt,Gt)|0,c=c+Math.imul(Rt,jt)|0,g=g+Math.imul(Rt,Gt)|0,y=y+Math.imul(_t,Zt)|0,c=c+Math.imul(_t,Yt)|0,c=c+Math.imul(At,Zt)|0,g=g+Math.imul(At,Yt)|0,y=y+Math.imul(Et,Jt)|0,c=c+Math.imul(Et,Xt)|0,c=c+Math.imul(It,Jt)|0,g=g+Math.imul(It,Xt)|0,y=y+Math.imul(Mt,Qt)|0,c=c+Math.imul(Mt,te)|0,c=c+Math.imul(Pt,Qt)|0,g=g+Math.imul(Pt,te)|0,y=y+Math.imul(ht,ee)|0,c=c+Math.imul(ht,re)|0,c=c+Math.imul(wt,ee)|0,g=g+Math.imul(wt,re)|0,y=y+Math.imul(nt,ne)|0,c=c+Math.imul(nt,se)|0,c=c+Math.imul(it,ne)|0,g=g+Math.imul(it,se)|0;var ro=(S+y|0)+((c&8191)<<13)|0;S=(g+(c>>>13)|0)+(ro>>>26)|0,ro&=67108863,y=Math.imul(Ut,Vt),c=Math.imul(Ut,$t),c=c+Math.imul(zt,Vt)|0,g=Math.imul(zt,$t),y=y+Math.imul(Ct,jt)|0,c=c+Math.imul(Ct,Gt)|0,c=c+Math.imul(Ot,jt)|0,g=g+Math.imul(Ot,Gt)|0,y=y+Math.imul(Lt,Zt)|0,c=c+Math.imul(Lt,Yt)|0,c=c+Math.imul(Rt,Zt)|0,g=g+Math.imul(Rt,Yt)|0,y=y+Math.imul(_t,Jt)|0,c=c+Math.imul(_t,Xt)|0,c=c+Math.imul(At,Jt)|0,g=g+Math.imul(At,Xt)|0,y=y+Math.imul(Et,Qt)|0,c=c+Math.imul(Et,te)|0,c=c+Math.imul(It,Qt)|0,g=g+Math.imul(It,te)|0,y=y+Math.imul(Mt,ee)|0,c=c+Math.imul(Mt,re)|0,c=c+Math.imul(Pt,ee)|0,g=g+Math.imul(Pt,re)|0,y=y+Math.imul(ht,ne)|0,c=c+Math.imul(ht,se)|0,c=c+Math.imul(wt,ne)|0,g=g+Math.imul(wt,se)|0;var no=(S+y|0)+((c&8191)<<13)|0;S=(g+(c>>>13)|0)+(no>>>26)|0,no&=67108863,y=Math.imul(Ut,jt),c=Math.imul(Ut,Gt),c=c+Math.imul(zt,jt)|0,g=Math.imul(zt,Gt),y=y+Math.imul(Ct,Zt)|0,c=c+Math.imul(Ct,Yt)|0,c=c+Math.imul(Ot,Zt)|0,g=g+Math.imul(Ot,Yt)|0,y=y+Math.imul(Lt,Jt)|0,c=c+Math.imul(Lt,Xt)|0,c=c+Math.imul(Rt,Jt)|0,g=g+Math.imul(Rt,Xt)|0,y=y+Math.imul(_t,Qt)|0,c=c+Math.imul(_t,te)|0,c=c+Math.imul(At,Qt)|0,g=g+Math.imul(At,te)|0,y=y+Math.imul(Et,ee)|0,c=c+Math.imul(Et,re)|0,c=c+Math.imul(It,ee)|0,g=g+Math.imul(It,re)|0,y=y+Math.imul(Mt,ne)|0,c=c+Math.imul(Mt,se)|0,c=c+Math.imul(Pt,ne)|0,g=g+Math.imul(Pt,se)|0;var so=(S+y|0)+((c&8191)<<13)|0;S=(g+(c>>>13)|0)+(so>>>26)|0,so&=67108863,y=Math.imul(Ut,Zt),c=Math.imul(Ut,Yt),c=c+Math.imul(zt,Zt)|0,g=Math.imul(zt,Yt),y=y+Math.imul(Ct,Jt)|0,c=c+Math.imul(Ct,Xt)|0,c=c+Math.imul(Ot,Jt)|0,g=g+Math.imul(Ot,Xt)|0,y=y+Math.imul(Lt,Qt)|0,c=c+Math.imul(Lt,te)|0,c=c+Math.imul(Rt,Qt)|0,g=g+Math.imul(Rt,te)|0,y=y+Math.imul(_t,ee)|0,c=c+Math.imul(_t,re)|0,c=c+Math.imul(At,ee)|0,g=g+Math.imul(At,re)|0,y=y+Math.imul(Et,ne)|0,c=c+Math.imul(Et,se)|0,c=c+Math.imul(It,ne)|0,g=g+Math.imul(It,se)|0;var io=(S+y|0)+((c&8191)<<13)|0;S=(g+(c>>>13)|0)+(io>>>26)|0,io&=67108863,y=Math.imul(Ut,Jt),c=Math.imul(Ut,Xt),c=c+Math.imul(zt,Jt)|0,g=Math.imul(zt,Xt),y=y+Math.imul(Ct,Qt)|0,c=c+Math.imul(Ct,te)|0,c=c+Math.imul(Ot,Qt)|0,g=g+Math.imul(Ot,te)|0,y=y+Math.imul(Lt,ee)|0,c=c+Math.imul(Lt,re)|0,c=c+Math.imul(Rt,ee)|0,g=g+Math.imul(Rt,re)|0,y=y+Math.imul(_t,ne)|0,c=c+Math.imul(_t,se)|0,c=c+Math.imul(At,ne)|0,g=g+Math.imul(At,se)|0;var oo=(S+y|0)+((c&8191)<<13)|0;S=(g+(c>>>13)|0)+(oo>>>26)|0,oo&=67108863,y=Math.imul(Ut,Qt),c=Math.imul(Ut,te),c=c+Math.imul(zt,Qt)|0,g=Math.imul(zt,te),y=y+Math.imul(Ct,ee)|0,c=c+Math.imul(Ct,re)|0,c=c+Math.imul(Ot,ee)|0,g=g+Math.imul(Ot,re)|0,y=y+Math.imul(Lt,ne)|0,c=c+Math.imul(Lt,se)|0,c=c+Math.imul(Rt,ne)|0,g=g+Math.imul(Rt,se)|0;var ao=(S+y|0)+((c&8191)<<13)|0;S=(g+(c>>>13)|0)+(ao>>>26)|0,ao&=67108863,y=Math.imul(Ut,ee),c=Math.imul(Ut,re),c=c+Math.imul(zt,ee)|0,g=Math.imul(zt,re),y=y+Math.imul(Ct,ne)|0,c=c+Math.imul(Ct,se)|0,c=c+Math.imul(Ot,ne)|0,g=g+Math.imul(Ot,se)|0;var co=(S+y|0)+((c&8191)<<13)|0;S=(g+(c>>>13)|0)+(co>>>26)|0,co&=67108863,y=Math.imul(Ut,ne),c=Math.imul(Ut,se),c=c+Math.imul(zt,ne)|0,g=Math.imul(zt,se);var uo=(S+y|0)+((c&8191)<<13)|0;return S=(g+(c>>>13)|0)+(uo>>>26)|0,uo&=67108863,m[0]=Vi,m[1]=$i,m[2]=ji,m[3]=Gi,m[4]=Zi,m[5]=Yi,m[6]=Ji,m[7]=Xi,m[8]=Qi,m[9]=to,m[10]=eo,m[11]=ro,m[12]=no,m[13]=so,m[14]=io,m[15]=oo,m[16]=ao,m[17]=co,m[18]=uo,S!==0&&(m[19]=S,l.length++),l};Math.imul||(M=E);function U(x,a,u){u.negative=a.negative^x.negative,u.length=x.length+a.length;for(var l=0,d=0,p=0;p<u.length-1;p++){var m=d;d=0;for(var S=l&67108863,y=Math.min(p,a.length-1),c=Math.max(0,p-x.length+1);c<=y;c++){var g=p-c,P=x.words[g]|0,N=a.words[c]|0,W=P*N,V=W&67108863;m=m+(W/67108864|0)|0,V=V+S|0,S=V&67108863,m=m+(V>>>26)|0,d+=m>>>26,m&=67108863}u.words[p]=S,l=m,m=d}return l!==0?u.words[p]=l:u.length--,u._strip()}function T(x,a,u){return U(x,a,u)}s.prototype.mulTo=function(a,u){var l,d=this.length+a.length;return this.length===10&&a.length===10?l=M(this,a,u):d<63?l=E(this,a,u):d<1024?l=U(this,a,u):l=T(this,a,u),l};function F(x,a){this.x=x,this.y=a}F.prototype.makeRBT=function(a){for(var u=new Array(a),l=s.prototype._countBits(a)-1,d=0;d<a;d++)u[d]=this.revBin(d,l,a);return u},F.prototype.revBin=function(a,u,l){if(a===0||a===l-1)return a;for(var d=0,p=0;p<u;p++)d|=(a&1)<<u-p-1,a>>=1;return d},F.prototype.permute=function(a,u,l,d,p,m){for(var S=0;S<m;S++)d[S]=u[a[S]],p[S]=l[a[S]]},F.prototype.transform=function(a,u,l,d,p,m){this.permute(m,a,u,l,d,p);for(var S=1;S<p;S<<=1)for(var y=S<<1,c=Math.cos(2*Math.PI/y),g=Math.sin(2*Math.PI/y),P=0;P<p;P+=y)for(var N=c,W=g,V=0;V<S;V++){var X=l[P+V],tt=d[P+V],xt=l[P+V+S],nt=d[P+V+S],it=N*xt-W*nt;nt=N*nt+W*xt,xt=it,l[P+V]=X+xt,d[P+V]=tt+nt,l[P+V+S]=X-xt,d[P+V+S]=tt-nt,V!==y&&(it=c*N-g*W,W=c*W+g*N,N=it)}},F.prototype.guessLen13b=function(a,u){var l=Math.max(u,a)|1,d=l&1,p=0;for(l=l/2|0;l;l=l>>>1)p++;return 1<<p+1+d},F.prototype.conjugate=function(a,u,l){if(!(l<=1))for(var d=0;d<l/2;d++){var p=a[d];a[d]=a[l-d-1],a[l-d-1]=p,p=u[d],u[d]=-u[l-d-1],u[l-d-1]=-p}},F.prototype.normalize13b=function(a,u){for(var l=0,d=0;d<u/2;d++){var p=Math.round(a[2*d+1]/u)*8192+Math.round(a[2*d]/u)+l;a[d]=p&67108863,p<67108864?l=0:l=p/67108864|0}return a},F.prototype.convert13b=function(a,u,l,d){for(var p=0,m=0;m<u;m++)p=p+(a[m]|0),l[2*m]=p&8191,p=p>>>13,l[2*m+1]=p&8191,p=p>>>13;for(m=2*u;m<d;++m)l[m]=0;e(p===0),e((p&-8192)===0)},F.prototype.stub=function(a){for(var u=new Array(a),l=0;l<a;l++)u[l]=0;return u},F.prototype.mulp=function(a,u,l){var d=2*this.guessLen13b(a.length,u.length),p=this.makeRBT(d),m=this.stub(d),S=new Array(d),y=new Array(d),c=new Array(d),g=new Array(d),P=new Array(d),N=new Array(d),W=l.words;W.length=d,this.convert13b(a.words,a.length,S,d),this.convert13b(u.words,u.length,g,d),this.transform(S,m,y,c,d,p),this.transform(g,m,P,N,d,p);for(var V=0;V<d;V++){var X=y[V]*P[V]-c[V]*N[V];c[V]=y[V]*N[V]+c[V]*P[V],y[V]=X}return this.conjugate(y,c,d),this.transform(y,c,W,m,d,p),this.conjugate(W,m,d),this.normalize13b(W,d),l.negative=a.negative^u.negative,l.length=a.length+u.length,l._strip()},s.prototype.mul=function(a){var u=new s(null);return u.words=new Array(this.length+a.length),this.mulTo(a,u)},s.prototype.mulf=function(a){var u=new s(null);return u.words=new Array(this.length+a.length),T(this,a,u)},s.prototype.imul=function(a){return this.clone().mulTo(a,this)},s.prototype.imuln=function(a){var u=a<0;u&&(a=-a),e(typeof a=="number"),e(a<67108864);for(var l=0,d=0;d<this.length;d++){var p=(this.words[d]|0)*a,m=(p&67108863)+(l&67108863);l>>=26,l+=p/67108864|0,l+=m>>>26,this.words[d]=m&67108863}return l!==0&&(this.words[d]=l,this.length++),u?this.ineg():this},s.prototype.muln=function(a){return this.clone().imuln(a)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(a){var u=L(a);if(u.length===0)return new s(1);for(var l=this,d=0;d<u.length&&u[d]===0;d++,l=l.sqr());if(++d<u.length)for(var p=l.sqr();d<u.length;d++,p=p.sqr())u[d]!==0&&(l=l.mul(p));return l},s.prototype.iushln=function(a){e(typeof a=="number"&&a>=0);var u=a%26,l=(a-u)/26,d=67108863>>>26-u<<26-u,p;if(u!==0){var m=0;for(p=0;p<this.length;p++){var S=this.words[p]&d,y=(this.words[p]|0)-S<<u;this.words[p]=y|m,m=S>>>26-u}m&&(this.words[p]=m,this.length++)}if(l!==0){for(p=this.length-1;p>=0;p--)this.words[p+l]=this.words[p];for(p=0;p<l;p++)this.words[p]=0;this.length+=l}return this._strip()},s.prototype.ishln=function(a){return e(this.negative===0),this.iushln(a)},s.prototype.iushrn=function(a,u,l){e(typeof a=="number"&&a>=0);var d;u?d=(u-u%26)/26:d=0;var p=a%26,m=Math.min((a-p)/26,this.length),S=67108863^67108863>>>p<<p,y=l;if(d-=m,d=Math.max(0,d),y){for(var c=0;c<m;c++)y.words[c]=this.words[c];y.length=m}if(m!==0)if(this.length>m)for(this.length-=m,c=0;c<this.length;c++)this.words[c]=this.words[c+m];else this.words[0]=0,this.length=1;var g=0;for(c=this.length-1;c>=0&&(g!==0||c>=d);c--){var P=this.words[c]|0;this.words[c]=g<<26-p|P>>>p,g=P&S}return y&&g!==0&&(y.words[y.length++]=g),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(a,u,l){return e(this.negative===0),this.iushrn(a,u,l)},s.prototype.shln=function(a){return this.clone().ishln(a)},s.prototype.ushln=function(a){return this.clone().iushln(a)},s.prototype.shrn=function(a){return this.clone().ishrn(a)},s.prototype.ushrn=function(a){return this.clone().iushrn(a)},s.prototype.testn=function(a){e(typeof a=="number"&&a>=0);var u=a%26,l=(a-u)/26,d=1<<u;if(this.length<=l)return!1;var p=this.words[l];return!!(p&d)},s.prototype.imaskn=function(a){e(typeof a=="number"&&a>=0);var u=a%26,l=(a-u)/26;if(e(this.negative===0,"imaskn works only with positive numbers"),this.length<=l)return this;if(u!==0&&l++,this.length=Math.min(l,this.length),u!==0){var d=67108863^67108863>>>u<<u;this.words[this.length-1]&=d}return this._strip()},s.prototype.maskn=function(a){return this.clone().imaskn(a)},s.prototype.iaddn=function(a){return e(typeof a=="number"),e(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},s.prototype._iaddn=function(a){this.words[0]+=a;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},s.prototype.isubn=function(a){if(e(typeof a=="number"),e(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},s.prototype.addn=function(a){return this.clone().iaddn(a)},s.prototype.subn=function(a){return this.clone().isubn(a)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(a,u,l){var d=a.length+l,p;this._expand(d);var m,S=0;for(p=0;p<a.length;p++){m=(this.words[p+l]|0)+S;var y=(a.words[p]|0)*u;m-=y&67108863,S=(m>>26)-(y/67108864|0),this.words[p+l]=m&67108863}for(;p<this.length-l;p++)m=(this.words[p+l]|0)+S,S=m>>26,this.words[p+l]=m&67108863;if(S===0)return this._strip();for(e(S===-1),S=0,p=0;p<this.length;p++)m=-(this.words[p]|0)+S,S=m>>26,this.words[p]=m&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(a,u){var l=this.length-a.length,d=this.clone(),p=a,m=p.words[p.length-1]|0,S=this._countBits(m);l=26-S,l!==0&&(p=p.ushln(l),d.iushln(l),m=p.words[p.length-1]|0);var y=d.length-p.length,c;if(u!=="mod"){c=new s(null),c.length=y+1,c.words=new Array(c.length);for(var g=0;g<c.length;g++)c.words[g]=0}var P=d.clone()._ishlnsubmul(p,1,y);P.negative===0&&(d=P,c&&(c.words[y]=1));for(var N=y-1;N>=0;N--){var W=(d.words[p.length+N]|0)*67108864+(d.words[p.length+N-1]|0);for(W=Math.min(W/m|0,67108863),d._ishlnsubmul(p,W,N);d.negative!==0;)W--,d.negative=0,d._ishlnsubmul(p,1,N),d.isZero()||(d.negative^=1);c&&(c.words[N]=W)}return c&&c._strip(),d._strip(),u!=="div"&&l!==0&&d.iushrn(l),{div:c||null,mod:d}},s.prototype.divmod=function(a,u,l){if(e(!a.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var d,p,m;return this.negative!==0&&a.negative===0?(m=this.neg().divmod(a,u),u!=="mod"&&(d=m.div.neg()),u!=="div"&&(p=m.mod.neg(),l&&p.negative!==0&&p.iadd(a)),{div:d,mod:p}):this.negative===0&&a.negative!==0?(m=this.divmod(a.neg(),u),u!=="mod"&&(d=m.div.neg()),{div:d,mod:m.mod}):this.negative&a.negative?(m=this.neg().divmod(a.neg(),u),u!=="div"&&(p=m.mod.neg(),l&&p.negative!==0&&p.isub(a)),{div:m.div,mod:p}):a.length>this.length||this.cmp(a)<0?{div:new s(0),mod:this}:a.length===1?u==="div"?{div:this.divn(a.words[0]),mod:null}:u==="mod"?{div:null,mod:new s(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new s(this.modrn(a.words[0]))}:this._wordDiv(a,u)},s.prototype.div=function(a){return this.divmod(a,"div",!1).div},s.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},s.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},s.prototype.divRound=function(a){var u=this.divmod(a);if(u.mod.isZero())return u.div;var l=u.div.negative!==0?u.mod.isub(a):u.mod,d=a.ushrn(1),p=a.andln(1),m=l.cmp(d);return m<0||p===1&&m===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},s.prototype.modrn=function(a){var u=a<0;u&&(a=-a),e(a<=67108863);for(var l=(1<<26)%a,d=0,p=this.length-1;p>=0;p--)d=(l*d+(this.words[p]|0))%a;return u?-d:d},s.prototype.modn=function(a){return this.modrn(a)},s.prototype.idivn=function(a){var u=a<0;u&&(a=-a),e(a<=67108863);for(var l=0,d=this.length-1;d>=0;d--){var p=(this.words[d]|0)+l*67108864;this.words[d]=p/a|0,l=p%a}return this._strip(),u?this.ineg():this},s.prototype.divn=function(a){return this.clone().idivn(a)},s.prototype.egcd=function(a){e(a.negative===0),e(!a.isZero());var u=this,l=a.clone();u.negative!==0?u=u.umod(a):u=u.clone();for(var d=new s(1),p=new s(0),m=new s(0),S=new s(1),y=0;u.isEven()&&l.isEven();)u.iushrn(1),l.iushrn(1),++y;for(var c=l.clone(),g=u.clone();!u.isZero();){for(var P=0,N=1;!(u.words[0]&N)&&P<26;++P,N<<=1);if(P>0)for(u.iushrn(P);P-- >0;)(d.isOdd()||p.isOdd())&&(d.iadd(c),p.isub(g)),d.iushrn(1),p.iushrn(1);for(var W=0,V=1;!(l.words[0]&V)&&W<26;++W,V<<=1);if(W>0)for(l.iushrn(W);W-- >0;)(m.isOdd()||S.isOdd())&&(m.iadd(c),S.isub(g)),m.iushrn(1),S.iushrn(1);u.cmp(l)>=0?(u.isub(l),d.isub(m),p.isub(S)):(l.isub(u),m.isub(d),S.isub(p))}return{a:m,b:S,gcd:l.iushln(y)}},s.prototype._invmp=function(a){e(a.negative===0),e(!a.isZero());var u=this,l=a.clone();u.negative!==0?u=u.umod(a):u=u.clone();for(var d=new s(1),p=new s(0),m=l.clone();u.cmpn(1)>0&&l.cmpn(1)>0;){for(var S=0,y=1;!(u.words[0]&y)&&S<26;++S,y<<=1);if(S>0)for(u.iushrn(S);S-- >0;)d.isOdd()&&d.iadd(m),d.iushrn(1);for(var c=0,g=1;!(l.words[0]&g)&&c<26;++c,g<<=1);if(c>0)for(l.iushrn(c);c-- >0;)p.isOdd()&&p.iadd(m),p.iushrn(1);u.cmp(l)>=0?(u.isub(l),d.isub(p)):(l.isub(u),p.isub(d))}var P;return u.cmpn(1)===0?P=d:P=p,P.cmpn(0)<0&&P.iadd(a),P},s.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var u=this.clone(),l=a.clone();u.negative=0,l.negative=0;for(var d=0;u.isEven()&&l.isEven();d++)u.iushrn(1),l.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;l.isEven();)l.iushrn(1);var p=u.cmp(l);if(p<0){var m=u;u=l,l=m}else if(p===0||l.cmpn(1)===0)break;u.isub(l)}while(!0);return l.iushln(d)},s.prototype.invm=function(a){return this.egcd(a).a.umod(a)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(a){return this.words[0]&a},s.prototype.bincn=function(a){e(typeof a=="number");var u=a%26,l=(a-u)/26,d=1<<u;if(this.length<=l)return this._expand(l+1),this.words[l]|=d,this;for(var p=d,m=l;p!==0&&m<this.length;m++){var S=this.words[m]|0;S+=p,p=S>>>26,S&=67108863,this.words[m]=S}return p!==0&&(this.words[m]=p,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(a){var u=a<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var l;if(this.length>1)l=1;else{u&&(a=-a),e(a<=67108863,"Number is too big");var d=this.words[0]|0;l=d===a?0:d<a?-1:1}return this.negative!==0?-l|0:l},s.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var u=this.ucmp(a);return this.negative!==0?-u|0:u},s.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var u=0,l=this.length-1;l>=0;l--){var d=this.words[l]|0,p=a.words[l]|0;if(d!==p){d<p?u=-1:d>p&&(u=1);break}}return u},s.prototype.gtn=function(a){return this.cmpn(a)===1},s.prototype.gt=function(a){return this.cmp(a)===1},s.prototype.gten=function(a){return this.cmpn(a)>=0},s.prototype.gte=function(a){return this.cmp(a)>=0},s.prototype.ltn=function(a){return this.cmpn(a)===-1},s.prototype.lt=function(a){return this.cmp(a)===-1},s.prototype.lten=function(a){return this.cmpn(a)<=0},s.prototype.lte=function(a){return this.cmp(a)<=0},s.prototype.eqn=function(a){return this.cmpn(a)===0},s.prototype.eq=function(a){return this.cmp(a)===0},s.red=function(a){return new Y(a)},s.prototype.toRed=function(a){return e(!this.red,"Already a number in reduction context"),e(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},s.prototype.fromRed=function(){return e(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(a){return this.red=a,this},s.prototype.forceRed=function(a){return e(!this.red,"Already a number in reduction context"),this._forceRed(a)},s.prototype.redAdd=function(a){return e(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},s.prototype.redIAdd=function(a){return e(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},s.prototype.redSub=function(a){return e(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},s.prototype.redISub=function(a){return e(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},s.prototype.redShl=function(a){return e(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},s.prototype.redMul=function(a){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},s.prototype.redIMul=function(a){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},s.prototype.redSqr=function(){return e(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return e(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return e(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return e(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return e(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(a){return e(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Z={k256:null,p224:null,p192:null,p25519:null};function q(x,a){this.name=x,this.p=new s(a,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}q.prototype._tmp=function(){var a=new s(null);return a.words=new Array(Math.ceil(this.n/13)),a},q.prototype.ireduce=function(a){var u=a,l;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),l=u.bitLength();while(l>this.n);var d=l<this.n?-1:u.ucmp(this.p);return d===0?(u.words[0]=0,u.length=1):d>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},q.prototype.split=function(a,u){a.iushrn(this.n,0,u)},q.prototype.imulK=function(a){return a.imul(this.k)};function H(){q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(H,q),H.prototype.split=function(a,u){for(var l=4194303,d=Math.min(a.length,9),p=0;p<d;p++)u.words[p]=a.words[p];if(u.length=d,a.length<=9){a.words[0]=0,a.length=1;return}var m=a.words[9];for(u.words[u.length++]=m&l,p=10;p<a.length;p++){var S=a.words[p]|0;a.words[p-10]=(S&l)<<4|m>>>22,m=S}m>>>=22,a.words[p-10]=m,m===0&&a.length>10?a.length-=10:a.length-=9},H.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var u=0,l=0;l<a.length;l++){var d=a.words[l]|0;u+=d*977,a.words[l]=u&67108863,u=d*64+(u/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function G(){q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(G,q);function j(){q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(j,q);function dt(){q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(dt,q),dt.prototype.imulK=function(a){for(var u=0,l=0;l<a.length;l++){var d=(a.words[l]|0)*19+u,p=d&67108863;d>>>=26,a.words[l]=p,u=d}return u!==0&&(a.words[a.length++]=u),a},s._prime=function(a){if(Z[a])return Z[a];var u;if(a==="k256")u=new H;else if(a==="p224")u=new G;else if(a==="p192")u=new j;else if(a==="p25519")u=new dt;else throw new Error("Unknown prime "+a);return Z[a]=u,u};function Y(x){if(typeof x=="string"){var a=s._prime(x);this.m=a.p,this.prime=a}else e(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}Y.prototype._verify1=function(a){e(a.negative===0,"red works only with positives"),e(a.red,"red works only with red numbers")},Y.prototype._verify2=function(a,u){e((a.negative|u.negative)===0,"red works only with positives"),e(a.red&&a.red===u.red,"red works only with red numbers")},Y.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(b(a,a.umod(this.m)._forceRed(this)),a)},Y.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},Y.prototype.add=function(a,u){this._verify2(a,u);var l=a.add(u);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},Y.prototype.iadd=function(a,u){this._verify2(a,u);var l=a.iadd(u);return l.cmp(this.m)>=0&&l.isub(this.m),l},Y.prototype.sub=function(a,u){this._verify2(a,u);var l=a.sub(u);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},Y.prototype.isub=function(a,u){this._verify2(a,u);var l=a.isub(u);return l.cmpn(0)<0&&l.iadd(this.m),l},Y.prototype.shl=function(a,u){return this._verify1(a),this.imod(a.ushln(u))},Y.prototype.imul=function(a,u){return this._verify2(a,u),this.imod(a.imul(u))},Y.prototype.mul=function(a,u){return this._verify2(a,u),this.imod(a.mul(u))},Y.prototype.isqr=function(a){return this.imul(a,a.clone())},Y.prototype.sqr=function(a){return this.mul(a,a)},Y.prototype.sqrt=function(a){if(a.isZero())return a.clone();var u=this.m.andln(3);if(e(u%2===1),u===3){var l=this.m.add(new s(1)).iushrn(2);return this.pow(a,l)}for(var d=this.m.subn(1),p=0;!d.isZero()&&d.andln(1)===0;)p++,d.iushrn(1);e(!d.isZero());var m=new s(1).toRed(this),S=m.redNeg(),y=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new s(2*c*c).toRed(this);this.pow(c,y).cmp(S)!==0;)c.redIAdd(S);for(var g=this.pow(c,d),P=this.pow(a,d.addn(1).iushrn(1)),N=this.pow(a,d),W=p;N.cmp(m)!==0;){for(var V=N,X=0;V.cmp(m)!==0;X++)V=V.redSqr();e(X<W);var tt=this.pow(g,new s(1).iushln(W-X-1));P=P.redMul(tt),g=tt.redSqr(),N=N.redMul(g),W=X}return P},Y.prototype.invm=function(a){var u=a._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},Y.prototype.pow=function(a,u){if(u.isZero())return new s(1).toRed(this);if(u.cmpn(1)===0)return a.clone();var l=4,d=new Array(1<<l);d[0]=new s(1).toRed(this),d[1]=a;for(var p=2;p<d.length;p++)d[p]=this.mul(d[p-1],a);var m=d[0],S=0,y=0,c=u.bitLength()%26;for(c===0&&(c=26),p=u.length-1;p>=0;p--){for(var g=u.words[p],P=c-1;P>=0;P--){var N=g>>P&1;if(m!==d[0]&&(m=this.sqr(m)),N===0&&S===0){y=0;continue}S<<=1,S|=N,y++,!(y!==l&&(p!==0||P!==0))&&(m=this.mul(m,d[S]),y=0,S=0)}c=26}return m},Y.prototype.convertTo=function(a){var u=a.umod(this.m);return u===a?u.clone():u},Y.prototype.convertFrom=function(a){var u=a.clone();return u.red=null,u},s.mont=function(a){return new et(a)};function et(x){Y.call(this,x),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(et,Y),et.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},et.prototype.convertFrom=function(a){var u=this.imod(a.mul(this.rinv));return u.red=null,u},et.prototype.imul=function(a,u){if(a.isZero()||u.isZero())return a.words[0]=0,a.length=1,a;var l=a.imul(u),d=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=l.isub(d).iushrn(this.shift),m=p;return p.cmp(this.m)>=0?m=p.isub(this.m):p.cmpn(0)<0&&(m=p.iadd(this.m)),m._forceRed(this)},et.prototype.mul=function(a,u){if(a.isZero()||u.isZero())return new s(0)._forceRed(this);var l=a.mul(u),d=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=l.isub(d).iushrn(this.shift),m=p;return p.cmp(this.m)>=0?m=p.isub(this.m):p.cmpn(0)<0&&(m=p.iadd(this.m)),m._forceRed(this)},et.prototype.invm=function(a){var u=this.imod(a._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(typeof Zo>"u"||Zo,du)});var gu=pe((Jo,yu)=>{var Vs=Fn(),Qe=Vs.Buffer;function pu(r,t){for(var e in r)t[e]=r[e]}Qe.from&&Qe.alloc&&Qe.allocUnsafe&&Qe.allocUnsafeSlow?yu.exports=Vs:(pu(Vs,Jo),Jo.Buffer=$r);function $r(r,t,e){return Qe(r,t,e)}$r.prototype=Object.create(Qe.prototype);pu(Qe,$r);$r.from=function(r,t,e){if(typeof r=="number")throw new TypeError("Argument must not be a number");return Qe(r,t,e)};$r.alloc=function(r,t,e){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=Qe(r);return t!==void 0?typeof e=="string"?n.fill(t,e):n.fill(t):n.fill(0),n};$r.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return Qe(r)};$r.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return Vs.SlowBuffer(r)}});var wu=pe((ly,mu)=>{"use strict";var $s=gu().Buffer;function Zh(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var o=r.length,h=r.charAt(0),f=Math.log(o)/Math.log(256),b=Math.log(256)/Math.log(o);function w(B){if((Array.isArray(B)||B instanceof Uint8Array)&&(B=$s.from(B)),!$s.isBuffer(B))throw new TypeError("Expected Buffer");if(B.length===0)return"";for(var O=0,L=0,E=0,M=B.length;E!==M&&B[E]===0;)E++,O++;for(var U=(M-E)*b+1>>>0,T=new Uint8Array(U);E!==M;){for(var F=B[E],Z=0,q=U-1;(F!==0||Z<L)&&q!==-1;q--,Z++)F+=256*T[q]>>>0,T[q]=F%o>>>0,F=F/o>>>0;if(F!==0)throw new Error("Non-zero carry");L=Z,E++}for(var H=U-L;H!==U&&T[H]===0;)H++;for(var G=h.repeat(O);H<U;++H)G+=r.charAt(T[H]);return G}function k(B){if(typeof B!="string")throw new TypeError("Expected String");if(B.length===0)return $s.alloc(0);for(var O=0,L=0,E=0;B[O]===h;)L++,O++;for(var M=(B.length-O)*f+1>>>0,U=new Uint8Array(M);O<B.length;){var T=t[B.charCodeAt(O)];if(T===255)return;for(var F=0,Z=M-1;(T!==0||F<E)&&Z!==-1;Z--,F++)T+=o*U[Z]>>>0,U[Z]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");E=F,O++}for(var q=M-E;q!==M&&U[q]===0;)q++;var H=$s.allocUnsafe(L+(M-q));H.fill(0,0,L);for(var G=L;q!==M;)H[G++]=U[q++];return H}function I(B){var O=k(B);if(O)return O;throw new Error("Non-base"+o+" character")}return{encode:w,decodeUnsafe:k,decode:I}}mu.exports=Zh});var js=pe((hy,bu)=>{var Yh=wu(),Jh="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";bu.exports=Yh(Jh)});var xu=pe(ea=>{"use strict";function fr(r,t,e){return t<=r&&r<=e}function Xs(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function Qh(r){for(var t=String(r),e=t.length,n=0,s=[];n<e;){var i=t.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===e-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var h=i&1023,f=o&1023;s.push(65536+(h<<10)+f),n+=1}else s.push(65533)}n+=1}return s}function td(r){for(var t="",e=0;e<r.length;++e){var n=r[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var Gs=-1;function ta(r){this.tokens=[].slice.call(r)}ta.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Gs},prepend:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.push(t.shift());else this.tokens.push(r)}};var gn=-1;function Qo(r,t){if(r)throw TypeError("Decoder error");return t||65533}var Zs="utf-8";function Ys(r,t){if(!(this instanceof Ys))return new Ys(r,t);if(r=r!==void 0?String(r).toLowerCase():Zs,r!==Zs)throw new Error("Encoding not supported. Only utf-8 is supported");t=Xs(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Ys.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=Xs(e),this._streaming||(this._decoder=new ed({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new ta(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==gn);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===gn)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),td(i)}};function Js(r,t){if(!(this instanceof Js))return new Js(r,t);if(r=r!==void 0?String(r).toLowerCase():Zs,r!==Zs)throw new Error("Encoding not supported. Only utf-8 is supported");t=Xs(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Js.prototype={encode:function(t,e){t=t?String(t):"",e=Xs(e),this._streaming||(this._encoder=new rd(this._options)),this._streaming=!!e.stream;for(var n=[],s=new ta(Qh(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==gn);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==gn;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function ed(r){var t=r.fatal,e=0,n=0,s=0,i=128,o=191;this.handler=function(h,f){if(f===Gs&&s!==0)return s=0,Qo(t);if(f===Gs)return gn;if(s===0){if(fr(f,0,127))return f;if(fr(f,194,223))s=1,e=f-192;else if(fr(f,224,239))f===224&&(i=160),f===237&&(o=159),s=2,e=f-224;else if(fr(f,240,244))f===240&&(i=144),f===244&&(o=143),s=3,e=f-240;else return Qo(t);return e=e<<6*s,null}if(!fr(f,i,o))return e=s=n=0,i=128,o=191,h.prepend(f),Qo(t);if(i=128,o=191,n+=1,e+=f-128<<6*(s-n),n!==s)return null;var b=e;return e=s=n=0,b}}function rd(r){var t=r.fatal;this.handler=function(e,n){if(n===Gs)return gn;if(fr(n,0,127))return n;var s,i;fr(n,128,2047)?(s=1,i=192):fr(n,2048,65535)?(s=2,i=224):fr(n,65536,1114111)&&(s=3,i=240);for(var o=[(n>>6*s)+i];s>0;){var h=n>>6*(s-1);o.push(128|h&63),s-=1}return o}}ea.TextEncoder=Js;ea.TextDecoder=Ys});var Eu=pe(yt=>{"use strict";var nd=yt&&yt.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),sd=yt&&yt.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),tr=yt&&yt.__decorate||function(r,t,e,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,n);else for(var h=r.length-1;h>=0;h--)(o=r[h])&&(i=(s<3?o(i):s>3?o(t,e,i):o(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i},id=yt&&yt.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.hasOwnProperty.call(r,e)&&nd(t,r,e);return sd(t,r),t},vu=yt&&yt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yt,"__esModule",{value:!0});yt.deserializeUnchecked=yt.deserialize=yt.serialize=yt.BinaryReader=yt.BinaryWriter=yt.BorshError=yt.baseDecode=yt.baseEncode=void 0;var Lr=vu(Yo()),ku=vu(js()),od=id(xu()),ad=typeof TextDecoder!="function"?od.TextDecoder:TextDecoder,cd=new ad("utf-8",{fatal:!0});function ud(r){return typeof r=="string"&&(r=Buffer.from(r,"utf8")),ku.default.encode(Buffer.from(r))}yt.baseEncode=ud;function fd(r){return Buffer.from(ku.default.decode(r))}yt.baseDecode=fd;var ra=1024,le=class extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};yt.BorshError=le;var Qs=class{constructor(){this.buf=Buffer.alloc(ra),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(ra)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Lr.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Lr.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Lr.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Lr.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(ra)]),this.length+=t.length}writeString(t){this.maybeResize();let e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(let n of t)this.maybeResize(),e(n)}toArray(){return this.buf.subarray(0,this.length)}};yt.BinaryWriter=Qs;function er(r,t,e){let n=e.value;e.value=function(...s){try{return n.apply(this,s)}catch(i){if(i instanceof RangeError){let o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new le("Reached the end of buffer when deserializing")}throw i}}}var Ie=class{constructor(t){this.buf=t,this.offset=0}readU8(){let t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){let t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){let t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){let t=this.readBuffer(8);return new Lr.default(t,"le")}readU128(){let t=this.readBuffer(16);return new Lr.default(t,"le")}readU256(){let t=this.readBuffer(32);return new Lr.default(t,"le")}readU512(){let t=this.readBuffer(64);return new Lr.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new le(`Expected buffer length ${t} isn't within bounds`);let e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){let t=this.readU32(),e=this.readBuffer(t);try{return cd.decode(e)}catch(n){throw new le(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){let e=this.readU32(),n=Array();for(let s=0;s<e;++s)n.push(t());return n}};tr([er],Ie.prototype,"readU8",null);tr([er],Ie.prototype,"readU16",null);tr([er],Ie.prototype,"readU32",null);tr([er],Ie.prototype,"readU64",null);tr([er],Ie.prototype,"readU128",null);tr([er],Ie.prototype,"readU256",null);tr([er],Ie.prototype,"readU512",null);tr([er],Ie.prototype,"readString",null);tr([er],Ie.prototype,"readFixedArray",null);tr([er],Ie.prototype,"readArray",null);yt.BinaryReader=Ie;function Su(r){return r.charAt(0).toUpperCase()+r.slice(1)}function jr(r,t,e,n,s){try{if(typeof n=="string")s[`write${Su(n)}`](e);else if(n instanceof Array)if(typeof n[0]=="number"){if(e.length!==n[0])throw new le(`Expecting byte array of length ${n[0]}, but got ${e.length} bytes`);s.writeFixedArray(e)}else if(n.length===2&&typeof n[1]=="number"){if(e.length!==n[1])throw new le(`Expecting byte array of length ${n[1]}, but got ${e.length} bytes`);for(let i=0;i<n[1];i++)jr(r,null,e[i],n[0],s)}else s.writeArray(e,i=>{jr(r,t,i,n[0],s)});else if(n.kind!==void 0)switch(n.kind){case"option":{e==null?s.writeU8(0):(s.writeU8(1),jr(r,t,e,n.type,s));break}case"map":{s.writeU32(e.size),e.forEach((i,o)=>{jr(r,t,o,n.key,s),jr(r,t,i,n.value,s)});break}default:throw new le(`FieldType ${n} unrecognized`)}else Bu(r,e,s)}catch(i){throw i instanceof le&&i.addToFieldPath(t),i}}function Bu(r,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}let n=r.get(t.constructor);if(!n)throw new le(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([s,i])=>{jr(r,s,t[s],i,e)});else if(n.kind==="enum"){let s=t[n.field];for(let i=0;i<n.values.length;++i){let[o,h]=n.values[i];if(o===s){e.writeU8(i),jr(r,o,t[o],h,e);break}}}else throw new le(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function ld(r,t,e=Qs){let n=new e;return Bu(r,t,n),n.toArray()}yt.serialize=ld;function Gr(r,t,e,n){try{if(typeof e=="string")return n[`read${Su(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return n.readFixedArray(e[0]);if(typeof e[1]=="number"){let s=[];for(let i=0;i<e[1];i++)s.push(Gr(r,null,e[0],n));return s}else return n.readArray(()=>Gr(r,t,e[0],n))}if(e.kind==="option")return n.readU8()?Gr(r,t,e.type,n):void 0;if(e.kind==="map"){let s=new Map,i=n.readU32();for(let o=0;o<i;o++){let h=Gr(r,t,e.key,n),f=Gr(r,t,e.value,n);s.set(h,f)}return s}return na(r,e,n)}catch(s){throw s instanceof le&&s.addToFieldPath(t),s}}function na(r,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);let n=r.get(t);if(!n)throw new le(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){let s={};for(let[i,o]of r.get(t).fields)s[i]=Gr(r,i,o,e);return new t(s)}if(n.kind==="enum"){let s=e.readU8();if(s>=n.values.length)throw new le(`Enum index: ${s} is out of range`);let[i,o]=n.values[s],h=Gr(r,i,o,e);return new t({[i]:h})}throw new le(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function hd(r,t,e,n=Ie){let s=new n(e),i=na(r,t,s);if(s.offset<e.length)throw new le(`Unexpected ${e.length-s.offset} bytes after deserialized data`);return i}yt.deserialize=hd;function dd(r,t,e,n=Ie){let s=new n(e);return na(r,t,s)}yt.deserializeUnchecked=dd});var aa=pe(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.s16=A.s8=A.nu64be=A.u48be=A.u40be=A.u32be=A.u24be=A.u16be=A.nu64=A.u48=A.u40=A.u32=A.u24=A.u16=A.u8=A.offset=A.greedy=A.Constant=A.UTF8=A.CString=A.Blob=A.Boolean=A.BitField=A.BitStructure=A.VariantLayout=A.Union=A.UnionLayoutDiscriminator=A.UnionDiscriminator=A.Structure=A.Sequence=A.DoubleBE=A.Double=A.FloatBE=A.Float=A.NearInt64BE=A.NearInt64=A.NearUInt64BE=A.NearUInt64=A.IntBE=A.Int=A.UIntBE=A.UInt=A.OffsetLayout=A.GreedyCount=A.ExternalLayout=A.bindConstructorLayout=A.nameWithProperty=A.Layout=A.uint8ArrayToBuffer=A.checkUint8Array=void 0;A.constant=A.utf8=A.cstr=A.blob=A.unionLayoutDiscriminator=A.union=A.seq=A.bits=A.struct=A.f64be=A.f64=A.f32be=A.f32=A.ns64be=A.s48be=A.s40be=A.s32be=A.s24be=A.s16be=A.ns64=A.s48=A.s40=A.s32=A.s24=void 0;var ia=Fn();function bn(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}A.checkUint8Array=bn;function ct(r){return bn(r),ia.Buffer.from(r.buffer,r.byteOffset,r.length)}A.uint8ArrayToBuffer=ct;var lt=class{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){let e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}};A.Layout=lt;function oa(r,t){return t.property?r+"["+t.property+"]":r}A.nameWithProperty=oa;function pd(r,t){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof lt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=t,t.boundConstructor_=r,t.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(r,"decode",{value(e,n){return t.decode(e,n)},writable:!0})}A.bindConstructorLayout=pd;var ge=class extends lt{isCount(){throw new Error("ExternalLayout is abstract")}};A.ExternalLayout=ge;var ti=class extends ge{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){bn(t);let n=t.length-e;return Math.floor(n/this.elementSpan)}encode(t,e,n){return 0}};A.GreedyCount=ti;var Dn=class extends ge{constructor(t,e=0,n){if(!(t instanceof lt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Me||this.layout instanceof Oe}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,n=0){return this.layout.encode(t,e,n+this.offset)}};A.OffsetLayout=Dn;var Me=class extends lt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ct(t).readUIntLE(e,this.span)}encode(t,e,n=0){return ct(e).writeUIntLE(t,n,this.span),this.span}};A.UInt=Me;var Oe=class extends lt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ct(t).readUIntBE(e,this.span)}encode(t,e,n=0){return ct(e).writeUIntBE(t,n,this.span),this.span}};A.UIntBE=Oe;var lr=class extends lt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ct(t).readIntLE(e,this.span)}encode(t,e,n=0){return ct(e).writeIntLE(t,n,this.span),this.span}};A.Int=lr;var Rr=class extends lt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ct(t).readIntBE(e,this.span)}encode(t,e,n=0){return ct(e).writeIntBE(t,n,this.span),this.span}};A.IntBE=Rr;var sa=Math.pow(2,32);function mi(r){let t=Math.floor(r/sa),e=r-t*sa;return{hi32:t,lo32:e}}function wi(r,t){return r*sa+t}var ei=class extends lt{constructor(t){super(8,t)}decode(t,e=0){let n=ct(t),s=n.readUInt32LE(e),i=n.readUInt32LE(e+4);return wi(i,s)}encode(t,e,n=0){let s=mi(t),i=ct(e);return i.writeUInt32LE(s.lo32,n),i.writeUInt32LE(s.hi32,n+4),8}};A.NearUInt64=ei;var ri=class extends lt{constructor(t){super(8,t)}decode(t,e=0){let n=ct(t),s=n.readUInt32BE(e),i=n.readUInt32BE(e+4);return wi(s,i)}encode(t,e,n=0){let s=mi(t),i=ct(e);return i.writeUInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}};A.NearUInt64BE=ri;var ni=class extends lt{constructor(t){super(8,t)}decode(t,e=0){let n=ct(t),s=n.readUInt32LE(e),i=n.readInt32LE(e+4);return wi(i,s)}encode(t,e,n=0){let s=mi(t),i=ct(e);return i.writeUInt32LE(s.lo32,n),i.writeInt32LE(s.hi32,n+4),8}};A.NearInt64=ni;var si=class extends lt{constructor(t){super(8,t)}decode(t,e=0){let n=ct(t),s=n.readInt32BE(e),i=n.readUInt32BE(e+4);return wi(s,i)}encode(t,e,n=0){let s=mi(t),i=ct(e);return i.writeInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}};A.NearInt64BE=si;var ii=class extends lt{constructor(t){super(4,t)}decode(t,e=0){return ct(t).readFloatLE(e)}encode(t,e,n=0){return ct(e).writeFloatLE(t,n),4}};A.Float=ii;var oi=class extends lt{constructor(t){super(4,t)}decode(t,e=0){return ct(t).readFloatBE(e)}encode(t,e,n=0){return ct(e).writeFloatBE(t,n),4}};A.FloatBE=oi;var ai=class extends lt{constructor(t){super(8,t)}decode(t,e=0){return ct(t).readDoubleLE(e)}encode(t,e,n=0){return ct(e).writeDoubleLE(t,n),8}};A.Double=ai;var ci=class extends lt{constructor(t){super(8,t)}decode(t,e=0){return ct(t).readDoubleBE(e)}encode(t,e,n=0){return ct(e).writeDoubleBE(t,n),8}};A.DoubleBE=ci;var ui=class extends lt{constructor(t,e,n){if(!(t instanceof lt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof ge&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof ge)&&0<t.span&&(s=e*t.span),super(s,n),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0,s=this.count;if(s instanceof ge&&(s=s.decode(t,e)),0<this.elementLayout.span)n=s*this.elementLayout.span;else{let i=0;for(;i<s;)n+=this.elementLayout.getSpan(t,e+n),++i}return n}decode(t,e=0){let n=[],s=0,i=this.count;for(i instanceof ge&&(i=i.decode(t,e));s<i;)n.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),s+=1;return n}encode(t,e,n=0){let s=this.elementLayout,i=t.reduce((o,h)=>o+s.encode(h,e,n+o),0);return this.count instanceof ge&&this.count.encode(t.length,e,n),i}};A.Sequence=ui;var fi=class extends lt{constructor(t,e,n){if(!(Array.isArray(t)&&t.reduce((i,o)=>i&&o instanceof lt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&n===void 0&&(n=e,e=void 0);for(let i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((s,i)=>{let o=i.getSpan(t,e);return e+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,e=0){bn(t);let n=this.makeDestinationObject();for(let s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n=0){let s=n,i=0,o=0;for(let h of this.fields){let f=h.span;if(o=0<f?f:0,h.property!==void 0){let b=t[h.property];b!==void 0&&(o=h.encode(b,e,n),0>f&&(f=h.getSpan(e,n)))}i=n,n+=f}return i+o-s}fromArray(t){let e=this.makeDestinationObject();for(let n of this.fields)n.property!==void 0&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(let n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}};A.Structure=fi;var Kn=class{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,n){throw new Error("UnionDiscriminator is abstract")}};A.UnionDiscriminator=Kn;var wn=class extends Kn{constructor(t,e){if(!(t instanceof ge&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}};A.UnionLayoutDiscriminator=wn;var Hn=class extends lt{constructor(t,e,n){let s;if(t instanceof Me||t instanceof Oe)s=new wn(new Dn(t));else if(t instanceof ge&&t.isCount())s=new wn(t);else if(t instanceof Kn)s=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof lt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof Me||t instanceof Oe)&&(i+=s.layout.span)),super(i,n),this.discriminator=s,this.usesPrefixDiscriminator=t instanceof Me||t instanceof Oe,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(h){return o(h)},this.configGetSourceVariant=function(h){o=h.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;let n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;let e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(let e in this.registry){let n=this.registry[e];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,e=0){let n,s=this.discriminator,i=s.decode(t,e),o=this.registry[i];if(o===void 0){let h=this.defaultLayout,f=0;this.usesPrefixDiscriminator&&(f=s.layout.span),n=this.makeDestinationObject(),n[s.property]=i,n[h.property]=h.decode(t,e+f)}else n=o.decode(t,e);return n}encode(t,e,n=0){let s=this.getSourceVariant(t);if(s===void 0){let i=this.discriminator,o=this.defaultLayout,h=0;return this.usesPrefixDiscriminator&&(h=i.layout.span),i.encode(t[i.property],e,n),h+o.encode(t[o.property],e,n+h)}return s.encode(t,e,n)}addVariant(t,e,n){let s=new li(this,t,e,n);return this.registry[t]=s,s}getVariant(t,e=0){let n;return t instanceof Uint8Array?n=this.discriminator.decode(t,e):n=t,this.registry[n]}};A.Union=Hn;var li=class extends lt{constructor(t,e,n,s){if(!(t instanceof Hn))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof lt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=n?n.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(t,e+n)),n+s}decode(t,e=0){let n=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,n+s),i+=this.layout.getSpan(e,n+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}};A.VariantLayout=li;function mn(r){return 0>r&&(r+=4294967296),r}var Vn=class extends lt{constructor(t,e,n){if(!(t instanceof Me||t instanceof Oe))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&n===void 0&&(n=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(i){return s=mn(i),this},this._packedGetValue=function(){return s}}decode(t,e=0){let n=this.makeDestinationObject(),s=this.word.decode(t,e);this._packedSetValue(s);for(let i of this.fields)i.property!==void 0&&(n[i.property]=i.decode(t));return n}encode(t,e,n=0){let s=this.word.decode(e,n);this._packedSetValue(s);for(let i of this.fields)if(i.property!==void 0){let o=t[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),e,n)}addField(t,e){let n=new $n(this,t,e);return this.fields.push(n),n}addBoolean(t){let e=new hi(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let e of this.fields)if(e.property===t)return e}};A.BitStructure=Vn;var $n=class{constructor(t,e,n){if(!(t instanceof Vn))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");let s=8*t.span,i=t.fields.reduce((o,h)=>o+h.bits,0);if(e+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-e),this.wordMask=mn(this.valueMask<<this.start),this.property=n}decode(t,e){let n=this.container._packedGetValue();return mn(n&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==mn(t&this.valueMask))throw new TypeError(oa("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let e=this.container._packedGetValue(),n=mn(t<<this.start);this.container._packedSetValue(mn(e&~this.wordMask)|n)}};A.BitField=$n;var hi=class extends $n{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};A.Boolean=hi;var di=class extends lt{constructor(t,e){if(!(t instanceof ge&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof ge||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e=0){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),ct(t).slice(e,e+n)}encode(t,e,n){let s=this.length;if(this.length instanceof ge&&(s=t.length),!(t instanceof Uint8Array&&s===t.length))throw new TypeError(oa("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(n+s>e.length)throw new RangeError("encoding overruns Uint8Array");let i=ct(t);return ct(e).write(i.toString("hex"),n,s,"hex"),this.length instanceof ge&&this.length.encode(s,e,n),s}};A.Blob=di;var pi=class extends lt{constructor(t){super(-1,t)}getSpan(t,e=0){bn(t);let n=e;for(;n<t.length&&t[n]!==0;)n+=1;return 1+n-e}decode(t,e=0){let n=this.getSpan(t,e);return ct(t).slice(e,e+n-1).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));let s=ia.Buffer.from(t,"utf8"),i=s.length;if(n+i>e.length)throw new RangeError("encoding overruns Buffer");let o=ct(e);return s.copy(o,n),o[n+i]=0,i+1}};A.CString=pi;var yi=class extends lt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return bn(t),t.length-e}decode(t,e=0){let n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return ct(t).slice(e,e+n).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));let s=ia.Buffer.from(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(ct(e),n),i}};A.UTF8=yi;var gi=class extends lt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,n){return 0}};A.Constant=gi;A.greedy=(r,t)=>new ti(r,t);A.offset=(r,t,e)=>new Dn(r,t,e);A.u8=r=>new Me(1,r);A.u16=r=>new Me(2,r);A.u24=r=>new Me(3,r);A.u32=r=>new Me(4,r);A.u40=r=>new Me(5,r);A.u48=r=>new Me(6,r);A.nu64=r=>new ei(r);A.u16be=r=>new Oe(2,r);A.u24be=r=>new Oe(3,r);A.u32be=r=>new Oe(4,r);A.u40be=r=>new Oe(5,r);A.u48be=r=>new Oe(6,r);A.nu64be=r=>new ri(r);A.s8=r=>new lr(1,r);A.s16=r=>new lr(2,r);A.s24=r=>new lr(3,r);A.s32=r=>new lr(4,r);A.s40=r=>new lr(5,r);A.s48=r=>new lr(6,r);A.ns64=r=>new ni(r);A.s16be=r=>new Rr(2,r);A.s24be=r=>new Rr(3,r);A.s32be=r=>new Rr(4,r);A.s40be=r=>new Rr(5,r);A.s48be=r=>new Rr(6,r);A.ns64be=r=>new si(r);A.f32=r=>new ii(r);A.f32be=r=>new oi(r);A.f64=r=>new ai(r);A.f64be=r=>new ci(r);A.struct=(r,t,e)=>new fi(r,t,e);A.bits=(r,t,e)=>new Vn(r,t,e);A.seq=(r,t,e)=>new ui(r,t,e);A.union=(r,t,e)=>new Hn(r,t,e);A.unionLayoutDiscriminator=(r,t)=>new wn(r,t);A.blob=(r,t)=>new di(r,t);A.cstr=r=>new pi(r);A.utf8=(r,t)=>new yi(r,t);A.constant=(r,t)=>new gi(r,t)});var Iu=pe(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});var bi;function yd(r){{let t=Buffer.from(r);t.reverse();let e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}return bi.toBigInt(r,!1)}xn.toBigIntLE=yd;function gd(r){{let t=r.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}return bi.toBigInt(r,!0)}xn.toBigIntBE=gd;function md(r,t){{let e=r.toString(16),n=Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return n.reverse(),n}return bi.fromBigInt(r,Buffer.allocUnsafe(t),!1)}xn.toBufferLE=md;function wd(r,t){{let e=r.toString(16);return Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}return bi.fromBigInt(r,Buffer.allocUnsafe(t),!0)}xn.toBufferBE=wd});function Zn(){if(!Si&&(Si=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Si))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Si(Bd)}var Si,Bd,la=Be(()=>{Bd=new Uint8Array(16)});var Tu,Mu=Be(()=>{Tu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Ed(r){return typeof r=="string"&&Tu.test(r)}var Tr,Yn=Be(()=>{Mu();Tr=Ed});function Id(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(he[r[t+0]]+he[r[t+1]]+he[r[t+2]]+he[r[t+3]]+"-"+he[r[t+4]]+he[r[t+5]]+"-"+he[r[t+6]]+he[r[t+7]]+"-"+he[r[t+8]]+he[r[t+9]]+"-"+he[r[t+10]]+he[r[t+11]]+he[r[t+12]]+he[r[t+13]]+he[r[t+14]]+he[r[t+15]]).toLowerCase();if(!Tr(e))throw TypeError("Stringified UUID is invalid");return e}var he,Bi,Mr,Jn=Be(()=>{Yn();he=[];for(Bi=0;Bi<256;++Bi)he.push((Bi+256).toString(16).substr(1));Mr=Id});function _d(r,t,e){var n=t&&e||0,s=t||new Array(16);r=r||{};var i=r.node||Pu,o=r.clockseq!==void 0?r.clockseq:ha;if(i==null||o==null){var h=r.random||(r.rng||Zn)();i==null&&(i=Pu=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]),o==null&&(o=ha=(h[6]<<8|h[7])&16383)}var f=r.msecs!==void 0?r.msecs:Date.now(),b=r.nsecs!==void 0?r.nsecs:pa+1,w=f-da+(b-pa)/1e4;if(w<0&&r.clockseq===void 0&&(o=o+1&16383),(w<0||f>da)&&r.nsecs===void 0&&(b=0),b>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");da=f,pa=b,ha=o,f+=122192928e5;var k=((f&268435455)*1e4+b)%4294967296;s[n++]=k>>>24&255,s[n++]=k>>>16&255,s[n++]=k>>>8&255,s[n++]=k&255;var I=f/4294967296*1e4&268435455;s[n++]=I>>>8&255,s[n++]=I&255,s[n++]=I>>>24&15|16,s[n++]=I>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var B=0;B<6;++B)s[n+B]=i[B];return t||Mr(s)}var Pu,ha,da,pa,Cu,Ou=Be(()=>{la();Jn();da=0,pa=0;Cu=_d});function Ad(r){if(!Tr(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}var Ei,ya=Be(()=>{Yn();Ei=Ad});function Ld(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}function Ii(r,t,e){function n(s,i,o,h){if(typeof s=="string"&&(s=Ld(s)),typeof i=="string"&&(i=Ei(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var f=new Uint8Array(16+s.length);if(f.set(i),f.set(s,i.length),f=e(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,o){h=h||0;for(var b=0;b<16;++b)o[h+b]=f[b];return o}return Mr(f)}try{n.name=r}catch{}return n.DNS=Rd,n.URL=Td,n}var Rd,Td,ga=Be(()=>{Jn();ya();Rd="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Td="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Md(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return Pd(Cd(Od(r),r.length*8))}function Pd(r){for(var t=[],e=r.length*32,n="0123456789abcdef",s=0;s<e;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);t.push(o)}return t}function Nu(r){return(r+64>>>9<<4)+14+1}function Cd(r,t){r[t>>5]|=128<<t%32,r[Nu(t)-1]=t;for(var e=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var h=e,f=n,b=s,w=i;e=we(e,n,s,i,r[o],7,-680876936),i=we(i,e,n,s,r[o+1],12,-389564586),s=we(s,i,e,n,r[o+2],17,606105819),n=we(n,s,i,e,r[o+3],22,-1044525330),e=we(e,n,s,i,r[o+4],7,-176418897),i=we(i,e,n,s,r[o+5],12,1200080426),s=we(s,i,e,n,r[o+6],17,-1473231341),n=we(n,s,i,e,r[o+7],22,-45705983),e=we(e,n,s,i,r[o+8],7,1770035416),i=we(i,e,n,s,r[o+9],12,-1958414417),s=we(s,i,e,n,r[o+10],17,-42063),n=we(n,s,i,e,r[o+11],22,-1990404162),e=we(e,n,s,i,r[o+12],7,1804603682),i=we(i,e,n,s,r[o+13],12,-40341101),s=we(s,i,e,n,r[o+14],17,-1502002290),n=we(n,s,i,e,r[o+15],22,1236535329),e=be(e,n,s,i,r[o+1],5,-165796510),i=be(i,e,n,s,r[o+6],9,-1069501632),s=be(s,i,e,n,r[o+11],14,643717713),n=be(n,s,i,e,r[o],20,-373897302),e=be(e,n,s,i,r[o+5],5,-701558691),i=be(i,e,n,s,r[o+10],9,38016083),s=be(s,i,e,n,r[o+15],14,-660478335),n=be(n,s,i,e,r[o+4],20,-405537848),e=be(e,n,s,i,r[o+9],5,568446438),i=be(i,e,n,s,r[o+14],9,-1019803690),s=be(s,i,e,n,r[o+3],14,-187363961),n=be(n,s,i,e,r[o+8],20,1163531501),e=be(e,n,s,i,r[o+13],5,-1444681467),i=be(i,e,n,s,r[o+2],9,-51403784),s=be(s,i,e,n,r[o+7],14,1735328473),n=be(n,s,i,e,r[o+12],20,-1926607734),e=xe(e,n,s,i,r[o+5],4,-378558),i=xe(i,e,n,s,r[o+8],11,-2022574463),s=xe(s,i,e,n,r[o+11],16,1839030562),n=xe(n,s,i,e,r[o+14],23,-35309556),e=xe(e,n,s,i,r[o+1],4,-1530992060),i=xe(i,e,n,s,r[o+4],11,1272893353),s=xe(s,i,e,n,r[o+7],16,-155497632),n=xe(n,s,i,e,r[o+10],23,-1094730640),e=xe(e,n,s,i,r[o+13],4,681279174),i=xe(i,e,n,s,r[o],11,-358537222),s=xe(s,i,e,n,r[o+3],16,-722521979),n=xe(n,s,i,e,r[o+6],23,76029189),e=xe(e,n,s,i,r[o+9],4,-640364487),i=xe(i,e,n,s,r[o+12],11,-421815835),s=xe(s,i,e,n,r[o+15],16,530742520),n=xe(n,s,i,e,r[o+2],23,-995338651),e=ve(e,n,s,i,r[o],6,-198630844),i=ve(i,e,n,s,r[o+7],10,1126891415),s=ve(s,i,e,n,r[o+14],15,-1416354905),n=ve(n,s,i,e,r[o+5],21,-57434055),e=ve(e,n,s,i,r[o+12],6,1700485571),i=ve(i,e,n,s,r[o+3],10,-1894986606),s=ve(s,i,e,n,r[o+10],15,-1051523),n=ve(n,s,i,e,r[o+1],21,-2054922799),e=ve(e,n,s,i,r[o+8],6,1873313359),i=ve(i,e,n,s,r[o+15],10,-30611744),s=ve(s,i,e,n,r[o+6],15,-1560198380),n=ve(n,s,i,e,r[o+13],21,1309151649),e=ve(e,n,s,i,r[o+4],6,-145523070),i=ve(i,e,n,s,r[o+11],10,-1120210379),s=ve(s,i,e,n,r[o+2],15,718787259),n=ve(n,s,i,e,r[o+9],21,-343485551),e=Pr(e,h),n=Pr(n,f),s=Pr(s,b),i=Pr(i,w)}return[e,n,s,i]}function Od(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(Nu(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function Pr(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function Nd(r,t){return r<<t|r>>>32-t}function _i(r,t,e,n,s,i){return Pr(Nd(Pr(Pr(t,r),Pr(n,i)),s),e)}function we(r,t,e,n,s,i,o){return _i(t&e|~t&n,r,t,s,i,o)}function be(r,t,e,n,s,i,o){return _i(t&n|e&~n,r,t,s,i,o)}function xe(r,t,e,n,s,i,o){return _i(t^e^n,r,t,s,i,o)}function ve(r,t,e,n,s,i,o){return _i(e^(t|~n),r,t,s,i,o)}var Uu,zu=Be(()=>{Uu=Md});var Ud,Wu,Fu=Be(()=>{ga();zu();Ud=Ii("v3",48,Uu),Wu=Ud});function zd(r,t,e){r=r||{};var n=r.random||(r.rng||Zn)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=n[s];return t}return Mr(n)}var qu,Du=Be(()=>{la();Jn();qu=zd});function Wd(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function ma(r,t){return r<<t|r>>>32-t}function Fd(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),h=new Array(o),f=0;f<o;++f){for(var b=new Uint32Array(16),w=0;w<16;++w)b[w]=r[f*64+w*4]<<24|r[f*64+w*4+1]<<16|r[f*64+w*4+2]<<8|r[f*64+w*4+3];h[f]=b}h[o-1][14]=(r.length-1)*8/Math.pow(2,32),h[o-1][14]=Math.floor(h[o-1][14]),h[o-1][15]=(r.length-1)*8&4294967295;for(var k=0;k<o;++k){for(var I=new Uint32Array(80),B=0;B<16;++B)I[B]=h[k][B];for(var O=16;O<80;++O)I[O]=ma(I[O-3]^I[O-8]^I[O-14]^I[O-16],1);for(var L=e[0],E=e[1],M=e[2],U=e[3],T=e[4],F=0;F<80;++F){var Z=Math.floor(F/20),q=ma(L,5)+Wd(Z,E,M,U)+T+t[Z]+I[F]>>>0;T=U,U=M,M=ma(E,30)>>>0,E=L,L=q}e[0]=e[0]+L>>>0,e[1]=e[1]+E>>>0,e[2]=e[2]+M>>>0,e[3]=e[3]+U>>>0,e[4]=e[4]+T>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Ku,Hu=Be(()=>{Ku=Fd});var qd,Vu,$u=Be(()=>{ga();Hu();qd=Ii("v5",80,Ku),Vu=qd});var ju,Gu=Be(()=>{ju="00000000-0000-0000-0000-000000000000"});function Dd(r){if(!Tr(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}var Zu,Yu=Be(()=>{Yn();Zu=Dd});var wa={};fc(wa,{NIL:()=>ju,parse:()=>Ei,stringify:()=>Mr,v1:()=>Cu,v3:()=>Wu,v4:()=>qu,v5:()=>Vu,validate:()=>Tr,version:()=>Zu});var ba=Be(()=>{Ou();Fu();Du();$u();Gu();Yu();Yn();Jn();ya()});var Xu=pe((sg,Ju)=>{"use strict";var Kd=(ba(),hc(wa)).v4,Hd=function(r,t,e,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};let s=typeof n.version=="number"?n.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");let i={method:r};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){let o=typeof n.generator=="function"?n.generator:function(){return Kd()};i.id=o(i,n)}else s===2&&e===null?n.notificationIdNull&&(i.id=null):i.id=e;return i};Ju.exports=Hd});var tf=pe((ig,Qu)=>{"use strict";var Vd=(ba(),hc(wa)).v4,$d=Xu(),Xn=function(r,t){if(!(this instanceof Xn))return new Xn(r,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return Vd()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=r};Qu.exports=Xn;Xn.prototype.request=function(r,t,e,n){let s=this,i=null,o=Array.isArray(r)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&r&&typeof r=="object"&&typeof t=="function")n=t,i=r;else{typeof e=="function"&&(n=e,e=void 0);let b=typeof n=="function";try{i=$d(r,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(w){if(b)return n(w);throw w}if(!b)return i}let f;try{f=JSON.stringify(i,this.options.replacer)}catch(b){return n(b)}return this.callServer(f,function(b,w){s._parseResponse(b,w,n)}),i};Xn.prototype._parseResponse=function(r,t,e){if(r){e(r);return}if(!t)return e();let n;try{n=JSON.parse(t,this.options.reviver)}catch(s){return e(s)}if(e.length===3)if(Array.isArray(n)){let s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return e(null,n.filter(s),n.filter(i))}else return e(null,n.error,n.result);e(null,n)}});var rf=pe((og,xa)=>{"use strict";var jd=Object.prototype.hasOwnProperty,_e="~";function Qn(){}Object.create&&(Qn.prototype=Object.create(null),new Qn().__proto__||(_e=!1));function Gd(r,t,e){this.fn=r,this.context=t,this.once=e||!1}function ef(r,t,e,n,s){if(typeof e!="function")throw new TypeError("The listener must be a function");var i=new Gd(e,n||r,s),o=_e?_e+t:t;return r._events[o]?r._events[o].fn?r._events[o]=[r._events[o],i]:r._events[o].push(i):(r._events[o]=i,r._eventsCount++),r}function Ai(r,t){--r._eventsCount===0?r._events=new Qn:delete r._events[t]}function ke(){this._events=new Qn,this._eventsCount=0}ke.prototype.eventNames=function(){var t=[],e,n;if(this._eventsCount===0)return t;for(n in e=this._events)jd.call(e,n)&&t.push(_e?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};ke.prototype.listeners=function(t){var e=_e?_e+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,i=n.length,o=new Array(i);s<i;s++)o[s]=n[s].fn;return o};ke.prototype.listenerCount=function(t){var e=_e?_e+t:t,n=this._events[e];return n?n.fn?1:n.length:0};ke.prototype.emit=function(t,e,n,s,i,o){var h=_e?_e+t:t;if(!this._events[h])return!1;var f=this._events[h],b=arguments.length,w,k;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),b){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,n),!0;case 4:return f.fn.call(f.context,e,n,s),!0;case 5:return f.fn.call(f.context,e,n,s,i),!0;case 6:return f.fn.call(f.context,e,n,s,i,o),!0}for(k=1,w=new Array(b-1);k<b;k++)w[k-1]=arguments[k];f.fn.apply(f.context,w)}else{var I=f.length,B;for(k=0;k<I;k++)switch(f[k].once&&this.removeListener(t,f[k].fn,void 0,!0),b){case 1:f[k].fn.call(f[k].context);break;case 2:f[k].fn.call(f[k].context,e);break;case 3:f[k].fn.call(f[k].context,e,n);break;case 4:f[k].fn.call(f[k].context,e,n,s);break;default:if(!w)for(B=1,w=new Array(b-1);B<b;B++)w[B-1]=arguments[B];f[k].fn.apply(f[k].context,w)}}return!0};ke.prototype.on=function(t,e,n){return ef(this,t,e,n,!1)};ke.prototype.once=function(t,e,n){return ef(this,t,e,n,!0)};ke.prototype.removeListener=function(t,e,n,s){var i=_e?_e+t:t;if(!this._events[i])return this;if(!e)return Ai(this,i),this;var o=this._events[i];if(o.fn)o.fn===e&&(!s||o.once)&&(!n||o.context===n)&&Ai(this,i);else{for(var h=0,f=[],b=o.length;h<b;h++)(o[h].fn!==e||s&&!o[h].once||n&&o[h].context!==n)&&f.push(o[h]);f.length?this._events[i]=f.length===1?f[0]:f:Ai(this,i)}return this};ke.prototype.removeAllListeners=function(t){var e;return t?(e=_e?_e+t:t,this._events[e]&&Ai(this,e)):(this._events=new Qn,this._eventsCount=0),this};ke.prototype.off=ke.prototype.removeListener;ke.prototype.addListener=ke.prototype.on;ke.prefixed=_e;ke.EventEmitter=ke;typeof xa<"u"&&(xa.exports=ke)});var rl=function(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)},nl=function(r,t,e,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!s:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,e):s?s.value=e:t.set(r,e),e},gs,Ln,ms=new Set;function sl(r){Rn=void 0,ms.add(r)}function il(r){Rn=void 0,ms.delete(r)}var sn={};function yc(){if(Ln||(Ln=Object.freeze({register:dc,get:ol,on:al}),typeof window>"u"))return Ln;let r=Object.freeze({register:dc});try{window.addEventListener("wallet-standard:register-wallet",({detail:t})=>t(r))}catch(t){console.error(`wallet-standard:register-wallet event listener could not be added
`,t)}try{window.dispatchEvent(new fo(r))}catch(t){console.error(`wallet-standard:app-ready event could not be dispatched
`,t)}return Ln}function dc(...r){return r=r.filter(t=>!ms.has(t)),r.length?(r.forEach(t=>sl(t)),sn.register?.forEach(t=>pc(()=>t(...r))),function(){r.forEach(e=>il(e)),sn.unregister?.forEach(e=>pc(()=>e(...r)))}):()=>{}}var Rn;function ol(){return Rn||(Rn=[...ms]),Rn}function al(r,t){return sn[r]?.push(t)||(sn[r]=[t]),function(){sn[r]=sn[r]?.filter(n=>t!==n)}}function pc(r){try{r()}catch(t){console.error(t)}}var fo=class extends Event{get detail(){return rl(this,gs,"f")}get type(){return"wallet-standard:app-ready"}constructor(t){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),gs.set(this,void 0),nl(this,gs,t,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}};gs=new WeakMap;var ws="standard:connect";var lo="standard:disconnect";var bs="standard:events";var cl,ul,fl,ll,hl,dl;cl=new WeakMap,ul=new WeakMap,fl=new WeakMap,ll=new WeakMap,hl=new WeakMap,dl=new WeakMap;function gc(r,t){if(r===t)return!0;let e=r.length;if(e!==t.length)return!1;for(let n=0;n<e;n++)if(r[n]!==t[n])return!1;return!0}var bc=We(wc(),1);var fe=class extends Error{constructor(t,e){super(t),this.error=e}},vs=class extends fe{constructor(){super(...arguments),this.name="WalletNotReadyError"}};var gr=class extends fe{constructor(){super(...arguments),this.name="WalletConfigError"}},ks=class extends fe{constructor(){super(...arguments),this.name="WalletConnectionError"}},Ss=class extends fe{constructor(){super(...arguments),this.name="WalletDisconnectedError"}},Bs=class extends fe{constructor(){super(...arguments),this.name="WalletDisconnectionError"}},rr=class extends fe{constructor(){super(...arguments),this.name="WalletAccountError"}},Es=class extends fe{constructor(){super(...arguments),this.name="WalletPublicKeyError"}};var nr=class extends fe{constructor(){super(...arguments),this.name="WalletNotConnectedError"}},Mn=class extends fe{constructor(){super(...arguments),this.name="WalletSendTransactionError"}},Pn=class extends fe{constructor(){super(...arguments),this.name="WalletSignTransactionError"}},Is=class extends fe{constructor(){super(...arguments),this.name="WalletSignMessageError"}},Cn=class extends fe{constructor(){super(...arguments),this.name="WalletSignInError"}};var on;(function(r){r.Installed="Installed",r.NotDetected="NotDetected",r.Loadable="Loadable",r.Unsupported="Unsupported"})(on||(on={}));var _s=class extends bc.default{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(t,e,n={}){let s=this.publicKey;if(!s)throw new nr;return t.feePayer=t.feePayer||s,t.recentBlockhash=t.recentBlockhash||(await e.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,t}};function an(r){return"version"in r}var Ze="solana:signAndSendTransaction";var As="solana:signIn";var cn="solana:signMessage";var oe="solana:signTransaction";function xc(r){return ws in r.features&&bs in r.features&&(Ze in r.features||oe in r.features)}var po="solana:mainnet",vc="solana:devnet",kc="solana:testnet",Sc="solana:localnet";function Ls(r){switch(r){case"processed":case"confirmed":case"finalized":case void 0:return r;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}var gl="https://api.mainnet-beta.solana.com";function Bc(r){return r.includes(gl)?po:/\bdevnet\b/i.test(r)?vc:/\btestnet\b/i.test(r)?kc:/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?Sc:po}function On(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function ml(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function mr(r,...t){if(!ml(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error("Uint8Array expected of length "+t+", got length="+r.length)}function Ec(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");On(r.outputLen),On(r.blockLen)}function sr(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function Rs(r,t){mr(r);let e=t.outputLen;if(r.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}var Ur=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Ic=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),Ts=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),Ke=(r,t)=>r<<32-t|r>>>t;var yo=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,wl=r=>r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255;function go(r){for(let t=0;t<r.length;t++)r[t]=wl(r[t])}function _c(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function br(r){return typeof r=="string"&&(r=_c(r)),mr(r),r}function mo(...r){let t=0;for(let n=0;n<r.length;n++){let s=r[n];mr(s),t+=s.length}let e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){let i=r[n];e.set(i,s),s+=i.length}return e}var wr=class{clone(){return this._cloneInto()}};function un(r){let t=n=>r().update(br(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function Ac(r){let t=(n,s)=>r(s).update(br(n)).digest(),e=r({});return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=n=>r(n),t}function Ms(r=32){if(Ur&&typeof Ur.getRandomValues=="function")return Ur.getRandomValues(new Uint8Array(r));if(Ur&&typeof Ur.randomBytes=="function")return Ur.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}function bl(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);let s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),h=Number(e&i),f=n?4:0,b=n?0:4;r.setUint32(t+f,o,n),r.setUint32(t+b,h,n)}var Lc=(r,t,e)=>r&t^~r&e,Rc=(r,t,e)=>r&t^r&e^t&e,fn=class extends wr{constructor(t,e,n,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ts(this.buffer)}update(t){sr(this);let{view:e,buffer:n,blockLen:s}=this;t=br(t);let i=t.length;for(let o=0;o<i;){let h=Math.min(s-this.pos,i-o);if(h===s){let f=Ts(t);for(;s<=i-o;o+=s)this.process(f,o);continue}n.set(t.subarray(o,o+h),this.pos),this.pos+=h,o+=h,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){sr(this),Rs(t,this),this.finished=!0;let{buffer:e,view:n,blockLen:s,isLE:i}=this,{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let k=o;k<s;k++)e[k]=0;bl(n,s-8,BigInt(this.length*8),i),this.process(n,0);let h=Ts(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let b=f/4,w=this.get();if(b>w.length)throw new Error("_sha2: outputLen bigger than state");for(let k=0;k<b;k++)h.setUint32(4*k,w[k],i)}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:e,buffer:n,length:s,finished:i,destroyed:o,pos:h}=this;return t.length=s,t.pos=h,t.finished=i,t.destroyed=o,s%e&&t.buffer.set(n),t}};var Ps=BigInt(4294967295),wo=BigInt(32);function Tc(r,t=!1){return t?{h:Number(r&Ps),l:Number(r>>wo&Ps)}:{h:Number(r>>wo&Ps)|0,l:Number(r&Ps)|0}}function bo(r,t=!1){let e=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let s=0;s<r.length;s++){let{h:i,l:o}=Tc(r[s],t);[e[s],n[s]]=[i,o]}return[e,n]}var xl=(r,t)=>BigInt(r>>>0)<<wo|BigInt(t>>>0),vl=(r,t,e)=>r>>>e,kl=(r,t,e)=>r<<32-e|t>>>e,Sl=(r,t,e)=>r>>>e|t<<32-e,Bl=(r,t,e)=>r<<32-e|t>>>e,El=(r,t,e)=>r<<64-e|t>>>e-32,Il=(r,t,e)=>r>>>e-32|t<<64-e,_l=(r,t)=>t,Al=(r,t)=>r,xo=(r,t,e)=>r<<e|t>>>32-e,vo=(r,t,e)=>t<<e|r>>>32-e,ko=(r,t,e)=>t<<e-32|r>>>64-e,So=(r,t,e)=>r<<e-32|t>>>64-e;function Ll(r,t,e,n){let s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}var Rl=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),Tl=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,Ml=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),Pl=(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,Cl=(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),Ol=(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0;var Nl={fromBig:Tc,split:bo,toBig:xl,shrSH:vl,shrSL:kl,rotrSH:Sl,rotrSL:Bl,rotrBH:El,rotrBL:Il,rotr32H:_l,rotr32L:Al,rotlSH:xo,rotlSL:vo,rotlBH:ko,rotlBL:So,add:Ll,add3L:Rl,add3H:Tl,add4L:Ml,add4H:Pl,add5H:Ol,add5L:Cl},st=Nl;var[Ul,zl]=st.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),xr=new Uint32Array(80),vr=new Uint32Array(80),Bo=class extends fn{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:o,Dh:h,Dl:f,Eh:b,El:w,Fh:k,Fl:I,Gh:B,Gl:O,Hh:L,Hl:E}=this;return[t,e,n,s,i,o,h,f,b,w,k,I,B,O,L,E]}set(t,e,n,s,i,o,h,f,b,w,k,I,B,O,L,E){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=h|0,this.Dl=f|0,this.Eh=b|0,this.El=w|0,this.Fh=k|0,this.Fl=I|0,this.Gh=B|0,this.Gl=O|0,this.Hh=L|0,this.Hl=E|0}process(t,e){for(let T=0;T<16;T++,e+=4)xr[T]=t.getUint32(e),vr[T]=t.getUint32(e+=4);for(let T=16;T<80;T++){let F=xr[T-15]|0,Z=vr[T-15]|0,q=st.rotrSH(F,Z,1)^st.rotrSH(F,Z,8)^st.shrSH(F,Z,7),H=st.rotrSL(F,Z,1)^st.rotrSL(F,Z,8)^st.shrSL(F,Z,7),G=xr[T-2]|0,j=vr[T-2]|0,dt=st.rotrSH(G,j,19)^st.rotrBH(G,j,61)^st.shrSH(G,j,6),Y=st.rotrSL(G,j,19)^st.rotrBL(G,j,61)^st.shrSL(G,j,6),et=st.add4L(H,Y,vr[T-7],vr[T-16]),x=st.add4H(et,q,dt,xr[T-7],xr[T-16]);xr[T]=x|0,vr[T]=et|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:h,Cl:f,Dh:b,Dl:w,Eh:k,El:I,Fh:B,Fl:O,Gh:L,Gl:E,Hh:M,Hl:U}=this;for(let T=0;T<80;T++){let F=st.rotrSH(k,I,14)^st.rotrSH(k,I,18)^st.rotrBH(k,I,41),Z=st.rotrSL(k,I,14)^st.rotrSL(k,I,18)^st.rotrBL(k,I,41),q=k&B^~k&L,H=I&O^~I&E,G=st.add5L(U,Z,H,zl[T],vr[T]),j=st.add5H(G,M,F,q,Ul[T],xr[T]),dt=G|0,Y=st.rotrSH(n,s,28)^st.rotrBH(n,s,34)^st.rotrBH(n,s,39),et=st.rotrSL(n,s,28)^st.rotrBL(n,s,34)^st.rotrBL(n,s,39),x=n&i^n&h^i&h,a=s&o^s&f^o&f;M=L|0,U=E|0,L=B|0,E=O|0,B=k|0,O=I|0,{h:k,l:I}=st.add(b|0,w|0,j|0,dt|0),b=h|0,w=f|0,h=i|0,f=o|0,i=n|0,o=s|0;let u=st.add3L(dt,et,a);n=st.add3H(u,j,Y,x),s=u|0}({h:n,l:s}=st.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=st.add(this.Bh|0,this.Bl|0,i|0,o|0),{h,l:f}=st.add(this.Ch|0,this.Cl|0,h|0,f|0),{h:b,l:w}=st.add(this.Dh|0,this.Dl|0,b|0,w|0),{h:k,l:I}=st.add(this.Eh|0,this.El|0,k|0,I|0),{h:B,l:O}=st.add(this.Fh|0,this.Fl|0,B|0,O|0),{h:L,l:E}=st.add(this.Gh|0,this.Gl|0,L|0,E|0),{h:M,l:U}=st.add(this.Hh|0,this.Hl|0,M|0,U|0),this.set(n,s,i,o,h,f,b,w,k,I,B,O,L,E,M,U)}roundClean(){xr.fill(0),vr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var Mc=un(()=>new Bo);var Ns={};fc(Ns,{aInRange:()=>Le,abool:()=>He,abytes:()=>ln,bitGet:()=>Hl,bitLen:()=>Ao,bitMask:()=>Un,bitSet:()=>Vl,bytesToHex:()=>or,bytesToNumberBE:()=>ar,bytesToNumberLE:()=>Sr,concatBytes:()=>cr,createHmacDrbg:()=>Lo,ensureBytes:()=>Tt,equalBytes:()=>Dl,hexToBytes:()=>Wr,hexToNumber:()=>_o,inRange:()=>Nn,isBytes:()=>kr,memoized:()=>qr,notImplemented:()=>jl,numberToBytesBE:()=>Br,numberToBytesLE:()=>Fr,numberToHexUnpadded:()=>zr,numberToVarBytesBE:()=>ql,utf8ToBytes:()=>Kl,validateObject:()=>Ye});var Cs=BigInt(0),Os=BigInt(1),Wl=BigInt(2);function kr(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function ln(r){if(!kr(r))throw new Error("Uint8Array expected")}function He(r,t){if(typeof t!="boolean")throw new Error(r+" boolean expected, got "+t)}var Fl=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function or(r){ln(r);let t="";for(let e=0;e<r.length;e++)t+=Fl[r[e]];return t}function zr(r){let t=r.toString(16);return t.length&1?"0"+t:t}function _o(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Cs:BigInt("0x"+r)}var ir={_0:48,_9:57,A:65,F:70,a:97,f:102};function Pc(r){if(r>=ir._0&&r<=ir._9)return r-ir._0;if(r>=ir.A&&r<=ir.F)return r-(ir.A-10);if(r>=ir.a&&r<=ir.f)return r-(ir.a-10)}function Wr(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);let t=r.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){let o=Pc(r.charCodeAt(i)),h=Pc(r.charCodeAt(i+1));if(o===void 0||h===void 0){let f=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+i)}n[s]=o*16+h}return n}function ar(r){return _o(or(r))}function Sr(r){return ln(r),_o(or(Uint8Array.from(r).reverse()))}function Br(r,t){return Wr(r.toString(16).padStart(t*2,"0"))}function Fr(r,t){return Br(r,t).reverse()}function ql(r){return Wr(zr(r))}function Tt(r,t,e){let n;if(typeof t=="string")try{n=Wr(t)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(kr(t))n=Uint8Array.from(t);else throw new Error(r+" must be hex string or Uint8Array");let s=n.length;if(typeof e=="number"&&s!==e)throw new Error(r+" of length "+e+" expected, got "+s);return n}function cr(...r){let t=0;for(let n=0;n<r.length;n++){let s=r[n];ln(s),t+=s.length}let e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){let i=r[n];e.set(i,s),s+=i.length}return e}function Dl(r,t){if(r.length!==t.length)return!1;let e=0;for(let n=0;n<r.length;n++)e|=r[n]^t[n];return e===0}function Kl(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}var Eo=r=>typeof r=="bigint"&&Cs<=r;function Nn(r,t,e){return Eo(r)&&Eo(t)&&Eo(e)&&t<=r&&r<e}function Le(r,t,e,n){if(!Nn(t,e,n))throw new Error("expected valid "+r+": "+e+" <= n < "+n+", got "+t)}function Ao(r){let t;for(t=0;r>Cs;r>>=Os,t+=1);return t}function Hl(r,t){return r>>BigInt(t)&Os}function Vl(r,t,e){return r|(e?Os:Cs)<<BigInt(t)}var Un=r=>(Wl<<BigInt(r-1))-Os,Io=r=>new Uint8Array(r),Cc=r=>Uint8Array.from(r);function Lo(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let n=Io(r),s=Io(r),i=0,o=()=>{n.fill(1),s.fill(0),i=0},h=(...k)=>e(s,n,...k),f=(k=Io())=>{s=h(Cc([0]),k),n=h(),k.length!==0&&(s=h(Cc([1]),k),n=h())},b=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let k=0,I=[];for(;k<t;){n=h();let B=n.slice();I.push(B),k+=n.length}return cr(...I)};return(k,I)=>{o(),f(k);let B;for(;!(B=I(b()));)f();return o(),B}}var $l={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||kr(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,t)=>t.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Ye(r,t,e={}){let n=(s,i,o)=>{let h=$l[i];if(typeof h!="function")throw new Error("invalid validator function");let f=r[s];if(!(o&&f===void 0)&&!h(f,r))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+f)};for(let[s,i]of Object.entries(t))n(s,i,!1);for(let[s,i]of Object.entries(e))n(s,i,!0);return r}var jl=()=>{throw new Error("not implemented")};function qr(r){let t=new WeakMap;return(e,...n)=>{let s=t.get(e);if(s!==void 0)return s;let i=r(e,...n);return t.set(e,i),i}}var ae=BigInt(0),kt=BigInt(1),Dr=BigInt(2),Gl=BigInt(3),Ro=BigInt(4),Oc=BigInt(5),Nc=BigInt(8),Zl=BigInt(9),Yl=BigInt(16);function pt(r,t){let e=r%t;return e>=ae?e:t+e}function Jl(r,t,e){if(t<ae)throw new Error("invalid exponent, negatives unsupported");if(e<=ae)throw new Error("invalid modulus");if(e===kt)return ae;let n=kt;for(;t>ae;)t&kt&&(n=n*r%e),r=r*r%e,t>>=kt;return n}function St(r,t,e){let n=r;for(;t-- >ae;)n*=n,n%=e;return n}function Us(r,t){if(r===ae)throw new Error("invert: expected non-zero number");if(t<=ae)throw new Error("invert: expected positive modulus, got "+t);let e=pt(r,t),n=t,s=ae,i=kt,o=kt,h=ae;for(;e!==ae;){let b=n/e,w=n%e,k=s-o*b,I=i-h*b;n=e,e=w,s=o,i=h,o=k,h=I}if(n!==kt)throw new Error("invert: does not exist");return pt(s,t)}function Xl(r){let t=(r-kt)/Dr,e,n,s;for(e=r-kt,n=0;e%Dr===ae;e/=Dr,n++);for(s=Dr;s<r&&Jl(s,t,r)!==r-kt;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){let o=(r+kt)/Ro;return function(f,b){let w=f.pow(b,o);if(!f.eql(f.sqr(w),b))throw new Error("Cannot find square root");return w}}let i=(e+kt)/Dr;return function(h,f){if(h.pow(f,t)===h.neg(h.ONE))throw new Error("Cannot find square root");let b=n,w=h.pow(h.mul(h.ONE,s),e),k=h.pow(f,i),I=h.pow(f,e);for(;!h.eql(I,h.ONE);){if(h.eql(I,h.ZERO))return h.ZERO;let B=1;for(let L=h.sqr(I);B<b&&!h.eql(L,h.ONE);B++)L=h.sqr(L);let O=h.pow(w,kt<<BigInt(b-B-1));w=h.sqr(O),k=h.mul(k,O),I=h.mul(I,w),b=B}return k}}function Ql(r){if(r%Ro===Gl){let t=(r+kt)/Ro;return function(n,s){let i=n.pow(s,t);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(r%Nc===Oc){let t=(r-Oc)/Nc;return function(n,s){let i=n.mul(s,Dr),o=n.pow(i,t),h=n.mul(s,o),f=n.mul(n.mul(h,Dr),o),b=n.mul(h,n.sub(f,n.ONE));if(!n.eql(n.sqr(b),s))throw new Error("Cannot find square root");return b}}return r%Yl,Xl(r)}var Uc=(r,t)=>(pt(r,t)&kt)===kt,th=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function To(r){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=th.reduce((n,s)=>(n[s]="function",n),t);return Ye(r,e)}function eh(r,t,e){if(e<ae)throw new Error("invalid exponent, negatives unsupported");if(e===ae)return r.ONE;if(e===kt)return t;let n=r.ONE,s=t;for(;e>ae;)e&kt&&(n=r.mul(n,s)),s=r.sqr(s),e>>=kt;return n}function rh(r,t){let e=new Array(t.length),n=t.reduce((i,o,h)=>r.is0(o)?i:(e[h]=i,r.mul(i,o)),r.ONE),s=r.inv(n);return t.reduceRight((i,o,h)=>r.is0(o)?i:(e[h]=r.mul(i,e[h]),r.mul(i,o)),s),e}function Mo(r,t){let e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function Er(r,t,e=!1,n={}){if(r<=ae)throw new Error("invalid field: expected ORDER > 0, got "+r);let{nBitLength:s,nByteLength:i}=Mo(r,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o,h=Object.freeze({ORDER:r,BITS:s,BYTES:i,MASK:Un(s),ZERO:ae,ONE:kt,create:f=>pt(f,r),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return ae<=f&&f<r},is0:f=>f===ae,isOdd:f=>(f&kt)===kt,neg:f=>pt(-f,r),eql:(f,b)=>f===b,sqr:f=>pt(f*f,r),add:(f,b)=>pt(f+b,r),sub:(f,b)=>pt(f-b,r),mul:(f,b)=>pt(f*b,r),pow:(f,b)=>eh(h,f,b),div:(f,b)=>pt(f*Us(b,r),r),sqrN:f=>f*f,addN:(f,b)=>f+b,subN:(f,b)=>f-b,mulN:(f,b)=>f*b,inv:f=>Us(f,r),sqrt:n.sqrt||(f=>(o||(o=Ql(r)),o(h,f))),invertBatch:f=>rh(h,f),cmov:(f,b,w)=>w?b:f,toBytes:f=>e?Fr(f,i):Br(f,i),fromBytes:f=>{if(f.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+f.length);return e?Sr(f):ar(f)}});return Object.freeze(h)}function zc(r){if(typeof r!="bigint")throw new Error("field order must be bigint");let t=r.toString(2).length;return Math.ceil(t/8)}function Po(r){let t=zc(r);return t+Math.ceil(t/2)}function Wc(r,t,e=!1){let n=r.length,s=zc(t),i=Po(t);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);let o=e?ar(r):Sr(r),h=pt(o,t-kt)+kt;return e?Fr(h,s):Br(h,s)}var Fc=BigInt(0),zs=BigInt(1);function Co(r,t){let e=t.negate();return r?e:t}function qc(r,t){if(!Number.isSafeInteger(r)||r<=0||r>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+r)}function Oo(r,t){qc(r,t);let e=Math.ceil(t/r)+1,n=2**(r-1);return{windows:e,windowSize:n}}function sh(r,t){if(!Array.isArray(r))throw new Error("array expected");r.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})}function ih(r,t){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}var No=new WeakMap,Dc=new WeakMap;function Uo(r){return Dc.get(r)||1}function Ws(r,t){return{constTimeNegate:Co,hasPrecomputes(e){return Uo(e)!==1},unsafeLadder(e,n,s=r.ZERO){let i=e;for(;n>Fc;)n&zs&&(s=s.add(i)),i=i.double(),n>>=zs;return s},precomputeWindow(e,n){let{windows:s,windowSize:i}=Oo(n,t),o=[],h=e,f=h;for(let b=0;b<s;b++){f=h,o.push(f);for(let w=1;w<i;w++)f=f.add(h),o.push(f);h=f.double()}return o},wNAF(e,n,s){let{windows:i,windowSize:o}=Oo(e,t),h=r.ZERO,f=r.BASE,b=BigInt(2**e-1),w=2**e,k=BigInt(e);for(let I=0;I<i;I++){let B=I*o,O=Number(s&b);s>>=k,O>o&&(O-=w,s+=zs);let L=B,E=B+Math.abs(O)-1,M=I%2!==0,U=O<0;O===0?f=f.add(Co(M,n[L])):h=h.add(Co(U,n[E]))}return{p:h,f}},wNAFUnsafe(e,n,s,i=r.ZERO){let{windows:o,windowSize:h}=Oo(e,t),f=BigInt(2**e-1),b=2**e,w=BigInt(e);for(let k=0;k<o;k++){let I=k*h;if(s===Fc)break;let B=Number(s&f);if(s>>=w,B>h&&(B-=b,s+=zs),B===0)continue;let O=n[I+Math.abs(B)-1];B<0&&(O=O.negate()),i=i.add(O)}return i},getPrecomputes(e,n,s){let i=No.get(n);return i||(i=this.precomputeWindow(n,e),e!==1&&No.set(n,s(i))),i},wNAFCached(e,n,s){let i=Uo(e);return this.wNAF(i,this.getPrecomputes(i,e,s),n)},wNAFCachedUnsafe(e,n,s,i){let o=Uo(e);return o===1?this.unsafeLadder(e,n,i):this.wNAFUnsafe(o,this.getPrecomputes(o,e,s),n,i)},setWindowSize(e,n){qc(n,t),Dc.set(e,n),No.delete(e)}}}function Fs(r,t,e,n){if(sh(e,r),ih(n,t),e.length!==n.length)throw new Error("arrays of points and scalars must have equal length");let s=r.ZERO,i=Ao(BigInt(e.length)),o=i>12?i-3:i>4?i-2:i?2:1,h=(1<<o)-1,f=new Array(h+1).fill(s),b=Math.floor((t.BITS-1)/o)*o,w=s;for(let k=b;k>=0;k-=o){f.fill(s);for(let B=0;B<n.length;B++){let O=n[B],L=Number(O>>BigInt(k)&BigInt(h));f[L]=f[L].add(e[B])}let I=s;for(let B=f.length-1,O=s;B>0;B--)O=O.add(f[B]),I=I.add(O);if(w=w.add(I),k!==0)for(let B=0;B<o;B++)w=w.double()}return w}function zn(r){return To(r.Fp),Ye(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Mo(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}var Ve=BigInt(0),Re=BigInt(1),qs=BigInt(2),oh=BigInt(8),ah={zip215:!0};function ch(r){let t=zn(r);return Ye(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Kc(r){let t=ch(r),{Fp:e,n,prehash:s,hash:i,randomBytes:o,nByteLength:h,h:f}=t,b=qs<<BigInt(h*8)-Re,w=e.create,k=Er(t.n,t.nBitLength),I=t.uvRatio||((l,d)=>{try{return{isValid:!0,value:e.sqrt(l*e.inv(d))}}catch{return{isValid:!1,value:Ve}}}),B=t.adjustScalarBytes||(l=>l),O=t.domain||((l,d,p)=>{if(He("phflag",p),d.length||p)throw new Error("Contexts/pre-hash are not supported");return l});function L(l,d){Le("coordinate "+l,d,Ve,b)}function E(l){if(!(l instanceof T))throw new Error("ExtendedPoint expected")}let M=qr((l,d)=>{let{ex:p,ey:m,ez:S}=l,y=l.is0();d==null&&(d=y?oh:e.inv(S));let c=w(p*d),g=w(m*d),P=w(S*d);if(y)return{x:Ve,y:Re};if(P!==Re)throw new Error("invZ was invalid");return{x:c,y:g}}),U=qr(l=>{let{a:d,d:p}=t;if(l.is0())throw new Error("bad point: ZERO");let{ex:m,ey:S,ez:y,et:c}=l,g=w(m*m),P=w(S*S),N=w(y*y),W=w(N*N),V=w(g*d),X=w(N*w(V+P)),tt=w(W+w(p*w(g*P)));if(X!==tt)throw new Error("bad point: equation left != right (1)");let xt=w(m*S),nt=w(y*c);if(xt!==nt)throw new Error("bad point: equation left != right (2)");return!0});class T{constructor(d,p,m,S){this.ex=d,this.ey=p,this.ez=m,this.et=S,L("x",d),L("y",p),L("z",m),L("t",S),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(d){if(d instanceof T)throw new Error("extended point not allowed");let{x:p,y:m}=d||{};return L("x",p),L("y",m),new T(p,m,Re,w(p*m))}static normalizeZ(d){let p=e.invertBatch(d.map(m=>m.ez));return d.map((m,S)=>m.toAffine(p[S])).map(T.fromAffine)}static msm(d,p){return Fs(T,k,d,p)}_setWindowSize(d){q.setWindowSize(this,d)}assertValidity(){U(this)}equals(d){E(d);let{ex:p,ey:m,ez:S}=this,{ex:y,ey:c,ez:g}=d,P=w(p*g),N=w(y*S),W=w(m*g),V=w(c*S);return P===N&&W===V}is0(){return this.equals(T.ZERO)}negate(){return new T(w(-this.ex),this.ey,this.ez,w(-this.et))}double(){let{a:d}=t,{ex:p,ey:m,ez:S}=this,y=w(p*p),c=w(m*m),g=w(qs*w(S*S)),P=w(d*y),N=p+m,W=w(w(N*N)-y-c),V=P+c,X=V-g,tt=P-c,xt=w(W*X),nt=w(V*tt),it=w(W*tt),Ce=w(X*V);return new T(xt,nt,Ce,it)}add(d){E(d);let{a:p,d:m}=t,{ex:S,ey:y,ez:c,et:g}=this,{ex:P,ey:N,ez:W,et:V}=d;if(p===BigInt(-1)){let Et=w((y-S)*(N+P)),It=w((y+S)*(N-P)),nn=w(It-Et);if(nn===Ve)return this.double();let _t=w(c*qs*V),At=w(g*qs*W),An=At+_t,Lt=It+Et,Rt=At-_t,ds=w(An*nn),Ct=w(Lt*Rt),Ot=w(An*Rt),ps=w(nn*Lt);return new T(ds,Ct,ps,Ot)}let X=w(S*P),tt=w(y*N),xt=w(g*m*V),nt=w(c*W),it=w((S+y)*(P+N)-X-tt),Ce=nt-xt,ht=nt+xt,wt=w(tt-p*X),ls=w(it*Ce),Mt=w(ht*wt),Pt=w(it*wt),hs=w(Ce*ht);return new T(ls,Mt,hs,Pt)}subtract(d){return this.add(d.negate())}wNAF(d){return q.wNAFCached(this,d,T.normalizeZ)}multiply(d){let p=d;Le("scalar",p,Re,n);let{p:m,f:S}=this.wNAF(p);return T.normalizeZ([m,S])[0]}multiplyUnsafe(d,p=T.ZERO){let m=d;return Le("scalar",m,Ve,n),m===Ve?Z:this.is0()||m===Re?this:q.wNAFCachedUnsafe(this,m,T.normalizeZ,p)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return q.unsafeLadder(this,n).is0()}toAffine(d){return M(this,d)}clearCofactor(){let{h:d}=t;return d===Re?this:this.multiplyUnsafe(d)}static fromHex(d,p=!1){let{d:m,a:S}=t,y=e.BYTES;d=Tt("pointHex",d,y),He("zip215",p);let c=d.slice(),g=d[y-1];c[y-1]=g&-129;let P=Sr(c),N=p?b:e.ORDER;Le("pointHex.y",P,Ve,N);let W=w(P*P),V=w(W-Re),X=w(m*W-S),{isValid:tt,value:xt}=I(V,X);if(!tt)throw new Error("Point.fromHex: invalid y coordinate");let nt=(xt&Re)===Re,it=(g&128)!==0;if(!p&&xt===Ve&&it)throw new Error("Point.fromHex: x=0 and x_0=1");return it!==nt&&(xt=w(-xt)),T.fromAffine({x:xt,y:P})}static fromPrivateKey(d){return j(d).point}toRawBytes(){let{x:d,y:p}=this.toAffine(),m=Fr(p,e.BYTES);return m[m.length-1]|=d&Re?128:0,m}toHex(){return or(this.toRawBytes())}}T.BASE=new T(t.Gx,t.Gy,Re,w(t.Gx*t.Gy)),T.ZERO=new T(Ve,Re,Re,Ve);let{BASE:F,ZERO:Z}=T,q=Ws(T,h*8);function H(l){return pt(l,n)}function G(l){return H(Sr(l))}function j(l){let d=e.BYTES;l=Tt("private key",l,d);let p=Tt("hashed private key",i(l),2*d),m=B(p.slice(0,d)),S=p.slice(d,2*d),y=G(m),c=F.multiply(y),g=c.toRawBytes();return{head:m,prefix:S,scalar:y,point:c,pointBytes:g}}function dt(l){return j(l).pointBytes}function Y(l=new Uint8Array,...d){let p=cr(...d);return G(i(O(p,Tt("context",l),!!s)))}function et(l,d,p={}){l=Tt("message",l),s&&(l=s(l));let{prefix:m,scalar:S,pointBytes:y}=j(d),c=Y(p.context,m,l),g=F.multiply(c).toRawBytes(),P=Y(p.context,g,y,l),N=H(c+P*S);Le("signature.s",N,Ve,n);let W=cr(g,Fr(N,e.BYTES));return Tt("result",W,e.BYTES*2)}let x=ah;function a(l,d,p,m=x){let{context:S,zip215:y}=m,c=e.BYTES;l=Tt("signature",l,2*c),d=Tt("message",d),p=Tt("publicKey",p,c),y!==void 0&&He("zip215",y),s&&(d=s(d));let g=Sr(l.slice(c,2*c)),P,N,W;try{P=T.fromHex(p,y),N=T.fromHex(l.slice(0,c),y),W=F.multiplyUnsafe(g)}catch{return!1}if(!y&&P.isSmallOrder())return!1;let V=Y(S,N.toRawBytes(),P.toRawBytes(),d);return N.add(P.multiplyUnsafe(V)).subtract(W).clearCofactor().equals(T.ZERO)}return F._setWindowSize(8),{CURVE:t,getPublicKey:dt,sign:et,verify:a,ExtendedPoint:T,utils:{getExtendedPublicKey:j,randomPrivateKey:()=>o(e.BYTES),precompute(l=8,d=T.BASE){return d._setWindowSize(l),d.multiply(BigInt(3)),d}}}}var zo=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Hc=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),ry=BigInt(0),uh=BigInt(1),Vc=BigInt(2),ny=BigInt(3),fh=BigInt(5),lh=BigInt(8);function hh(r){let t=BigInt(10),e=BigInt(20),n=BigInt(40),s=BigInt(80),i=zo,h=r*r%i*r%i,f=St(h,Vc,i)*h%i,b=St(f,uh,i)*r%i,w=St(b,fh,i)*b%i,k=St(w,t,i)*w%i,I=St(k,e,i)*k%i,B=St(I,n,i)*I%i,O=St(B,s,i)*B%i,L=St(O,s,i)*B%i,E=St(L,t,i)*w%i;return{pow_p_5_8:St(E,Vc,i)*r%i,b2:h}}function dh(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function ph(r,t){let e=zo,n=pt(t*t*t,e),s=pt(n*n*t,e),i=hh(r*s).pow_p_5_8,o=pt(r*n*i,e),h=pt(t*o*o,e),f=o,b=pt(o*Hc,e),w=h===r,k=h===pt(-r,e),I=h===pt(-r*Hc,e);return w&&(o=f),(k||I)&&(o=b),Uc(o,e)&&(o=pt(-o,e)),{isValid:w||k,value:o}}var yh=Er(zo,void 0,!0),gh={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:yh,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:lh,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Mc,randomBytes:Ms,adjustScalarBytes:dh,uvRatio:ph},Kr=Kc(gh);var Q=We(Fn());var La=We(Yo()),Se=We(js());var Xh=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_r=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ar=new Uint32Array(64),Xo=class extends fn{constructor(){super(64,32,8,!1),this.A=_r[0]|0,this.B=_r[1]|0,this.C=_r[2]|0,this.D=_r[3]|0,this.E=_r[4]|0,this.F=_r[5]|0,this.G=_r[6]|0,this.H=_r[7]|0}get(){let{A:t,B:e,C:n,D:s,E:i,F:o,G:h,H:f}=this;return[t,e,n,s,i,o,h,f]}set(t,e,n,s,i,o,h,f){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=h|0,this.H=f|0}process(t,e){for(let k=0;k<16;k++,e+=4)Ar[k]=t.getUint32(e,!1);for(let k=16;k<64;k++){let I=Ar[k-15],B=Ar[k-2],O=Ke(I,7)^Ke(I,18)^I>>>3,L=Ke(B,17)^Ke(B,19)^B>>>10;Ar[k]=L+Ar[k-7]+O+Ar[k-16]|0}let{A:n,B:s,C:i,D:o,E:h,F:f,G:b,H:w}=this;for(let k=0;k<64;k++){let I=Ke(h,6)^Ke(h,11)^Ke(h,25),B=w+I+Lc(h,f,b)+Xh[k]+Ar[k]|0,L=(Ke(n,2)^Ke(n,13)^Ke(n,22))+Rc(n,s,i)|0;w=b,b=f,f=h,h=o+B|0,o=i,i=s,s=n,n=B+L|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,h=h+this.E|0,f=f+this.F|0,b=b+this.G|0,w=w+this.H|0,this.set(n,s,i,o,h,f,b,w)}roundClean(){Ar.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var qn=un(()=>new Xo);var In=We(Eu()),v=We(aa()),Rf=We(aa()),cs=We(Iu());var ca=class extends TypeError{constructor(t,e){let n,{message:s,explanation:i,...o}=t,{path:h}=t,f=h.length===0?s:`At path: ${h.join(".")} -- ${s}`;super(i??f),i!=null&&(this.cause=f),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}};function bd(r){return jn(r)&&typeof r[Symbol.iterator]=="function"}function jn(r){return typeof r=="object"&&r!=null}function xi(r){return jn(r)&&!Array.isArray(r)}function $e(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function xd(r){let{done:t,value:e}=r.next();return t?void 0:e}function vd(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});let{path:s,branch:i}=t,{type:o}=e,{refinement:h,message:f=`Expected a value of type \`${o}\`${h?` with refinement \`${h}\``:""}, but received: \`${$e(n)}\``}=r;return{value:n,type:o,refinement:h,key:s[s.length-1],path:s,branch:i,...r,message:f}}function*_u(r,t,e,n){bd(r)||(r=[r]);for(let s of r){let i=vd(s,t,e,n);i&&(yield i)}}function*ua(r,t,e={}){let{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=e,h={path:n,branch:s,mask:o};i&&(r=t.coercer(r,h));let f="valid";for(let b of t.validator(r,h))b.explanation=e.message,f="not_valid",yield[b,void 0];for(let[b,w,k]of t.entries(r,h)){let I=ua(w,k,{path:b===void 0?n:[...n,b],branch:b===void 0?s:[...s,w],coerce:i,mask:o,message:e.message});for(let B of I)B[0]?(f=B[0].refinement!=null?"not_refined":"not_valid",yield[B[0],void 0]):i&&(w=B[1],b===void 0?r=w:r instanceof Map?r.set(b,w):r instanceof Set?r.add(w):jn(r)&&(w!==void 0||b in r)&&(r[b]=w))}if(f!=="not_valid")for(let b of t.refiner(r,h))b.explanation=e.message,f="not_refined",yield[b,void 0];f==="valid"&&(yield[void 0,r])}var qe=class{constructor(t){let{type:e,schema:n,validator:s,refiner:i,coercer:o=f=>f,entries:h=function*(){}}=t;this.type=e,this.schema=n,this.entries=h,this.coercer=o,s?this.validator=(f,b)=>{let w=s(f,b);return _u(w,b,this,f)}:this.validator=()=>[],i?this.refiner=(f,b)=>{let w=i(f,b);return _u(w,b,this,f)}:this.refiner=()=>[]}assert(t,e){return Au(t,this,e)}create(t,e){return vn(t,this,e)}is(t){return Lu(t,this)}mask(t,e){return kd(t,this,e)}validate(t,e={}){return Gn(t,this,e)}};function Au(r,t,e){let n=Gn(r,t,{message:e});if(n[0])throw n[0]}function vn(r,t,e){let n=Gn(r,t,{coerce:!0,message:e});if(n[0])throw n[0];return n[1]}function kd(r,t,e){let n=Gn(r,t,{coerce:!0,mask:!0,message:e});if(n[0])throw n[0];return n[1]}function Lu(r,t){return!Gn(r,t)[0]}function Gn(r,t,e={}){let n=ua(r,t,e),s=xd(n);return s[0]?[new ca(s[0],function*(){for(let o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Zr(r,t){return new qe({type:r,schema:null,validator:t})}function Ru(){return Zr("any",()=>!0)}function D(r){return new qe({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(let[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${$e(t)}`}})}function je(){return Zr("boolean",r=>typeof r=="boolean")}function vi(r){return Zr("instance",t=>t instanceof r||`Expected a \`${r.name}\` instance, but received: ${$e(t)}`)}function Bt(r){let t=$e(r),e=typeof r;return new qe({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${t}\`, but received: ${$e(n)}`}})}function Sd(){return Zr("never",()=>!1)}function K(r){return new qe({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function _(){return Zr("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${$e(r)}`)}function J(r){return new qe({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function fa(r,t){return new qe({type:"record",schema:null,*entries(e){if(jn(e))for(let n in e){let s=e[n];yield[n,n,r],yield[n,s,t]}},validator(e){return xi(e)||`Expected an object, but received: ${$e(e)}`},coercer(e){return xi(e)?{...e}:e}})}function z(){return Zr("string",r=>typeof r=="string"||`Expected a string, but received: ${$e(r)}`)}function ki(r){let t=Sd();return new qe({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){let n=Math.max(r.length,e.length);for(let s=0;s<n;s++)yield[s,e[s],r[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${$e(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function C(r){let t=Object.keys(r);return new qe({type:"type",schema:r,*entries(e){if(jn(e))for(let n of t)yield[n,e[n],r[n]]},validator(e){return xi(e)||`Expected an object, but received: ${$e(e)}`},coercer(e){return xi(e)?{...e}:e}})}function me(r){let t=r.map(e=>e.type).join(" | ");return new qe({type:"union",schema:null,coercer(e,n){for(let s of r){let[i,o]=s.validate(e,{coerce:!0,mask:n.mask});if(!i)return o}return e},validator(e,n){let s=[];for(let i of r){let[...o]=ua(e,i,n),[h]=o;if(h[0])for(let[f]of o)f&&s.push(f);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${$e(e)}`,...s]}})}function Yr(){return Zr("unknown",()=>!0)}function kn(r,t,e){return new qe({...r,coercer:(n,s)=>Lu(n,t)?r.coercer(e(n,s),s):r.coercer(n,s)})}var h0=We(tf());var Zd=We(Fn(),1);var nf=We(rf(),1);var af=[],cf=[],uf=[],Yd=BigInt(0),ts=BigInt(1),Jd=BigInt(2),Xd=BigInt(7),Qd=BigInt(256),t0=BigInt(113);for(let r=0,t=ts,e=1,n=0;r<24;r++){[e,n]=[n,(2*e+3*n)%5],af.push(2*(5*n+e)),cf.push((r+1)*(r+2)/2%64);let s=Yd;for(let i=0;i<7;i++)t=(t<<ts^(t>>Xd)*t0)%Qd,t&Jd&&(s^=ts<<(ts<<BigInt(i))-ts);uf.push(s)}var[e0,r0]=bo(uf,!0),sf=(r,t,e)=>e>32?ko(r,t,e):xo(r,t,e),of=(r,t,e)=>e>32?So(r,t,e):vo(r,t,e);function n0(r,t=24){let e=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let o=0;o<10;o++)e[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){let h=(o+8)%10,f=(o+2)%10,b=e[f],w=e[f+1],k=sf(b,w,1)^e[h],I=of(b,w,1)^e[h+1];for(let B=0;B<50;B+=10)r[o+B]^=k,r[o+B+1]^=I}let s=r[2],i=r[3];for(let o=0;o<24;o++){let h=cf[o],f=sf(s,i,h),b=of(s,i,h),w=af[o];s=r[w],i=r[w+1],r[w]=f,r[w+1]=b}for(let o=0;o<50;o+=10){for(let h=0;h<10;h++)e[h]=r[o+h];for(let h=0;h<10;h++)r[o+h]^=~e[(h+2)%10]&e[(h+4)%10]}r[0]^=e0[n],r[1]^=r0[n]}e.fill(0)}var Li=class r extends wr{constructor(t,e,n,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,On(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Ic(this.state)}keccak(){yo||go(this.state32),n0(this.state32,this.rounds),yo||go(this.state32),this.posOut=0,this.pos=0}update(t){sr(this);let{blockLen:e,state:n}=this;t=br(t);let s=t.length;for(let i=0;i<s;){let o=Math.min(e-this.pos,s-i);for(let h=0;h<o;h++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:e,pos:n,blockLen:s}=this;t[n]^=e,e&128&&n===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){sr(this,!1),mr(t),this.finish();let e=this.state,{blockLen:n}=this;for(let s=0,i=t.length;s<i;){this.posOut>=n&&this.keccak();let o=Math.min(n-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return On(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Rs(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:e,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new r(e,n,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}},Cr=(r,t,e)=>un(()=>new Li(t,r,e)),dg=Cr(6,144,224/8),pg=Cr(6,136,256/8),yg=Cr(6,104,384/8),gg=Cr(6,72,512/8),mg=Cr(1,144,224/8),va=Cr(1,136,256/8),wg=Cr(1,104,384/8),bg=Cr(1,72,512/8),ff=(r,t,e)=>Ac((n={})=>new Li(t,r,n.dkLen===void 0?e:n.dkLen,!0)),xg=ff(31,168,128/8),vg=ff(31,136,256/8);var Ri=class extends wr{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Ec(t);let n=br(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return sr(this),this.iHash.update(t),this}digestInto(t){sr(this),mr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:h}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=h,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},ka=(r,t,e)=>new Ri(r,t).update(e).digest();ka.create=(r,t)=>new Ri(r,t);function lf(r){r.lowS!==void 0&&He("lowS",r.lowS),r.prehash!==void 0&&He("prehash",r.prehash)}function s0(r){let t=zn(r);Ye(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:e,Fp:n,a:s}=t;if(e){if(!n.eql(s,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:i0,hexToBytes:o0}=Ns,hr={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(r,t)=>{let{Err:e}=hr;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");let n=t.length/2,s=zr(n);if(s.length/2&128)throw new e("tlv.encode: long form length too big");let i=n>127?zr(s.length/2|128):"";return zr(r)+i+s+t},decode(r,t){let{Err:e}=hr,n=0;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[n++]!==r)throw new e("tlv.decode: wrong tlv");let s=t[n++],i=!!(s&128),o=0;if(!i)o=s;else{let f=s&127;if(!f)throw new e("tlv.decode(long): indefinite length not supported");if(f>4)throw new e("tlv.decode(long): byte length is too big");let b=t.subarray(n,n+f);if(b.length!==f)throw new e("tlv.decode: length bytes not complete");if(b[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(let w of b)o=o<<8|w;if(n+=f,o<128)throw new e("tlv.decode(long): not minimal encoding")}let h=t.subarray(n,n+o);if(h.length!==o)throw new e("tlv.decode: wrong value length");return{v:h,l:t.subarray(n+o)}}},_int:{encode(r){let{Err:t}=hr;if(r<dr)throw new t("integer: negative integers are not allowed");let e=zr(r);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(r){let{Err:t}=hr;if(r[0]&128)throw new t("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return i0(r)}},toSig(r){let{Err:t,_int:e,_tlv:n}=hr,s=typeof r=="string"?o0(r):r;ln(s);let{v:i,l:o}=n.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");let{v:h,l:f}=n.decode(2,i),{v:b,l:w}=n.decode(2,f);if(w.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(h),s:e.decode(b)}},hexFromSig(r){let{_tlv:t,_int:e}=hr,n=t.encode(2,e.encode(r.r)),s=t.encode(2,e.encode(r.s)),i=n+s;return t.encode(48,i)}},dr=BigInt(0),ue=BigInt(1),Lg=BigInt(2),hf=BigInt(3),Rg=BigInt(4);function a0(r){let t=s0(r),{Fp:e}=t,n=Er(t.n,t.nBitLength),s=t.toBytes||((L,E,M)=>{let U=E.toAffine();return cr(Uint8Array.from([4]),e.toBytes(U.x),e.toBytes(U.y))}),i=t.fromBytes||(L=>{let E=L.subarray(1),M=e.fromBytes(E.subarray(0,e.BYTES)),U=e.fromBytes(E.subarray(e.BYTES,2*e.BYTES));return{x:M,y:U}});function o(L){let{a:E,b:M}=t,U=e.sqr(L),T=e.mul(U,L);return e.add(e.add(T,e.mul(L,E)),M)}if(!e.eql(e.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function h(L){return Nn(L,ue,t.n)}function f(L){let{allowedPrivateKeyLengths:E,nByteLength:M,wrapPrivateKey:U,n:T}=t;if(E&&typeof L!="bigint"){if(kr(L)&&(L=or(L)),typeof L!="string"||!E.includes(L.length))throw new Error("invalid private key");L=L.padStart(M*2,"0")}let F;try{F=typeof L=="bigint"?L:ar(Tt("private key",L,M))}catch{throw new Error("invalid private key, expected hex or "+M+" bytes, got "+typeof L)}return U&&(F=pt(F,T)),Le("private key",F,ue,T),F}function b(L){if(!(L instanceof I))throw new Error("ProjectivePoint expected")}let w=qr((L,E)=>{let{px:M,py:U,pz:T}=L;if(e.eql(T,e.ONE))return{x:M,y:U};let F=L.is0();E==null&&(E=F?e.ONE:e.inv(T));let Z=e.mul(M,E),q=e.mul(U,E),H=e.mul(T,E);if(F)return{x:e.ZERO,y:e.ZERO};if(!e.eql(H,e.ONE))throw new Error("invZ was invalid");return{x:Z,y:q}}),k=qr(L=>{if(L.is0()){if(t.allowInfinityPoint&&!e.is0(L.py))return;throw new Error("bad point: ZERO")}let{x:E,y:M}=L.toAffine();if(!e.isValid(E)||!e.isValid(M))throw new Error("bad point: x or y not FE");let U=e.sqr(M),T=o(E);if(!e.eql(U,T))throw new Error("bad point: equation left != right");if(!L.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class I{constructor(E,M,U){if(this.px=E,this.py=M,this.pz=U,E==null||!e.isValid(E))throw new Error("x required");if(M==null||!e.isValid(M))throw new Error("y required");if(U==null||!e.isValid(U))throw new Error("z required");Object.freeze(this)}static fromAffine(E){let{x:M,y:U}=E||{};if(!E||!e.isValid(M)||!e.isValid(U))throw new Error("invalid affine point");if(E instanceof I)throw new Error("projective point not allowed");let T=F=>e.eql(F,e.ZERO);return T(M)&&T(U)?I.ZERO:new I(M,U,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(E){let M=e.invertBatch(E.map(U=>U.pz));return E.map((U,T)=>U.toAffine(M[T])).map(I.fromAffine)}static fromHex(E){let M=I.fromAffine(i(Tt("pointHex",E)));return M.assertValidity(),M}static fromPrivateKey(E){return I.BASE.multiply(f(E))}static msm(E,M){return Fs(I,n,E,M)}_setWindowSize(E){O.setWindowSize(this,E)}assertValidity(){k(this)}hasEvenY(){let{y:E}=this.toAffine();if(e.isOdd)return!e.isOdd(E);throw new Error("Field doesn't support isOdd")}equals(E){b(E);let{px:M,py:U,pz:T}=this,{px:F,py:Z,pz:q}=E,H=e.eql(e.mul(M,q),e.mul(F,T)),G=e.eql(e.mul(U,q),e.mul(Z,T));return H&&G}negate(){return new I(this.px,e.neg(this.py),this.pz)}double(){let{a:E,b:M}=t,U=e.mul(M,hf),{px:T,py:F,pz:Z}=this,q=e.ZERO,H=e.ZERO,G=e.ZERO,j=e.mul(T,T),dt=e.mul(F,F),Y=e.mul(Z,Z),et=e.mul(T,F);return et=e.add(et,et),G=e.mul(T,Z),G=e.add(G,G),q=e.mul(E,G),H=e.mul(U,Y),H=e.add(q,H),q=e.sub(dt,H),H=e.add(dt,H),H=e.mul(q,H),q=e.mul(et,q),G=e.mul(U,G),Y=e.mul(E,Y),et=e.sub(j,Y),et=e.mul(E,et),et=e.add(et,G),G=e.add(j,j),j=e.add(G,j),j=e.add(j,Y),j=e.mul(j,et),H=e.add(H,j),Y=e.mul(F,Z),Y=e.add(Y,Y),j=e.mul(Y,et),q=e.sub(q,j),G=e.mul(Y,dt),G=e.add(G,G),G=e.add(G,G),new I(q,H,G)}add(E){b(E);let{px:M,py:U,pz:T}=this,{px:F,py:Z,pz:q}=E,H=e.ZERO,G=e.ZERO,j=e.ZERO,dt=t.a,Y=e.mul(t.b,hf),et=e.mul(M,F),x=e.mul(U,Z),a=e.mul(T,q),u=e.add(M,U),l=e.add(F,Z);u=e.mul(u,l),l=e.add(et,x),u=e.sub(u,l),l=e.add(M,T);let d=e.add(F,q);return l=e.mul(l,d),d=e.add(et,a),l=e.sub(l,d),d=e.add(U,T),H=e.add(Z,q),d=e.mul(d,H),H=e.add(x,a),d=e.sub(d,H),j=e.mul(dt,l),H=e.mul(Y,a),j=e.add(H,j),H=e.sub(x,j),j=e.add(x,j),G=e.mul(H,j),x=e.add(et,et),x=e.add(x,et),a=e.mul(dt,a),l=e.mul(Y,l),x=e.add(x,a),a=e.sub(et,a),a=e.mul(dt,a),l=e.add(l,a),et=e.mul(x,l),G=e.add(G,et),et=e.mul(d,l),H=e.mul(u,H),H=e.sub(H,et),et=e.mul(u,x),j=e.mul(d,j),j=e.add(j,et),new I(H,G,j)}subtract(E){return this.add(E.negate())}is0(){return this.equals(I.ZERO)}wNAF(E){return O.wNAFCached(this,E,I.normalizeZ)}multiplyUnsafe(E){let{endo:M,n:U}=t;Le("scalar",E,dr,U);let T=I.ZERO;if(E===dr)return T;if(this.is0()||E===ue)return this;if(!M||O.hasPrecomputes(this))return O.wNAFCachedUnsafe(this,E,I.normalizeZ);let{k1neg:F,k1:Z,k2neg:q,k2:H}=M.splitScalar(E),G=T,j=T,dt=this;for(;Z>dr||H>dr;)Z&ue&&(G=G.add(dt)),H&ue&&(j=j.add(dt)),dt=dt.double(),Z>>=ue,H>>=ue;return F&&(G=G.negate()),q&&(j=j.negate()),j=new I(e.mul(j.px,M.beta),j.py,j.pz),G.add(j)}multiply(E){let{endo:M,n:U}=t;Le("scalar",E,ue,U);let T,F;if(M){let{k1neg:Z,k1:q,k2neg:H,k2:G}=M.splitScalar(E),{p:j,f:dt}=this.wNAF(q),{p:Y,f:et}=this.wNAF(G);j=O.constTimeNegate(Z,j),Y=O.constTimeNegate(H,Y),Y=new I(e.mul(Y.px,M.beta),Y.py,Y.pz),T=j.add(Y),F=dt.add(et)}else{let{p:Z,f:q}=this.wNAF(E);T=Z,F=q}return I.normalizeZ([T,F])[0]}multiplyAndAddUnsafe(E,M,U){let T=I.BASE,F=(q,H)=>H===dr||H===ue||!q.equals(T)?q.multiplyUnsafe(H):q.multiply(H),Z=F(this,M).add(F(E,U));return Z.is0()?void 0:Z}toAffine(E){return w(this,E)}isTorsionFree(){let{h:E,isTorsionFree:M}=t;if(E===ue)return!0;if(M)return M(I,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:E,clearCofactor:M}=t;return E===ue?this:M?M(I,this):this.multiplyUnsafe(t.h)}toRawBytes(E=!0){return He("isCompressed",E),this.assertValidity(),s(I,this,E)}toHex(E=!0){return He("isCompressed",E),or(this.toRawBytes(E))}}I.BASE=new I(t.Gx,t.Gy,e.ONE),I.ZERO=new I(e.ZERO,e.ONE,e.ZERO);let B=t.nBitLength,O=Ws(I,t.endo?Math.ceil(B/2):B);return{CURVE:t,ProjectivePoint:I,normPrivateKeyToScalar:f,weierstrassEquation:o,isWithinCurveOrder:h}}function c0(r){let t=zn(r);return Ye(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function df(r){let t=c0(r),{Fp:e,n}=t,s=e.BYTES+1,i=2*e.BYTES+1;function o(a){return pt(a,n)}function h(a){return Us(a,n)}let{ProjectivePoint:f,normPrivateKeyToScalar:b,weierstrassEquation:w,isWithinCurveOrder:k}=a0({...t,toBytes(a,u,l){let d=u.toAffine(),p=e.toBytes(d.x),m=cr;return He("isCompressed",l),l?m(Uint8Array.from([u.hasEvenY()?2:3]),p):m(Uint8Array.from([4]),p,e.toBytes(d.y))},fromBytes(a){let u=a.length,l=a[0],d=a.subarray(1);if(u===s&&(l===2||l===3)){let p=ar(d);if(!Nn(p,ue,e.ORDER))throw new Error("Point is not on curve");let m=w(p),S;try{S=e.sqrt(m)}catch(g){let P=g instanceof Error?": "+g.message:"";throw new Error("Point is not on curve"+P)}let y=(S&ue)===ue;return(l&1)===1!==y&&(S=e.neg(S)),{x:p,y:S}}else if(u===i&&l===4){let p=e.fromBytes(d.subarray(0,e.BYTES)),m=e.fromBytes(d.subarray(e.BYTES,2*e.BYTES));return{x:p,y:m}}else{let p=s,m=i;throw new Error("invalid Point, expected length of "+p+", or uncompressed "+m+", got "+u)}}}),I=a=>or(Br(a,t.nByteLength));function B(a){let u=n>>ue;return a>u}function O(a){return B(a)?o(-a):a}let L=(a,u,l)=>ar(a.slice(u,l));class E{constructor(u,l,d){this.r=u,this.s=l,this.recovery=d,this.assertValidity()}static fromCompact(u){let l=t.nByteLength;return u=Tt("compactSignature",u,l*2),new E(L(u,0,l),L(u,l,2*l))}static fromDER(u){let{r:l,s:d}=hr.toSig(Tt("DER",u));return new E(l,d)}assertValidity(){Le("r",this.r,ue,n),Le("s",this.s,ue,n)}addRecoveryBit(u){return new E(this.r,this.s,u)}recoverPublicKey(u){let{r:l,s:d,recovery:p}=this,m=q(Tt("msgHash",u));if(p==null||![0,1,2,3].includes(p))throw new Error("recovery id invalid");let S=p===2||p===3?l+t.n:l;if(S>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");let y=p&1?"03":"02",c=f.fromHex(y+I(S)),g=h(S),P=o(-m*g),N=o(d*g),W=f.BASE.multiplyAndAddUnsafe(c,P,N);if(!W)throw new Error("point at infinify");return W.assertValidity(),W}hasHighS(){return B(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Wr(this.toDERHex())}toDERHex(){return hr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Wr(this.toCompactHex())}toCompactHex(){return I(this.r)+I(this.s)}}let M={isValidPrivateKey(a){try{return b(a),!0}catch{return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{let a=Po(t.n);return Wc(t.randomBytes(a),t.n)},precompute(a=8,u=f.BASE){return u._setWindowSize(a),u.multiply(BigInt(3)),u}};function U(a,u=!0){return f.fromPrivateKey(a).toRawBytes(u)}function T(a){let u=kr(a),l=typeof a=="string",d=(u||l)&&a.length;return u?d===s||d===i:l?d===2*s||d===2*i:a instanceof f}function F(a,u,l=!0){if(T(a))throw new Error("first arg must be private key");if(!T(u))throw new Error("second arg must be public key");return f.fromHex(u).multiply(b(a)).toRawBytes(l)}let Z=t.bits2int||function(a){if(a.length>8192)throw new Error("input is too large");let u=ar(a),l=a.length*8-t.nBitLength;return l>0?u>>BigInt(l):u},q=t.bits2int_modN||function(a){return o(Z(a))},H=Un(t.nBitLength);function G(a){return Le("num < 2^"+t.nBitLength,a,dr,H),Br(a,t.nByteLength)}function j(a,u,l=dt){if(["recovered","canonical"].some(X=>X in l))throw new Error("sign() legacy options not supported");let{hash:d,randomBytes:p}=t,{lowS:m,prehash:S,extraEntropy:y}=l;m==null&&(m=!0),a=Tt("msgHash",a),lf(l),S&&(a=Tt("prehashed msgHash",d(a)));let c=q(a),g=b(u),P=[G(g),G(c)];if(y!=null&&y!==!1){let X=y===!0?p(e.BYTES):y;P.push(Tt("extraEntropy",X))}let N=cr(...P),W=c;function V(X){let tt=Z(X);if(!k(tt))return;let xt=h(tt),nt=f.BASE.multiply(tt).toAffine(),it=o(nt.x);if(it===dr)return;let Ce=o(xt*o(W+it*g));if(Ce===dr)return;let ht=(nt.x===it?0:2)|Number(nt.y&ue),wt=Ce;return m&&B(Ce)&&(wt=O(Ce),ht^=1),new E(it,wt,ht)}return{seed:N,k2sig:V}}let dt={lowS:t.lowS,prehash:!1},Y={lowS:t.lowS,prehash:!1};function et(a,u,l=dt){let{seed:d,k2sig:p}=j(a,u,l),m=t;return Lo(m.hash.outputLen,m.nByteLength,m.hmac)(d,p)}f.BASE._setWindowSize(8);function x(a,u,l,d=Y){let p=a;u=Tt("msgHash",u),l=Tt("publicKey",l);let{lowS:m,prehash:S,format:y}=d;if(lf(d),"strict"in d)throw new Error("options.strict was renamed to lowS");if(y!==void 0&&y!=="compact"&&y!=="der")throw new Error("format must be compact or der");let c=typeof p=="string"||kr(p),g=!c&&!y&&typeof p=="object"&&p!==null&&typeof p.r=="bigint"&&typeof p.s=="bigint";if(!c&&!g)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let P,N;try{if(g&&(P=new E(p.r,p.s)),c){try{y!=="compact"&&(P=E.fromDER(p))}catch(ht){if(!(ht instanceof hr.Err))throw ht}!P&&y!=="der"&&(P=E.fromCompact(p))}N=f.fromHex(l)}catch{return!1}if(!P||m&&P.hasHighS())return!1;S&&(u=t.hash(u));let{r:W,s:V}=P,X=q(u),tt=h(V),xt=o(X*tt),nt=o(W*tt),it=f.BASE.multiplyAndAddUnsafe(N,xt,nt)?.toAffine();return it?o(it.x)===W:!1}return{CURVE:t,getPublicKey:U,getSharedSecret:F,sign:et,verify:x,ProjectivePoint:f,Signature:E,utils:M}}function u0(r){return{hash:r,hmac:(t,...e)=>ka(r,t,mo(...e)),randomBytes:Ms}}function pf(r,t){let e=n=>df({...r,...u0(n)});return Object.freeze({...e(t),create:e})}var mf=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),yf=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),f0=BigInt(1),Sa=BigInt(2),gf=(r,t)=>(r+t/Sa)/t;function l0(r){let t=mf,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),h=BigInt(44),f=BigInt(88),b=r*r*r%t,w=b*b*r%t,k=St(w,e,t)*w%t,I=St(k,e,t)*w%t,B=St(I,Sa,t)*b%t,O=St(B,s,t)*B%t,L=St(O,i,t)*O%t,E=St(L,h,t)*L%t,M=St(E,f,t)*E%t,U=St(M,h,t)*L%t,T=St(U,e,t)*w%t,F=St(T,o,t)*O%t,Z=St(F,n,t)*b%t,q=St(Z,Sa,t);if(!Ba.eql(Ba.sqr(q),r))throw new Error("Cannot find square root");return q}var Ba=Er(mf,void 0,void 0,{sqrt:l0}),es=pf({a:BigInt(0),b:BigInt(7),Fp:Ba,n:yf,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{let t=yf,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-f0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),h=gf(i*r,t),f=gf(-n*r,t),b=pt(r-h*e-f*s,t),w=pt(-h*n-f*i,t),k=b>o,I=w>o;if(k&&(b=t-b),I&&(w=t-w),b>o||w>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:k,k1:b,k2neg:I,k2:w}}}},qn),Wg=BigInt(0);var Fg=es.ProjectivePoint;var Yg=Kr.utils.randomPrivateKey,wf=()=>{let r=Kr.utils.randomPrivateKey(),t=Ra(r),e=new Uint8Array(64);return e.set(r),e.set(t,32),{publicKey:t,secretKey:e}},Ra=Kr.getPublicKey;function bf(r){try{return Kr.ExtendedPoint.fromHex(r),!0}catch{return!1}}var Ha=(r,t)=>Kr.sign(r,t.slice(0,32)),d0=Kr.verify,ut=r=>Q.Buffer.isBuffer(r)?r:r instanceof Uint8Array?Q.Buffer.from(r.buffer,r.byteOffset,r.byteLength):Q.Buffer.from(r),Ta=class{constructor(t){Object.assign(this,t)}encode(){return Q.Buffer.from((0,In.serialize)(Mi,this))}static decode(t){return(0,In.deserialize)(Mi,this,t)}static decodeUnchecked(t){return(0,In.deserializeUnchecked)(Mi,this,t)}};var Mi=new Map,Tf,p0=32,Nr=32;function y0(r){return r._bn!==void 0}var xf=1,rt=class r extends Ta{constructor(t){if(super({}),this._bn=void 0,y0(t))this._bn=t._bn;else{if(typeof t=="string"){let e=Se.default.decode(t);if(e.length!=Nr)throw new Error("Invalid public key input");this._bn=new La.default(e)}else this._bn=new La.default(t);if(this._bn.byteLength()>Nr)throw new Error("Invalid public key input")}}static unique(){let t=new r(xf);return xf+=1,new r(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return Se.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){let t=this._bn.toArrayLike(Q.Buffer);if(t.length===Nr)return t;let e=Q.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){let s=Q.Buffer.concat([t.toBuffer(),Q.Buffer.from(e),n.toBuffer()]),i=qn(s);return new r(i)}static createProgramAddressSync(t,e){let n=Q.Buffer.alloc(0);t.forEach(function(i){if(i.length>p0)throw new TypeError("Max seed length exceeded");n=Q.Buffer.concat([n,ut(i)])}),n=Q.Buffer.concat([n,e.toBuffer(),Q.Buffer.from("ProgramDerivedAddress")]);let s=qn(n);if(bf(s))throw new Error("Invalid seeds, address must fall off the curve");return new r(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,s;for(;n!=0;){try{let i=t.concat(Q.Buffer.from([n]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){let e=new r(t);return bf(e.toBytes())}};Tf=rt;rt.default=new Tf("11111111111111111111111111111111");Mi.set(rt,{kind:"struct",fields:[["_bn","u256"]]});var Jg=new rt("BPFLoader1111111111111111111111111111111111"),Jr=1232,Va=127,Pi=64,Ma=class extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}};Object.defineProperty(Ma.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var Pa=class extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}};Object.defineProperty(Pa.prototype,"name",{value:"TransactionExpiredTimeoutError"});var Ca=class extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}};Object.defineProperty(Ca.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var Bn=class{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){let t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(let e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");let n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});let s=i=>{let o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}},ot=(r="publicKey")=>v.blob(32,r),g0=(r="signature")=>v.blob(64,r),Sn=(r="string")=>{let t=v.struct([v.u32("length"),v.u32("lengthPadding"),v.blob(v.offset(v.u32(),-8),"chars")],r),e=t.decode.bind(t),n=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,h)=>{let f={chars:Q.Buffer.from(i,"utf8")};return n(f,o,h)},s.alloc=i=>v.u32().span+v.u32().span+Q.Buffer.from(i,"utf8").length,s},m0=(r="authorized")=>v.struct([ot("staker"),ot("withdrawer")],r),w0=(r="lockup")=>v.struct([v.ns64("unixTimestamp"),v.ns64("epoch"),ot("custodian")],r),b0=(r="voteInit")=>v.struct([ot("nodePubkey"),ot("authorizedVoter"),ot("authorizedWithdrawer"),v.u8("commission")],r),x0=(r="voteAuthorizeWithSeedArgs")=>v.struct([v.u32("voteAuthorizationType"),ot("currentAuthorityDerivedKeyOwnerPubkey"),Sn("currentAuthorityDerivedKeySeed"),ot("newAuthorized")],r);function Mf(r,t){let e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){let i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return Mf({layout:s},t[s.property]);return 0},n=0;return r.layout.fields.forEach(s=>{n+=e(s)}),n}function Ne(r){let t=0,e=0;for(;;){let n=r.shift();if(t|=(n&127)<<e*7,e+=1,!(n&128))break}return t}function Ue(r,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){r.push(n);break}else n|=128,r.push(n)}}function vt(r,t){if(!r)throw new Error(t||"Assertion failed")}var Ci=class r{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){let n=new Map,s=o=>{let h=o.toBase58(),f=n.get(h);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(h,f)),f},i=s(e);i.isSigner=!0,i.isWritable=!0;for(let o of t){s(o.programId).isInvoked=!0;for(let h of o.keys){let f=s(h.pubkey);f.isSigner||=h.isSigner,f.isWritable||=h.isWritable}}return new r(e,n)}getMessageComponents(){let t=[...this.keyMetaMap.entries()];vt(t.length<=256,"Max static account keys length exceeded");let e=t.filter(([,f])=>f.isSigner&&f.isWritable),n=t.filter(([,f])=>f.isSigner&&!f.isWritable),s=t.filter(([,f])=>!f.isSigner&&f.isWritable),i=t.filter(([,f])=>!f.isSigner&&!f.isWritable),o={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{vt(e.length>0,"Expected at least one writable signer key");let[f]=e[0];vt(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let h=[...e.map(([f])=>new rt(f)),...n.map(([f])=>new rt(f)),...s.map(([f])=>new rt(f)),...i.map(([f])=>new rt(f))];return[o,h]}extractTableLookup(t){let[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,e){let n=new Array,s=new Array;for(let[i,o]of this.keyMetaMap.entries())if(e(o)){let h=new rt(i),f=t.findIndex(b=>b.equals(h));f>=0&&(vt(f<256,"Max lookup table index exceeded"),n.push(f),s.push(h),this.keyMetaMap.delete(i))}return[n,s]}},Pf="Reached end of buffer unexpectedly";function yr(r){if(r.length===0)throw new Error(Pf);return r.shift()}function ze(r,...t){let[e]=t;if(t.length===2?e+(t[1]??0)>r.length:e>=r.length)throw new Error(Pf);return r.splice(...t)}var ss=class r{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new rt(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Se.default.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Bn(this.staticAccountKeys)}static compile(t){let e=Ci.compile(t.instructions,t.payerKey),[n,s]=e.getMessageComponents(),o=new Bn(s).compileInstructions(t.instructions).map(h=>({programIdIndex:h.programIdIndex,accounts:h.accountKeyIndexes,data:Se.default.encode(h.data)}));return new r({header:n,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){let n=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<i}else{let n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){let t=this.accountKeys.length,e=[];Ue(e,t);let n=this.instructions.map(k=>{let{accounts:I,programIdIndex:B}=k,O=Array.from(Se.default.decode(k.data)),L=[];Ue(L,I.length);let E=[];return Ue(E,O.length),{programIdIndex:B,keyIndicesCount:Q.Buffer.from(L),keyIndices:I,dataLength:Q.Buffer.from(E),data:O}}),s=[];Ue(s,n.length);let i=Q.Buffer.alloc(Jr);Q.Buffer.from(s).copy(i);let o=s.length;n.forEach(k=>{let B=v.struct([v.u8("programIdIndex"),v.blob(k.keyIndicesCount.length,"keyIndicesCount"),v.seq(v.u8("keyIndex"),k.keyIndices.length,"keyIndices"),v.blob(k.dataLength.length,"dataLength"),v.seq(v.u8("userdatum"),k.data.length,"data")]).encode(k,i,o);o+=B}),i=i.slice(0,o);let h=v.struct([v.blob(1,"numRequiredSignatures"),v.blob(1,"numReadonlySignedAccounts"),v.blob(1,"numReadonlyUnsignedAccounts"),v.blob(e.length,"keyCount"),v.seq(ot("key"),t,"keys"),ot("recentBlockhash")]),f={numRequiredSignatures:Q.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:Q.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:Q.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:Q.Buffer.from(e),keys:this.accountKeys.map(k=>ut(k.toBytes())),recentBlockhash:Se.default.decode(this.recentBlockhash)},b=Q.Buffer.alloc(2048),w=h.encode(f,b);return i.copy(b,w),b.slice(0,w+i.length)}static from(t){let e=[...t],n=yr(e);if(n!==(n&Va))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let s=yr(e),i=yr(e),o=Ne(e),h=[];for(let I=0;I<o;I++){let B=ze(e,0,Nr);h.push(new rt(Q.Buffer.from(B)))}let f=ze(e,0,Nr),b=Ne(e),w=[];for(let I=0;I<b;I++){let B=yr(e),O=Ne(e),L=ze(e,0,O),E=Ne(e),M=ze(e,0,E),U=Se.default.encode(Q.Buffer.from(M));w.push({programIdIndex:B,accounts:L,data:U})}let k={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:Se.default.encode(Q.Buffer.from(f)),accountKeys:h,instructions:w};return new r(k)}},Oa=class r{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(let e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Bn(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){let s=t-n,i=this.addressTableLookups.reduce((o,h)=>o+h.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){let s=t-e,o=n-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{let s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){let e={writable:[],readonly:[]};for(let n of this.addressTableLookups){let s=t.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(let i of n.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(let i of n.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){let e=Ci.compile(t.instructions,t.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(let w of i){let k=e.extractTableLookup(w);if(k!==void 0){let[I,{writable:B,readonly:O}]=k;n.push(I),s.writable.push(...B),s.readonly.push(...O)}}let[o,h]=e.getMessageComponents(),b=new Bn(h,s).compileInstructions(t.instructions);return new r({header:o,staticAccountKeys:h,recentBlockhash:t.recentBlockhash,compiledInstructions:b,addressTableLookups:n})}serialize(){let t=Array();Ue(t,this.staticAccountKeys.length);let e=this.serializeInstructions(),n=Array();Ue(n,this.compiledInstructions.length);let s=this.serializeAddressTableLookups(),i=Array();Ue(i,this.addressTableLookups.length);let o=v.struct([v.u8("prefix"),v.struct([v.u8("numRequiredSignatures"),v.u8("numReadonlySignedAccounts"),v.u8("numReadonlyUnsignedAccounts")],"header"),v.blob(t.length,"staticAccountKeysLength"),v.seq(ot(),this.staticAccountKeys.length,"staticAccountKeys"),ot("recentBlockhash"),v.blob(n.length,"instructionsLength"),v.blob(e.length,"serializedInstructions"),v.blob(i.length,"addressTableLookupsLength"),v.blob(s.length,"serializedAddressTableLookups")]),h=new Uint8Array(Jr),b=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(w=>w.toBytes()),recentBlockhash:Se.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},h);return h.slice(0,b)}serializeInstructions(){let t=0,e=new Uint8Array(Jr);for(let n of this.compiledInstructions){let s=Array();Ue(s,n.accountKeyIndexes.length);let i=Array();Ue(i,n.data.length);let o=v.struct([v.u8("programIdIndex"),v.blob(s.length,"encodedAccountKeyIndexesLength"),v.seq(v.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),v.blob(i.length,"encodedDataLength"),v.blob(n.data.length,"data")]);t+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0,e=new Uint8Array(Jr);for(let n of this.addressTableLookups){let s=Array();Ue(s,n.writableIndexes.length);let i=Array();Ue(i,n.readonlyIndexes.length);let o=v.struct([ot("accountKey"),v.blob(s.length,"encodedWritableIndexesLength"),v.seq(v.u8(),n.writableIndexes.length,"writableIndexes"),v.blob(i.length,"encodedReadonlyIndexesLength"),v.seq(v.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t],n=yr(e),s=n&Va;vt(n!==s,"Expected versioned message but received legacy message");let i=s;vt(i===0,`Expected versioned message with version 0 but found version ${i}`);let o={numRequiredSignatures:yr(e),numReadonlySignedAccounts:yr(e),numReadonlyUnsignedAccounts:yr(e)},h=[],f=Ne(e);for(let O=0;O<f;O++)h.push(new rt(ze(e,0,Nr)));let b=Se.default.encode(ze(e,0,Nr)),w=Ne(e),k=[];for(let O=0;O<w;O++){let L=yr(e),E=Ne(e),M=ze(e,0,E),U=Ne(e),T=new Uint8Array(ze(e,0,U));k.push({programIdIndex:L,accountKeyIndexes:M,data:T})}let I=Ne(e),B=[];for(let O=0;O<I;O++){let L=new rt(ze(e,0,Nr)),E=Ne(e),M=ze(e,0,E),U=Ne(e),T=ze(e,0,U);B.push({accountKey:L,writableIndexes:M,readonlyIndexes:T})}return new r({header:o,staticAccountKeys:h,recentBlockhash:b,compiledInstructions:k,addressTableLookups:B})}},Cf={deserializeMessageVersion(r){let t=r[0],e=t&Va;return e===t?"legacy":e},deserialize:r=>{let t=Cf.deserializeMessageVersion(r);if(t==="legacy")return ss.from(r);if(t===0)return Oa.deserialize(r);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};var v0=Q.Buffer.alloc(Pi).fill(0),mt=class{constructor(t){this.keys=void 0,this.programId=void 0,this.data=Q.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}},gt=class r{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){let{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){let{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{let{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new mt(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let L=0;L<e.length;L++)if(e[L].programId===void 0)throw new Error(`Transaction instruction index ${L} has undefined program id`);let s=[],i=[];e.forEach(L=>{L.keys.forEach(M=>{i.push({...M})});let E=L.programId.toString();s.includes(E)||s.push(E)}),s.forEach(L=>{i.push({pubkey:new rt(L),isSigner:!1,isWritable:!1})});let o=[];i.forEach(L=>{let E=L.pubkey.toString(),M=o.findIndex(U=>U.pubkey.toString()===E);M>-1?(o[M].isWritable=o[M].isWritable||L.isWritable,o[M].isSigner=o[M].isSigner||L.isSigner):o.push(L)}),o.sort(function(L,E){if(L.isSigner!==E.isSigner)return L.isSigner?-1:1;if(L.isWritable!==E.isWritable)return L.isWritable?-1:1;let M={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return L.pubkey.toBase58().localeCompare(E.pubkey.toBase58(),"en",M)});let h=o.findIndex(L=>L.pubkey.equals(n));if(h>-1){let[L]=o.splice(h,1);L.isSigner=!0,L.isWritable=!0,o.unshift(L)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(let L of this.signatures){let E=o.findIndex(M=>M.pubkey.equals(L.publicKey));if(E>-1)o[E].isSigner||(o[E].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${L.publicKey.toString()}`)}let f=0,b=0,w=0,k=[],I=[];o.forEach(({pubkey:L,isSigner:E,isWritable:M})=>{E?(k.push(L.toString()),f+=1,M||(b+=1)):(I.push(L.toString()),M||(w+=1))});let B=k.concat(I),O=e.map(L=>{let{data:E,programId:M}=L;return{programIdIndex:B.indexOf(M.toString()),accounts:L.keys.map(U=>B.indexOf(U.pubkey.toString())),data:Se.default.encode(E)}});return O.forEach(L=>{vt(L.programIdIndex>=0),L.accounts.forEach(E=>vt(E>=0))}),new ss({header:{numRequiredSignatures:f,numReadonlySignedAccounts:b,numReadonlyUnsignedAccounts:w},accountKeys:B,recentBlockhash:t,instructions:O})}_compile(){let t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");let e=new Set;this.signatures=t.filter(n=>{let s=n.toString();return e.has(s)?!1:(e.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");let e=new Set,n=[];for(let i of t){let o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));let s=this._compile();this._partialSign(s,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");let e=new Set,n=[];for(let i of t){let o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}let s=this._compile();this._partialSign(s,...n)}_partialSign(t,...e){let n=t.serialize();e.forEach(s=>{let i=Ha(n,s.secretKey);this._addSignature(s.publicKey,ut(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){vt(e.length===64);let n=this.signatures.findIndex(s=>t.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=Q.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){let n={};for(let{signature:s,publicKey:i}of this.signatures)s===null?e&&(n.missing||=[]).push(i):d0(s,t,i.toBytes())||(n.invalid||=[]).push(i);return n.invalid||n.missing?n:void 0}serialize(t){let{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(n){let i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(h=>h.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(h=>h.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){let{signatures:e}=this,n=[];Ue(n,e.length);let s=n.length+e.length*64+t.length,i=Q.Buffer.alloc(s);return vt(e.length<256),Q.Buffer.from(n).copy(i,0),e.forEach(({signature:o},h)=>{o!==null&&(vt(o.length===64,"signature has invalid length"),Q.Buffer.from(o).copy(i,n.length+h*64))}),t.copy(i,n.length+e.length*64),vt(i.length<=Jr,`Transaction too large: ${i.length} > ${Jr}`),i}get keys(){return vt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return vt(this.instructions.length===1),this.instructions[0].programId}get data(){return vt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t],n=Ne(e),s=[];for(let i=0;i<n;i++){let o=ze(e,0,Pi);s.push(Se.default.encode(Q.Buffer.from(o)))}return r.populate(ss.from(e),s)}static populate(t,e=[]){let n=new r;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{let o={signature:s==Se.default.encode(v0)?null:Se.default.decode(s),publicKey:t.accountKeys[i]};n.signatures.push(o)}),t.instructions.forEach(s=>{let i=s.accounts.map(o=>{let h=t.accountKeys[o];return{pubkey:h,isSigner:n.signatures.some(f=>f.publicKey.toString()===h.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});n.instructions.push(new mt({keys:i,programId:t.accountKeys[s.programIdIndex],data:Se.default.decode(s.data)}))}),n._message=t,n._json=n.toJSON(),n}};var is=class r{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)vt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{let n=[];for(let s=0;s<t.header.numRequiredSignatures;s++)n.push(new Uint8Array(Pi));this.signatures=n}this.message=t}serialize(){let t=this.message.serialize(),e=Array();Ue(e,this.signatures.length);let n=v.struct([v.blob(e.length,"encodedSignaturesLength"),v.seq(g0(),this.signatures.length,"signatures"),v.blob(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t],n=[],s=Ne(e);for(let o=0;o<s;o++)n.push(new Uint8Array(ze(e,0,Pi)));let i=Cf.deserialize(new Uint8Array(e));return new r(i,n)}sign(t){let e=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let s of t){let i=n.findIndex(o=>o.equals(s.publicKey));vt(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Ha(e,s.secretKey)}}addSignature(t,e){vt(e.byteLength===64,"Signature must be 64 bytes long");let s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));vt(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}},k0=160,S0=64,B0=k0/S0,E0=1e3/B0,pr=new rt("SysvarC1ock11111111111111111111111111111111"),Xg=new rt("SysvarEpochSchedu1e111111111111111111111111"),Qg=new rt("Sysvar1nstructions1111111111111111111111111"),Ea=new rt("SysvarRecentB1ockHashes11111111111111111111"),os=new rt("SysvarRent111111111111111111111111111111111"),tm=new rt("SysvarRewards111111111111111111111111111111"),em=new rt("SysvarS1otHashes111111111111111111111111111"),rm=new rt("SysvarS1otHistory11111111111111111111111111"),Ia=new rt("SysvarStakeHistory1111111111111111111111111"),Na=class extends Error{constructor({action:t,signature:e,transactionMessage:n,logs:s}){let i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.",h;switch(t){case"send":h=`Transaction ${e} resulted in an error. 
${n}. `+i+o;break;case"simulate":h=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:h=`Unknown action '${(f=>f)(t)}'`}super(h),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,n)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){let i=s.meta.logMessages;this.transactionLogs=i,e(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}};async function vf(r,t,e,n){let s=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},i=await r.sendTransaction(t,e,s),o;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)o=(await r.confirmTransaction({abortSignal:n?.abortSignal,signature:i,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){let{nonceInstruction:h}=t.nonceInfo,f=h.keys[0].pubkey;o=(await r.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:t.nonceInfo.nonce,signature:i},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await r.confirmTransaction(i,n&&n.commitment)).value;if(o.err)throw i!=null?new Na({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(o)})`);return i}function I0(r){return new Promise(t=>setTimeout(t,r))}function at(r,t){let e=r.layout.span>=0?r.layout.span:Mf(r,t),n=Q.Buffer.alloc(e),s=Object.assign({instruction:r.index},t);return r.layout.encode(s,n),n}var _0=v.nu64("lamportsPerSignature"),A0=v.struct([v.u32("version"),v.u32("state"),ot("authorizedPubkey"),ot("nonce"),v.struct([_0],"feeCalculator")]),kf=A0.span;var L0=r=>{let t=r.decode.bind(r),e=r.encode.bind(r);return{decode:t,encode:e}},R0=r=>t=>{let e=(0,Rf.blob)(r,t),{encode:n,decode:s}=L0(e),i=e;return i.decode=(o,h)=>{let f=s(o,h);return(0,cs.toBigIntLE)(Q.Buffer.from(f))},i.encode=(o,h,f)=>{let b=(0,cs.toBufferLE)(o,r);return n(b,h,f)},i},En=R0(8);var De=Object.freeze({Create:{index:0,layout:v.struct([v.u32("instruction"),v.ns64("lamports"),v.ns64("space"),ot("programId")])},Assign:{index:1,layout:v.struct([v.u32("instruction"),ot("programId")])},Transfer:{index:2,layout:v.struct([v.u32("instruction"),En("lamports")])},CreateWithSeed:{index:3,layout:v.struct([v.u32("instruction"),ot("base"),Sn("seed"),v.ns64("lamports"),v.ns64("space"),ot("programId")])},AdvanceNonceAccount:{index:4,layout:v.struct([v.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:v.struct([v.u32("instruction"),v.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:v.struct([v.u32("instruction"),ot("authorized")])},AuthorizeNonceAccount:{index:7,layout:v.struct([v.u32("instruction"),ot("authorized")])},Allocate:{index:8,layout:v.struct([v.u32("instruction"),v.ns64("space")])},AllocateWithSeed:{index:9,layout:v.struct([v.u32("instruction"),ot("base"),Sn("seed"),v.ns64("space"),ot("programId")])},AssignWithSeed:{index:10,layout:v.struct([v.u32("instruction"),ot("base"),Sn("seed"),ot("programId")])},TransferWithSeed:{index:11,layout:v.struct([v.u32("instruction"),En("lamports"),Sn("seed"),ot("programId")])},UpgradeNonceAccount:{index:12,layout:v.struct([v.u32("instruction")])}}),Ae=class r{constructor(){}static createAccount(t){let e=De.Create,n=at(e,{lamports:t.lamports,space:t.space,programId:ut(t.programId.toBuffer())});return new mt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let e,n;if("basePubkey"in t){let s=De.TransferWithSeed;e=at(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:ut(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{let s=De.Transfer;e=at(s,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new mt({keys:n,programId:this.programId,data:e})}static assign(t){let e,n;if("basePubkey"in t){let s=De.AssignWithSeed;e=at(s,{base:ut(t.basePubkey.toBuffer()),seed:t.seed,programId:ut(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let s=De.Assign;e=at(s,{programId:ut(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new mt({keys:n,programId:this.programId,data:e})}static createAccountWithSeed(t){let e=De.CreateWithSeed,n=at(e,{base:ut(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:ut(t.programId.toBuffer())}),s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new mt({keys:s,programId:this.programId,data:n})}static createNonceAccount(t){let e=new gt;"basePubkey"in t&&"seed"in t?e.add(r.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:kf,programId:this.programId})):e.add(r.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:kf,programId:this.programId}));let n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(n)),e}static nonceInitialize(t){let e=De.InitializeNonceAccount,n=at(e,{authorized:ut(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ea,isSigner:!1,isWritable:!1},{pubkey:os,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new mt(s)}static nonceAdvance(t){let e=De.AdvanceNonceAccount,n=at(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Ea,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new mt(s)}static nonceWithdraw(t){let e=De.WithdrawNonceAccount,n=at(e,{lamports:t.lamports});return new mt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Ea,isSigner:!1,isWritable:!1},{pubkey:os,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){let e=De.AuthorizeNonceAccount,n=at(e,{authorized:ut(t.newAuthorizedPubkey.toBuffer())});return new mt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let e,n;if("basePubkey"in t){let s=De.AllocateWithSeed;e=at(s,{base:ut(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:ut(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let s=De.Allocate;e=at(s,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new mt({keys:n,programId:this.programId,data:e})}};Ae.programId=new rt("11111111111111111111111111111111");var T0=Jr-300,Ua=class r{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/r.chunkSize)+1+1)}static async load(t,e,n,s,i){{let k=await t.getMinimumBalanceForRentExemption(i.length),I=await t.getAccountInfo(n.publicKey,"confirmed"),B=null;if(I!==null){if(I.executable)return console.error("Program load failed, account is already executable"),!1;I.data.length!==i.length&&(B=B||new gt,B.add(Ae.allocate({accountPubkey:n.publicKey,space:i.length}))),I.owner.equals(s)||(B=B||new gt,B.add(Ae.assign({accountPubkey:n.publicKey,programId:s}))),I.lamports<k&&(B=B||new gt,B.add(Ae.transfer({fromPubkey:e.publicKey,toPubkey:n.publicKey,lamports:k-I.lamports})))}else B=new gt().add(Ae.createAccount({fromPubkey:e.publicKey,newAccountPubkey:n.publicKey,lamports:k>0?k:1,space:i.length,programId:s}));B!==null&&await vf(t,B,[e,n],{commitment:"confirmed"})}let o=v.struct([v.u32("instruction"),v.u32("offset"),v.u32("bytesLength"),v.u32("bytesLengthPadding"),v.seq(v.u8("byte"),v.offset(v.u32(),-8),"bytes")]),h=r.chunkSize,f=0,b=i,w=[];for(;b.length>0;){let k=b.slice(0,h),I=Q.Buffer.alloc(h+16);o.encode({instruction:0,offset:f,bytes:k,bytesLength:0,bytesLengthPadding:0},I);let B=new gt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:I});w.push(vf(t,B,[e,n],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await I0(1e3/4),f+=h,b=b.slice(h)}await Promise.all(w);{let k=v.struct([v.u32("instruction")]),I=Q.Buffer.alloc(k.span);k.encode({instruction:1},I);let B=new gt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:os,isSigner:!1,isWritable:!1}],programId:s,data:I}),O="processed",L=await t.sendTransaction(B,[e,n],{preflightCommitment:O}),{context:E,value:M}=await t.confirmTransaction({signature:L,lastValidBlockHeight:B.lastValidBlockHeight,blockhash:B.recentBlockhash},O);if(M.err)throw new Error(`Transaction ${L} failed (${JSON.stringify(M)})`);for(;;){try{if(await t.getSlot({commitment:O})>E.slot)break}catch{}await new Promise(U=>setTimeout(U,Math.round(E0/2)))}}return!0}};Ua.chunkSize=T0;var nm=new rt("BPFLoader2111111111111111111111111111111111");var sm=globalThis.fetch;var im={index:1,layout:v.struct([v.u32("typeIndex"),En("deactivationSlot"),v.nu64("lastExtendedSlot"),v.u8("lastExtendedStartIndex"),v.u8(),v.seq(ot(),v.offset(v.u8(),-1),"authority")])};var Nt=kn(vi(rt),z(),r=>new rt(r)),Of=ki([z(),Bt("base64")]),$a=kn(vi(Q.Buffer),Of,r=>Q.Buffer.from(r[0],"base64")),om=30*1e3;function Nf(r){return me([C({jsonrpc:Bt("2.0"),id:z(),result:r}),C({jsonrpc:Bt("2.0"),id:z(),error:C({code:Yr(),message:z(),data:J(Ru())})})])}var M0=Nf(Yr());function bt(r){return kn(Nf(r),M0,t=>"error"in t?t:{...t,result:vn(t.result,r)})}function Ge(r){return bt(C({context:C({slot:_()}),value:r}))}function zi(r){return C({context:C({slot:_()}),value:r})}var P0=C({foundation:_(),foundationTerm:_(),initial:_(),taper:_(),terminal:_()}),am=bt(D(K(C({epoch:_(),effectiveSlot:_(),amount:_(),postBalance:_(),commission:J(K(_()))})))),C0=D(C({slot:_(),prioritizationFee:_()})),O0=C({total:_(),validator:_(),foundation:_(),epoch:_()}),N0=C({epoch:_(),slotIndex:_(),slotsInEpoch:_(),absoluteSlot:_(),blockHeight:J(_()),transactionCount:J(_())}),U0=C({slotsPerEpoch:_(),leaderScheduleSlotOffset:_(),warmup:je(),firstNormalEpoch:_(),firstNormalSlot:_()}),z0=fa(z(),D(_())),Xr=K(me([C({}),z()])),W0=C({err:Xr}),F0=Bt("receivedSignature"),cm=C({"solana-core":z(),"feature-set":J(_())}),q0=C({program:z(),programId:Nt,parsed:Yr()}),D0=C({programId:Nt,accounts:D(Nt),data:z()}),um=Ge(C({err:K(me([C({}),z()])),logs:K(D(z())),accounts:J(K(D(K(C({executable:je(),owner:z(),lamports:_(),data:D(z()),rentEpoch:J(_())}))))),unitsConsumed:J(_()),returnData:J(K(C({programId:z(),data:ki([z(),Bt("base64")])}))),innerInstructions:J(K(D(C({index:_(),instructions:D(me([q0,D0]))}))))})),fm=Ge(C({byIdentity:fa(z(),D(_())),range:C({firstSlot:_(),lastSlot:_()})}));var lm=bt(P0),hm=bt(O0),dm=bt(C0),pm=bt(N0),ym=bt(U0),gm=bt(z0),mm=bt(_()),wm=Ge(C({total:_(),circulating:_(),nonCirculating:_(),nonCirculatingAccounts:D(Nt)})),K0=C({amount:z(),uiAmount:K(_()),decimals:_(),uiAmountString:J(z())}),bm=Ge(D(C({address:Nt,amount:z(),uiAmount:K(_()),decimals:_(),uiAmountString:J(z())}))),xm=Ge(D(C({pubkey:Nt,account:C({executable:je(),owner:Nt,lamports:_(),data:$a,rentEpoch:_()})}))),za=C({program:z(),parsed:Yr(),space:_()}),vm=Ge(D(C({pubkey:Nt,account:C({executable:je(),owner:Nt,lamports:_(),data:za,rentEpoch:_()})}))),km=Ge(D(C({lamports:_(),address:Nt}))),ja=C({executable:je(),owner:Nt,lamports:_(),data:$a,rentEpoch:_()}),Sm=C({pubkey:Nt,account:ja}),H0=kn(me([vi(Q.Buffer),za]),me([Of,za]),r=>Array.isArray(r)?vn(r,$a):r),V0=C({executable:je(),owner:Nt,lamports:_(),data:H0,rentEpoch:_()}),Bm=C({pubkey:Nt,account:V0}),Em=C({state:me([Bt("active"),Bt("inactive"),Bt("activating"),Bt("deactivating")]),active:_(),inactive:_()}),Im=bt(D(C({signature:z(),slot:_(),err:Xr,memo:K(z()),blockTime:J(K(_()))}))),_m=bt(D(C({signature:z(),slot:_(),err:Xr,memo:K(z()),blockTime:J(K(_()))}))),Am=C({subscription:_(),result:zi(ja)}),$0=C({pubkey:Nt,account:ja}),Lm=C({subscription:_(),result:zi($0)}),j0=C({parent:_(),slot:_(),root:_()}),Rm=C({subscription:_(),result:j0}),G0=me([C({type:me([Bt("firstShredReceived"),Bt("completed"),Bt("optimisticConfirmation"),Bt("root")]),slot:_(),timestamp:_()}),C({type:Bt("createdBank"),parent:_(),slot:_(),timestamp:_()}),C({type:Bt("frozen"),slot:_(),timestamp:_(),stats:C({numTransactionEntries:_(),numSuccessfulTransactions:_(),numFailedTransactions:_(),maxTransactionsPerEntry:_()})}),C({type:Bt("dead"),slot:_(),timestamp:_(),err:z()})]),Tm=C({subscription:_(),result:G0}),Mm=C({subscription:_(),result:zi(me([W0,F0]))}),Pm=C({subscription:_(),result:_()}),Cm=C({pubkey:z(),gossip:K(z()),tpu:K(z()),rpc:K(z()),version:K(z())}),Sf=C({votePubkey:z(),nodePubkey:z(),activatedStake:_(),epochVoteAccount:je(),epochCredits:D(ki([_(),_(),_()])),commission:_(),lastVote:_(),rootSlot:K(_())}),Om=bt(C({current:D(Sf),delinquent:D(Sf)})),Z0=me([Bt("processed"),Bt("confirmed"),Bt("finalized")]),Y0=C({slot:_(),confirmations:K(_()),err:Xr,confirmationStatus:J(Z0)}),Nm=Ge(D(K(Y0))),Um=bt(_()),Uf=C({accountKey:Nt,writableIndexes:D(_()),readonlyIndexes:D(_())}),Ga=C({signatures:D(z()),message:C({accountKeys:D(z()),header:C({numRequiredSignatures:_(),numReadonlySignedAccounts:_(),numReadonlyUnsignedAccounts:_()}),instructions:D(C({accounts:D(_()),data:z(),programIdIndex:_()})),recentBlockhash:z(),addressTableLookups:J(D(Uf))})}),zf=C({pubkey:Nt,signer:je(),writable:je(),source:J(me([Bt("transaction"),Bt("lookupTable")]))}),Wf=C({accountKeys:D(zf),signatures:D(z())}),Ff=C({parsed:Yr(),program:z(),programId:Nt}),qf=C({accounts:D(Nt),data:z(),programId:Nt}),J0=me([qf,Ff]),X0=me([C({parsed:Yr(),program:z(),programId:z()}),C({accounts:D(z()),data:z(),programId:z()})]),Df=kn(J0,X0,r=>"accounts"in r?vn(r,qf):vn(r,Ff)),Kf=C({signatures:D(z()),message:C({accountKeys:D(zf),instructions:D(Df),recentBlockhash:z(),addressTableLookups:J(K(D(Uf)))})}),Oi=C({accountIndex:_(),mint:z(),owner:J(z()),programId:J(z()),uiTokenAmount:K0}),Hf=C({writable:D(Nt),readonly:D(Nt)}),Wi=C({err:Xr,fee:_(),innerInstructions:J(K(D(C({index:_(),instructions:D(C({accounts:D(_()),data:z(),programIdIndex:_()}))})))),preBalances:D(_()),postBalances:D(_()),logMessages:J(K(D(z()))),preTokenBalances:J(K(D(Oi))),postTokenBalances:J(K(D(Oi))),loadedAddresses:J(Hf),computeUnitsConsumed:J(_())}),Za=C({err:Xr,fee:_(),innerInstructions:J(K(D(C({index:_(),instructions:D(Df)})))),preBalances:D(_()),postBalances:D(_()),logMessages:J(K(D(z()))),preTokenBalances:J(K(D(Oi))),postTokenBalances:J(K(D(Oi))),loadedAddresses:J(Hf),computeUnitsConsumed:J(_())}),_n=me([Bt(0),Bt("legacy")]),Qr=C({pubkey:z(),lamports:_(),postBalance:K(_()),rewardType:K(z()),commission:J(K(_()))}),zm=bt(K(C({blockhash:z(),previousBlockhash:z(),parentSlot:_(),transactions:D(C({transaction:Ga,meta:K(Wi),version:J(_n)})),rewards:J(D(Qr)),blockTime:K(_()),blockHeight:K(_())}))),Wm=bt(K(C({blockhash:z(),previousBlockhash:z(),parentSlot:_(),rewards:J(D(Qr)),blockTime:K(_()),blockHeight:K(_())}))),Fm=bt(K(C({blockhash:z(),previousBlockhash:z(),parentSlot:_(),transactions:D(C({transaction:Wf,meta:K(Wi),version:J(_n)})),rewards:J(D(Qr)),blockTime:K(_()),blockHeight:K(_())}))),qm=bt(K(C({blockhash:z(),previousBlockhash:z(),parentSlot:_(),transactions:D(C({transaction:Kf,meta:K(Za),version:J(_n)})),rewards:J(D(Qr)),blockTime:K(_()),blockHeight:K(_())}))),Dm=bt(K(C({blockhash:z(),previousBlockhash:z(),parentSlot:_(),transactions:D(C({transaction:Wf,meta:K(Za),version:J(_n)})),rewards:J(D(Qr)),blockTime:K(_()),blockHeight:K(_())}))),Km=bt(K(C({blockhash:z(),previousBlockhash:z(),parentSlot:_(),rewards:J(D(Qr)),blockTime:K(_()),blockHeight:K(_())}))),Hm=bt(K(C({blockhash:z(),previousBlockhash:z(),parentSlot:_(),transactions:D(C({transaction:Ga,meta:K(Wi)})),rewards:J(D(Qr)),blockTime:K(_())}))),Vm=bt(K(C({blockhash:z(),previousBlockhash:z(),parentSlot:_(),signatures:D(z()),blockTime:K(_())}))),$m=bt(K(C({slot:_(),meta:K(Wi),blockTime:J(K(_())),transaction:Ga,version:J(_n)}))),jm=bt(K(C({slot:_(),transaction:Kf,meta:K(Za),blockTime:J(K(_())),version:J(_n)}))),Gm=Ge(C({blockhash:z(),lastValidBlockHeight:_()})),Zm=Ge(je()),Q0=C({slot:_(),numTransactions:_(),numSlots:_(),samplePeriodSecs:_()}),Ym=bt(D(Q0)),Jm=Ge(K(C({feeCalculator:C({lamportsPerSignature:_()})}))),Xm=bt(z()),Qm=bt(z()),tp=C({err:Xr,logs:D(z()),signature:z()}),tw=C({result:zi(tp),subscription:_()});var Wa=class r{constructor(t){this._keypair=void 0,this._keypair=t??wf()}static generate(){return new r(wf())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");let n=t.slice(32,64);if(!e||!e.skipValidation){let s=t.slice(0,32),i=Ra(s);for(let o=0;o<32;o++)if(n[o]!==i[o])throw new Error("provided secretKey is invalid")}return new r({publicKey:n,secretKey:t})}static fromSeed(t){let e=Ra(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),new r({publicKey:e,secretKey:n})}get publicKey(){return new rt(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},rs=Object.freeze({CreateLookupTable:{index:0,layout:v.struct([v.u32("instruction"),En("recentSlot"),v.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:v.struct([v.u32("instruction")])},ExtendLookupTable:{index:2,layout:v.struct([v.u32("instruction"),En(),v.seq(ot(),v.offset(v.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:v.struct([v.u32("instruction")])},CloseLookupTable:{index:4,layout:v.struct([v.u32("instruction")])}});var Fa=class{constructor(){}static createLookupTable(t){let[e,n]=rt.findProgramAddressSync([t.authority.toBuffer(),(0,cs.toBufferLE)(BigInt(t.recentSlot),8)],this.programId),s=rs.CreateLookupTable,i=at(s,{recentSlot:BigInt(t.recentSlot),bumpSeed:n}),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Ae.programId,isSigner:!1,isWritable:!1}];return[new mt({programId:this.programId,keys:o,data:i}),e]}static freezeLookupTable(t){let e=rs.FreezeLookupTable,n=at(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new mt({programId:this.programId,keys:s,data:n})}static extendLookupTable(t){let e=rs.ExtendLookupTable,n=at(e,{addresses:t.addresses.map(i=>i.toBytes())}),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&s.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Ae.programId,isSigner:!1,isWritable:!1}),new mt({programId:this.programId,keys:s,data:n})}static deactivateLookupTable(t){let e=rs.DeactivateLookupTable,n=at(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new mt({programId:this.programId,keys:s,data:n})}static closeLookupTable(t){let e=rs.CloseLookupTable,n=at(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new mt({programId:this.programId,keys:s,data:n})}};Fa.programId=new rt("AddressLookupTab1e1111111111111111111111111");var Ti=Object.freeze({RequestUnits:{index:0,layout:v.struct([v.u8("instruction"),v.u32("units"),v.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:v.struct([v.u8("instruction"),v.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:v.struct([v.u8("instruction"),v.u32("units")])},SetComputeUnitPrice:{index:3,layout:v.struct([v.u8("instruction"),En("microLamports")])}}),qa=class{constructor(){}static requestUnits(t){let e=Ti.RequestUnits,n=at(e,t);return new mt({keys:[],programId:this.programId,data:n})}static requestHeapFrame(t){let e=Ti.RequestHeapFrame,n=at(e,t);return new mt({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(t){let e=Ti.SetComputeUnitLimit,n=at(e,t);return new mt({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(t){let e=Ti.SetComputeUnitPrice,n=at(e,{microLamports:BigInt(t.microLamports)});return new mt({keys:[],programId:this.programId,data:n})}};qa.programId=new rt("ComputeBudget111111111111111111111111111111");var Bf=64,Ef=32,If=64,_f=v.struct([v.u8("numSignatures"),v.u8("padding"),v.u16("signatureOffset"),v.u16("signatureInstructionIndex"),v.u16("publicKeyOffset"),v.u16("publicKeyInstructionIndex"),v.u16("messageDataOffset"),v.u16("messageDataSize"),v.u16("messageInstructionIndex")]),Da=class r{constructor(){}static createInstructionWithPublicKey(t){let{publicKey:e,message:n,signature:s,instructionIndex:i}=t;vt(e.length===Ef,`Public Key must be ${Ef} bytes but received ${e.length} bytes`),vt(s.length===If,`Signature must be ${If} bytes but received ${s.length} bytes`);let o=_f.span,h=o+e.length,f=h+s.length,b=1,w=Q.Buffer.alloc(f+n.length),k=i??65535;return _f.encode({numSignatures:b,padding:0,signatureOffset:h,signatureInstructionIndex:k,publicKeyOffset:o,publicKeyInstructionIndex:k,messageDataOffset:f,messageDataSize:n.length,messageInstructionIndex:k},w),w.fill(e,o),w.fill(s,h),w.fill(n,f),new mt({keys:[],programId:r.programId,data:w})}static createInstructionWithPrivateKey(t){let{privateKey:e,message:n,instructionIndex:s}=t;vt(e.length===Bf,`Private key must be ${Bf} bytes but received ${e.length} bytes`);try{let i=Wa.fromSecretKey(e),o=i.publicKey.toBytes(),h=Ha(n,i.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:h,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}};Da.programId=new rt("Ed25519SigVerify111111111111111111111111111");var ep=(r,t)=>{let e=es.sign(r,t);return[e.toCompactRawBytes(),e.recovery]};es.utils.isValidPrivateKey;var rp=es.getPublicKey,Af=32,_a=20,Lf=64,np=11,Aa=v.struct([v.u8("numSignatures"),v.u16("signatureOffset"),v.u8("signatureInstructionIndex"),v.u16("ethAddressOffset"),v.u8("ethAddressInstructionIndex"),v.u16("messageDataOffset"),v.u16("messageDataSize"),v.u8("messageInstructionIndex"),v.blob(20,"ethAddress"),v.blob(64,"signature"),v.u8("recoveryId")]),Ka=class r{constructor(){}static publicKeyToEthAddress(t){vt(t.length===Lf,`Public key must be ${Lf} bytes but received ${t.length} bytes`);try{return Q.Buffer.from(va(ut(t))).slice(-_a)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){let{publicKey:e,message:n,signature:s,recoveryId:i,instructionIndex:o}=t;return r.createInstructionWithEthAddress({ethAddress:r.publicKeyToEthAddress(e),message:n,signature:s,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(t){let{ethAddress:e,message:n,signature:s,recoveryId:i,instructionIndex:o=0}=t,h;typeof e=="string"?e.startsWith("0x")?h=Q.Buffer.from(e.substr(2),"hex"):h=Q.Buffer.from(e,"hex"):h=e,vt(h.length===_a,`Address must be ${_a} bytes but received ${h.length} bytes`);let f=1+np,b=f,w=f+h.length,k=w+s.length+1,I=1,B=Q.Buffer.alloc(Aa.span+n.length);return Aa.encode({numSignatures:I,signatureOffset:w,signatureInstructionIndex:o,ethAddressOffset:b,ethAddressInstructionIndex:o,messageDataOffset:k,messageDataSize:n.length,messageInstructionIndex:o,signature:ut(s),ethAddress:ut(h),recoveryId:i},B),B.fill(ut(n),Aa.span),new mt({keys:[],programId:r.programId,data:B})}static createInstructionWithPrivateKey(t){let{privateKey:e,message:n,instructionIndex:s}=t;vt(e.length===Af,`Private key must be ${Af} bytes but received ${e.length} bytes`);try{let i=ut(e),o=rp(i,!1).slice(1),h=Q.Buffer.from(va(ut(n))),[f,b]=ep(h,i);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:f,recoveryId:b,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}};Ka.programId=new rt("KeccakSecp256k11111111111111111111111111111");var Vf,sp=new rt("StakeConfig11111111111111111111111111111111");var as=class{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}};Vf=as;as.default=new Vf(0,0,rt.default);var Or=Object.freeze({Initialize:{index:0,layout:v.struct([v.u32("instruction"),m0(),w0()])},Authorize:{index:1,layout:v.struct([v.u32("instruction"),ot("newAuthorized"),v.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:v.struct([v.u32("instruction")])},Split:{index:3,layout:v.struct([v.u32("instruction"),v.ns64("lamports")])},Withdraw:{index:4,layout:v.struct([v.u32("instruction"),v.ns64("lamports")])},Deactivate:{index:5,layout:v.struct([v.u32("instruction")])},Merge:{index:7,layout:v.struct([v.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:v.struct([v.u32("instruction"),ot("newAuthorized"),v.u32("stakeAuthorizationType"),Sn("authoritySeed"),ot("authorityOwner")])}}),ew=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),Ni=class{constructor(){}static initialize(t){let{stakePubkey:e,authorized:n,lockup:s}=t,i=s||as.default,o=Or.Initialize,h=at(o,{authorized:{staker:ut(n.staker.toBuffer()),withdrawer:ut(n.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:ut(i.custodian.toBuffer())}}),f={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:os,isSigner:!1,isWritable:!1}],programId:this.programId,data:h};return new mt(f)}static createAccountWithSeed(t){let e=new gt;e.add(Ae.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:n,authorized:s,lockup:i}))}static createAccount(t){let e=new gt;e.add(Ae.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:n,authorized:s,lockup:i}))}static delegate(t){let{stakePubkey:e,authorizedPubkey:n,votePubkey:s}=t,i=Or.Delegate,o=at(i);return new gt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:pr,isSigner:!1,isWritable:!1},{pubkey:Ia,isSigner:!1,isWritable:!1},{pubkey:sp,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(t){let{stakePubkey:e,authorizedPubkey:n,newAuthorizedPubkey:s,stakeAuthorizationType:i,custodianPubkey:o}=t,h=Or.Authorize,f=at(h,{newAuthorized:ut(s.toBuffer()),stakeAuthorizationType:i.index}),b=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:pr,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&b.push({pubkey:o,isSigner:!0,isWritable:!1}),new gt().add({keys:b,programId:this.programId,data:f})}static authorizeWithSeed(t){let{stakePubkey:e,authorityBase:n,authoritySeed:s,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:h,custodianPubkey:f}=t,b=Or.AuthorizeWithSeed,w=at(b,{newAuthorized:ut(o.toBuffer()),stakeAuthorizationType:h.index,authoritySeed:s,authorityOwner:ut(i.toBuffer())}),k=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:pr,isSigner:!1,isWritable:!1}];return f&&k.push({pubkey:f,isSigner:!0,isWritable:!1}),new gt().add({keys:k,programId:this.programId,data:w})}static splitInstruction(t){let{stakePubkey:e,authorizedPubkey:n,splitStakePubkey:s,lamports:i}=t,o=Or.Split,h=at(o,{lamports:i});return new mt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:h})}static split(t,e){let n=new gt;return n.add(Ae.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),n.add(this.splitInstruction(t))}static splitWithSeed(t,e){let{stakePubkey:n,authorizedPubkey:s,splitStakePubkey:i,basePubkey:o,seed:h,lamports:f}=t,b=new gt;return b.add(Ae.allocate({accountPubkey:i,basePubkey:o,seed:h,space:this.space,programId:this.programId})),e&&e>0&&b.add(Ae.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),b.add(this.splitInstruction({stakePubkey:n,authorizedPubkey:s,splitStakePubkey:i,lamports:f}))}static merge(t){let{stakePubkey:e,sourceStakePubKey:n,authorizedPubkey:s}=t,i=Or.Merge,o=at(i);return new gt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:pr,isSigner:!1,isWritable:!1},{pubkey:Ia,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(t){let{stakePubkey:e,authorizedPubkey:n,toPubkey:s,lamports:i,custodianPubkey:o}=t,h=Or.Withdraw,f=at(h,{lamports:i}),b=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:pr,isSigner:!1,isWritable:!1},{pubkey:Ia,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&b.push({pubkey:o,isSigner:!0,isWritable:!1}),new gt().add({keys:b,programId:this.programId,data:f})}static deactivate(t){let{stakePubkey:e,authorizedPubkey:n}=t,s=Or.Deactivate,i=at(s);return new gt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:pr,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}};Ni.programId=new rt("Stake11111111111111111111111111111111111111");Ni.space=200;var ns=Object.freeze({InitializeAccount:{index:0,layout:v.struct([v.u32("instruction"),b0()])},Authorize:{index:1,layout:v.struct([v.u32("instruction"),ot("newAuthorized"),v.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:v.struct([v.u32("instruction"),v.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:v.struct([v.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:v.struct([v.u32("instruction"),x0()])}}),rw=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),Ui=class r{constructor(){}static initializeAccount(t){let{votePubkey:e,nodePubkey:n,voteInit:s}=t,i=ns.InitializeAccount,o=at(i,{voteInit:{nodePubkey:ut(s.nodePubkey.toBuffer()),authorizedVoter:ut(s.authorizedVoter.toBuffer()),authorizedWithdrawer:ut(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),h={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:os,isSigner:!1,isWritable:!1},{pubkey:pr,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new mt(h)}static createAccount(t){let e=new gt;return e.add(Ae.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){let{votePubkey:e,authorizedPubkey:n,newAuthorizedPubkey:s,voteAuthorizationType:i}=t,o=ns.Authorize,h=at(o,{newAuthorized:ut(s.toBuffer()),voteAuthorizationType:i.index}),f=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:pr,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new gt().add({keys:f,programId:this.programId,data:h})}static authorizeWithSeed(t){let{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:h}=t,f=ns.AuthorizeWithSeed,b=at(f,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:ut(n.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:ut(i.toBuffer()),voteAuthorizationType:o.index}}),w=[{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:pr,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new gt().add({keys:w,programId:this.programId,data:b})}static withdraw(t){let{votePubkey:e,authorizedWithdrawerPubkey:n,lamports:s,toPubkey:i}=t,o=ns.Withdraw,h=at(o,{lamports:s}),f=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new gt().add({keys:f,programId:this.programId,data:h})}static safeWithdraw(t,e,n){if(t.lamports>e-n)throw new Error("Withdraw will leave vote account with insufficient funds.");return r.withdraw(t)}static updateValidatorIdentity(t){let{votePubkey:e,authorizedWithdrawerPubkey:n,nodePubkey:s}=t,i=ns.UpdateValidatorIdentity,o=at(i),h=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new gt().add({keys:h,programId:this.programId,data:o})}};Ui.programId=new rt("Vote111111111111111111111111111111111111111");Ui.space=3762;var nw=new rt("Va1idator1nfo111111111111111111111111111111"),sw=C({name:z(),website:J(z()),details:J(z()),iconUrl:J(z()),keybaseUsername:J(z())});var iw=new rt("Vote111111111111111111111111111111111111111"),ow=v.struct([ot("nodePubkey"),ot("authorizedWithdrawer"),v.u8("commission"),v.nu64(),v.seq(v.struct([v.nu64("slot"),v.u32("confirmationCount")]),v.offset(v.u32(),-8),"votes"),v.u8("rootSlotValid"),v.nu64("rootSlot"),v.nu64(),v.seq(v.struct([v.nu64("epoch"),ot("authorizedVoter")]),v.offset(v.u32(),-8),"authorizedVoters"),v.struct([v.seq(v.struct([ot("authorizedPubkey"),v.nu64("epochOfLastAuthorizedSwitch"),v.nu64("targetEpoch")]),32,"buf"),v.nu64("idx"),v.u8("isEmpty")],"priorVoters"),v.nu64(),v.seq(v.struct([v.nu64("epoch"),v.nu64("credits"),v.nu64("prevCredits")]),v.offset(v.u32(),-8),"epochCredits"),v.struct([v.nu64("slot"),v.nu64("timestamp")],"lastTimestamp")]);var Yf=We(js(),1),ie=function(r,t,e,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!s:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,e):s?s.value=e:t.set(r,e),e},$=function(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)},de,Pe,en,rn,tn,us,qi,ft,Di,Ya,Fi,Ja,fs,Xa,$f,jf,Gf,Zf,Ki=class extends _s{constructor({wallet:t}){super(),de.add(this),Pe.set(this,void 0),en.set(this,void 0),rn.set(this,void 0),tn.set(this,void 0),us.set(this,void 0),qi.set(this,void 0),ft.set(this,void 0),Di.set(this,typeof window>"u"||typeof document>"u"?on.Unsupported:on.Installed),Xa.set(this,e=>{if("accounts"in e){let n=$(this,ft,"f").accounts[0];$(this,Pe,"f")&&!$(this,tn,"f")&&n!==$(this,Pe,"f")&&(n?$(this,de,"m",Fi).call(this,n):(this.emit("error",new Ss),$(this,de,"m",Ja).call(this)))}"features"in e&&$(this,de,"m",fs).call(this)}),ie(this,ft,t,"f"),ie(this,Pe,null,"f"),ie(this,en,null,"f"),ie(this,rn,!1,"f"),ie(this,tn,!1,"f"),ie(this,us,$(this,ft,"f").features[bs].on("change",$(this,Xa,"f")),"f"),$(this,de,"m",fs).call(this)}get name(){return $(this,ft,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return $(this,ft,"f").icon}get readyState(){return $(this,Di,"f")}get publicKey(){return $(this,en,"f")}get connecting(){return $(this,rn,"f")}get supportedTransactionVersions(){return $(this,qi,"f")}get wallet(){return $(this,ft,"f")}get standard(){return!0}destroy(){ie(this,Pe,null,"f"),ie(this,en,null,"f"),ie(this,rn,!1,"f"),ie(this,tn,!1,"f");let t=$(this,us,"f");t&&(ie(this,us,null,"f"),t())}async autoConnect(){return $(this,de,"m",Ya).call(this,{silent:!0})}async connect(){return $(this,de,"m",Ya).call(this)}async disconnect(){if(lo in $(this,ft,"f").features)try{ie(this,tn,!0,"f"),await $(this,ft,"f").features[lo].disconnect()}catch(t){this.emit("error",new Bs(t?.message,t))}finally{ie(this,tn,!1,"f")}$(this,de,"m",Ja).call(this)}async sendTransaction(t,e,n={}){try{let s=$(this,Pe,"f");if(!s)throw new nr;let i;if(Ze in $(this,ft,"f").features)if(s.features.includes(Ze))i=Ze;else if(oe in $(this,ft,"f").features&&s.features.includes(oe))i=oe;else throw new rr;else if(oe in $(this,ft,"f").features){if(!s.features.includes(oe))throw new rr;i=oe}else throw new gr;let o=Bc(e.rpcEndpoint);if(!s.chains.includes(o))throw new Mn;try{let{signers:h,...f}=n,b;if(an(t)?(h?.length&&t.sign(h),b=t.serialize()):(t=await this.prepareTransaction(t,e,f),h?.length&&t.partialSign(...h),b=new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))),i===Ze){let[w]=await $(this,ft,"f").features[Ze].signAndSendTransaction({account:s,chain:o,transaction:b,options:{preflightCommitment:Ls(f.preflightCommitment||e.commitment),skipPreflight:f.skipPreflight,maxRetries:f.maxRetries,minContextSlot:f.minContextSlot}});return Yf.default.encode(w.signature)}else{let[w]=await $(this,ft,"f").features[oe].signTransaction({account:s,chain:o,transaction:b,options:{preflightCommitment:Ls(f.preflightCommitment||e.commitment),minContextSlot:f.minContextSlot}});return await e.sendRawTransaction(w.signedTransaction,{...f,preflightCommitment:Ls(f.preflightCommitment||e.commitment)})}}catch(h){throw h instanceof fe?h:new Mn(h?.message,h)}}catch(s){throw this.emit("error",s),s}}};Pe=new WeakMap,en=new WeakMap,rn=new WeakMap,tn=new WeakMap,us=new WeakMap,qi=new WeakMap,ft=new WeakMap,Di=new WeakMap,Xa=new WeakMap,de=new WeakSet,Ya=async function(t){try{if(this.connected||this.connecting)return;if($(this,Di,"f")!==on.Installed)throw new vs;if(ie(this,rn,!0,"f"),!$(this,ft,"f").accounts.length)try{await $(this,ft,"f").features[ws].connect(t)}catch(n){throw new ks(n?.message,n)}let e=$(this,ft,"f").accounts[0];if(!e)throw new rr;$(this,de,"m",Fi).call(this,e)}catch(e){throw this.emit("error",e),e}finally{ie(this,rn,!1,"f")}},Fi=function(t){let e;try{e=new rt(t.address)}catch(n){throw new Es(n?.message,n)}ie(this,Pe,t,"f"),ie(this,en,e,"f"),$(this,de,"m",fs).call(this),this.emit("connect",e)},Ja=function(){ie(this,Pe,null,"f"),ie(this,en,null,"f"),$(this,de,"m",fs).call(this),this.emit("disconnect")},fs=function(){let t=Ze in $(this,ft,"f").features?$(this,ft,"f").features[Ze].supportedTransactionVersions:$(this,ft,"f").features[oe].supportedTransactionVersions;ie(this,qi,gc(t,["legacy"])?null:new Set(t),"f"),oe in $(this,ft,"f").features&&$(this,Pe,"f")?.features.includes(oe)?(this.signTransaction=$(this,de,"m",$f),this.signAllTransactions=$(this,de,"m",jf)):(delete this.signTransaction,delete this.signAllTransactions),cn in $(this,ft,"f").features&&$(this,Pe,"f")?.features.includes(cn)?this.signMessage=$(this,de,"m",Gf):delete this.signMessage,As in $(this,ft,"f").features?this.signIn=$(this,de,"m",Zf):delete this.signIn},$f=async function(t){try{let e=$(this,Pe,"f");if(!e)throw new nr;if(!(oe in $(this,ft,"f").features))throw new gr;if(!e.features.includes(oe))throw new rr;try{let s=(await $(this,ft,"f").features[oe].signTransaction({account:e,transaction:an(t)?t.serialize():new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return an(t)?is.deserialize(s):gt.from(s)}catch(n){throw n instanceof fe?n:new Pn(n?.message,n)}}catch(e){throw this.emit("error",e),e}},jf=async function(t){try{let e=$(this,Pe,"f");if(!e)throw new nr;if(!(oe in $(this,ft,"f").features))throw new gr;if(!e.features.includes(oe))throw new rr;try{let n=await $(this,ft,"f").features[oe].signTransaction(...t.map(s=>({account:e,transaction:an(s)?s.serialize():new Uint8Array(s.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return t.map((s,i)=>{let o=n[i].signedTransaction;return an(s)?is.deserialize(o):gt.from(o)})}catch(n){throw new Pn(n?.message,n)}}catch(e){throw this.emit("error",e),e}},Gf=async function(t){try{let e=$(this,Pe,"f");if(!e)throw new nr;if(!(cn in $(this,ft,"f").features))throw new gr;if(!e.features.includes(cn))throw new rr;try{return(await $(this,ft,"f").features[cn].signMessage({account:e,message:t}))[0].signature}catch(n){throw new Is(n?.message,n)}}catch(e){throw this.emit("error",e),e}},Zf=async function(t={}){try{if(!(As in $(this,ft,"f").features))throw new gr;let e;try{[e]=await $(this,ft,"f").features[As].signIn(t)}catch(n){throw new Cn(n?.message,n)}if(!e)throw new Cn;return $(this,de,"m",Fi).call(this,e.account),e}catch(e){throw this.emit("error",e),e}};var Hi=class{constructor(){this.connectedWallet=null;let{get:t,on:e}=yc();this.wallets=[...this.wrapWalletsWithAdapters(t())],e("register",()=>{this.wallets=[...this.wrapWalletsWithAdapters(t())]}),this.autoConnect()}wrapWalletsWithAdapters(t){return t.filter(xc).map(e=>new Ki({wallet:e}))}async autoConnect(){for(let t of this.wallets)try{await t.autoConnect(),this.connectedWallet=t;return}catch(e){console.error(`Failed to auto connect to wallet ${t.name}`,e)}}async signIn(t){let e=this.wallets.find(s=>s.name===t);if(!e)throw new Error(`Wallet with name ${t} not found`);if(!e.signIn)throw new Error(`Wallet with name ${t} does not support signIn`);this.connectedWallet?.disconnect();let n=await e.signIn();return await e.autoConnect(),this.connectedWallet=e,n}};var Qa=new Hi;function ip(){let r=Qa.wallets.map(t=>({name:t.name,icon:t.icon}));return JSON.stringify(r)}async function op(r){let t=await Qa.signIn(r),e={address:t.account.address,signature:t.signature,message:t.signedMessage};return JSON.stringify(e)}function ap(){return Qa.connectedWallet}window.getWallets=ip;window.signIn=op;window.getConnectedWallet=ap;})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@solana/buffer-layout/lib/Layout.js:
  (**
   * Support for translating between Uint8Array instances and JavaScript
   * native types.
   *
   * {@link module:Layout~Layout|Layout} is the basis of a class
   * hierarchy that associates property names with sequences of encoded
   * bytes.
   *
   * Layouts are supported for these scalar (numeric) types:
   * * {@link module:Layout~UInt|Unsigned integers in little-endian
   *   format} with {@link module:Layout.u8|8-bit}, {@link
   *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
   *   {@link module:Layout.u32|32-bit}, {@link
   *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
   *   format} with {@link module:Layout.u16be|16-bit}, {@link
   *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
   *   {@link module:Layout.u40be|40-bit}, and {@link
   *   module:Layout.u48be|48-bit} representation ranges;
   * * {@link module:Layout~Int|Signed integers in little-endian
   *   format} with {@link module:Layout.s8|8-bit}, {@link
   *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
   *   {@link module:Layout.s32|32-bit}, {@link
   *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~IntBE|Signed integers in big-endian format}
   *   with {@link module:Layout.s16be|16-bit}, {@link
   *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
   *   {@link module:Layout.s40be|40-bit}, and {@link
   *   module:Layout.s48be|48-bit} representation ranges;
   * * 64-bit integral values that decode to an exact (if magnitude is
   *   less than 2^53) or nearby integral Number in {@link
   *   module:Layout.nu64|unsigned little-endian}, {@link
   *   module:Layout.nu64be|unsigned big-endian}, {@link
   *   module:Layout.ns64|signed little-endian}, and {@link
   *   module:Layout.ns64be|unsigned big-endian} encodings;
   * * 32-bit floating point values with {@link
   *   module:Layout.f32|little-endian} and {@link
   *   module:Layout.f32be|big-endian} representations;
   * * 64-bit floating point values with {@link
   *   module:Layout.f64|little-endian} and {@link
   *   module:Layout.f64be|big-endian} representations;
   * * {@link module:Layout.const|Constants} that take no space in the
   *   encoded expression.
   *
   * and for these aggregate types:
   * * {@link module:Layout.seq|Sequence}s of instances of a {@link
   *   module:Layout~Layout|Layout}, with JavaScript representation as
   *   an Array and constant or data-dependent {@link
   *   module:Layout~Sequence#count|length};
   * * {@link module:Layout.struct|Structure}s that aggregate a
   *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
   *   instances, with JavaScript representation as an Object;
   * * {@link module:Layout.union|Union}s that support multiple {@link
   *   module:Layout~VariantLayout|variant layouts} over a fixed
   *   (padded) or variable (not padded) span of bytes, using an
   *   unsigned integer at the start of the data or a separate {@link
   *   module:Layout.unionLayoutDiscriminator|layout element} to
   *   determine which layout to use when interpreting the buffer
   *   contents;
   * * {@link module:Layout.bits|BitStructure}s that contain a sequence
   *   of individual {@link
   *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
   *   16, 24, or 32-bit unsigned integer starting at the least- or
   *   most-significant bit;
   * * {@link module:Layout.cstr|C strings} of varying length;
   * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
   *   module:Layout~Blob#length|length} raw data.
   *
   * All {@link module:Layout~Layout|Layout} instances are immutable
   * after construction, to prevent internal state from becoming
   * inconsistent.
   *
   * @local Layout
   * @local ExternalLayout
   * @local GreedyCount
   * @local OffsetLayout
   * @local UInt
   * @local UIntBE
   * @local Int
   * @local IntBE
   * @local NearUInt64
   * @local NearUInt64BE
   * @local NearInt64
   * @local NearInt64BE
   * @local Float
   * @local FloatBE
   * @local Double
   * @local DoubleBE
   * @local Sequence
   * @local Structure
   * @local UnionDiscriminator
   * @local UnionLayoutDiscriminator
   * @local Union
   * @local VariantLayout
   * @local BitStructure
   * @local BitField
   * @local Boolean
   * @local Blob
   * @local CString
   * @local Constant
   * @local bindConstructorLayout
   * @module Layout
   * @license MIT
   * @author Peter A. Bigot
   * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
   *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
