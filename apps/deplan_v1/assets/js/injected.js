"use strict";(()=>{var sl=Object.create;var co=Object.defineProperty;var al=Object.getOwnPropertyDescriptor;var cl=Object.getOwnPropertyNames;var ul=Object.getPrototypeOf,fl=Object.prototype.hasOwnProperty;var he=(r,t)=>()=>(r&&(t=r(r=0)),t);var st=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),ec=(r,t)=>{for(var e in t)co(r,e,{get:t[e],enumerable:!0})},rc=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of cl(t))!fl.call(r,o)&&o!==e&&co(r,o,{get:()=>t[o],enumerable:!(n=al(t,o))||n.enumerable});return r};var Ae=(r,t,e)=>(e=r!=null?sl(ul(r)):{},rc(t||!r||!r.__esModule?co(e,"default",{value:r,enumerable:!0}):e,r)),nc=r=>rc(co({},"__esModule",{value:!0}),r);var B=he(()=>{});var ac=st((gy,Ji)=>{"use strict";B();var ll=Object.prototype.hasOwnProperty,xe="~";function Sn(){}Object.create&&(Sn.prototype=Object.create(null),new Sn().__proto__||(xe=!1));function hl(r,t,e){this.fn=r,this.context=t,this.once=e||!1}function sc(r,t,e,n,o){if(typeof e!="function")throw new TypeError("The listener must be a function");var i=new hl(e,n||r,o),s=xe?xe+t:t;return r._events[s]?r._events[s].fn?r._events[s]=[r._events[s],i]:r._events[s].push(i):(r._events[s]=i,r._eventsCount++),r}function uo(r,t){--r._eventsCount===0?r._events=new Sn:delete r._events[t]}function de(){this._events=new Sn,this._eventsCount=0}de.prototype.eventNames=function(){var t=[],e,n;if(this._eventsCount===0)return t;for(n in e=this._events)ll.call(e,n)&&t.push(xe?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};de.prototype.listeners=function(t){var e=xe?xe+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,s=new Array(i);o<i;o++)s[o]=n[o].fn;return s};de.prototype.listenerCount=function(t){var e=xe?xe+t:t,n=this._events[e];return n?n.fn?1:n.length:0};de.prototype.emit=function(t,e,n,o,i,s){var l=xe?xe+t:t;if(!this._events[l])return!1;var f=this._events[l],m=arguments.length,v,x;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),m){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,n),!0;case 4:return f.fn.call(f.context,e,n,o),!0;case 5:return f.fn.call(f.context,e,n,o,i),!0;case 6:return f.fn.call(f.context,e,n,o,i,s),!0}for(x=1,v=new Array(m-1);x<m;x++)v[x-1]=arguments[x];f.fn.apply(f.context,v)}else{var M=f.length,E;for(x=0;x<M;x++)switch(f[x].once&&this.removeListener(t,f[x].fn,void 0,!0),m){case 1:f[x].fn.call(f[x].context);break;case 2:f[x].fn.call(f[x].context,e);break;case 3:f[x].fn.call(f[x].context,e,n);break;case 4:f[x].fn.call(f[x].context,e,n,o);break;default:if(!v)for(E=1,v=new Array(m-1);E<m;E++)v[E-1]=arguments[E];f[x].fn.apply(f[x].context,v)}}return!0};de.prototype.on=function(t,e,n){return sc(this,t,e,n,!1)};de.prototype.once=function(t,e,n){return sc(this,t,e,n,!0)};de.prototype.removeListener=function(t,e,n,o){var i=xe?xe+t:t;if(!this._events[i])return this;if(!e)return uo(this,i),this;var s=this._events[i];if(s.fn)s.fn===e&&(!o||s.once)&&(!n||s.context===n)&&uo(this,i);else{for(var l=0,f=[],m=s.length;l<m;l++)(s[l].fn!==e||o&&!s[l].once||n&&s[l].context!==n)&&f.push(s[l]);f.length?this._events[i]=f.length===1?f[0]:f:uo(this,i)}return this};de.prototype.removeAllListeners=function(t){var e;return t?(e=xe?xe+t:t,this._events[e]&&uo(this,e)):(this._events=new Sn,this._eventsCount=0),this};de.prototype.off=de.prototype.removeListener;de.prototype.addListener=de.prototype.on;de.prefixed=xe;de.EventEmitter=de;typeof Ji<"u"&&(Ji.exports=de)});var pc=st(po=>{"use strict";B();po.byteLength=ml;po.toByteArray=wl;po.fromByteArray=Sl;var We=[],Ce=[],gl=typeof Uint8Array<"u"?Uint8Array:Array,rs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Cr=0,hc=rs.length;Cr<hc;++Cr)We[Cr]=rs[Cr],Ce[rs.charCodeAt(Cr)]=Cr;var Cr,hc;Ce[45]=62;Ce[95]=63;function dc(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");e===-1&&(e=t);var n=e===t?0:4-e%4;return[e,n]}function ml(r){var t=dc(r),e=t[0],n=t[1];return(e+n)*3/4-n}function bl(r,t,e){return(t+e)*3/4-e}function wl(r){var t,e=dc(r),n=e[0],o=e[1],i=new gl(bl(r,n,o)),s=0,l=o>0?n-4:n,f;for(f=0;f<l;f+=4)t=Ce[r.charCodeAt(f)]<<18|Ce[r.charCodeAt(f+1)]<<12|Ce[r.charCodeAt(f+2)]<<6|Ce[r.charCodeAt(f+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=t&255;return o===2&&(t=Ce[r.charCodeAt(f)]<<2|Ce[r.charCodeAt(f+1)]>>4,i[s++]=t&255),o===1&&(t=Ce[r.charCodeAt(f)]<<10|Ce[r.charCodeAt(f+1)]<<4|Ce[r.charCodeAt(f+2)]>>2,i[s++]=t>>8&255,i[s++]=t&255),i}function vl(r){return We[r>>18&63]+We[r>>12&63]+We[r>>6&63]+We[r&63]}function xl(r,t,e){for(var n,o=[],i=t;i<e;i+=3)n=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),o.push(vl(n));return o.join("")}function Sl(r){for(var t,e=r.length,n=e%3,o=[],i=16383,s=0,l=e-n;s<l;s+=i)o.push(xl(r,s,s+i>l?l:s+i));return n===1?(t=r[e-1],o.push(We[t>>2]+We[t<<4&63]+"==")):n===2&&(t=(r[e-2]<<8)+r[e-1],o.push(We[t>>10]+We[t>>4&63]+We[t<<2&63]+"=")),o.join("")}});var yc=st(ns=>{B();ns.read=function(r,t,e,n,o){var i,s,l=o*8-n-1,f=(1<<l)-1,m=f>>1,v=-7,x=e?o-1:0,M=e?-1:1,E=r[t+x];for(x+=M,i=E&(1<<-v)-1,E>>=-v,v+=l;v>0;i=i*256+r[t+x],x+=M,v-=8);for(s=i&(1<<-v)-1,i>>=-v,v+=n;v>0;s=s*256+r[t+x],x+=M,v-=8);if(i===0)i=1-m;else{if(i===f)return s?NaN:(E?-1:1)*(1/0);s=s+Math.pow(2,n),i=i-m}return(E?-1:1)*s*Math.pow(2,i-n)};ns.write=function(r,t,e,n,o,i){var s,l,f,m=i*8-o-1,v=(1<<m)-1,x=v>>1,M=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=n?0:i-1,T=n?1:-1,_=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,s=v):(s=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-s))<1&&(s--,f*=2),s+x>=1?t+=M/f:t+=M*Math.pow(2,1-x),t*f>=2&&(s++,f/=2),s+x>=v?(l=0,s=v):s+x>=1?(l=(t*f-1)*Math.pow(2,o),s=s+x):(l=t*Math.pow(2,x-1)*Math.pow(2,o),s=0));o>=8;r[e+E]=l&255,E+=T,l/=256,o-=8);for(s=s<<o|l,m+=o;m>0;r[e+E]=s&255,E+=T,s/=256,m-=8);r[e+E-T]|=_*128}});var En=st(Jr=>{"use strict";B();var os=pc(),Zr=yc(),gc=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Jr.Buffer=P;Jr.SlowBuffer=Al;Jr.INSPECT_MAX_BYTES=50;var yo=2147483647;Jr.kMaxLength=yo;P.TYPED_ARRAY_SUPPORT=kl();!P.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function kl(){try{let r=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(r,t),r.foo()===42}catch{return!1}}Object.defineProperty(P.prototype,"parent",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.buffer}});Object.defineProperty(P.prototype,"offset",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.byteOffset}});function Ye(r){if(r>yo)throw new RangeError('The value "'+r+'" is invalid for option "size"');let t=new Uint8Array(r);return Object.setPrototypeOf(t,P.prototype),t}function P(r,t,e){if(typeof r=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return cs(r)}return vc(r,t,e)}P.poolSize=8192;function vc(r,t,e){if(typeof r=="string")return _l(r,t);if(ArrayBuffer.isView(r))return Bl(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(He(r,ArrayBuffer)||r&&He(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(He(r,SharedArrayBuffer)||r&&He(r.buffer,SharedArrayBuffer)))return ss(r,t,e);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return P.from(n,t,e);let o=Il(r);if(o)return o;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return P.from(r[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}P.from=function(r,t,e){return vc(r,t,e)};Object.setPrototypeOf(P.prototype,Uint8Array.prototype);Object.setPrototypeOf(P,Uint8Array);function xc(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function El(r,t,e){return xc(r),r<=0?Ye(r):t!==void 0?typeof e=="string"?Ye(r).fill(t,e):Ye(r).fill(t):Ye(r)}P.alloc=function(r,t,e){return El(r,t,e)};function cs(r){return xc(r),Ye(r<0?0:us(r)|0)}P.allocUnsafe=function(r){return cs(r)};P.allocUnsafeSlow=function(r){return cs(r)};function _l(r,t){if((typeof t!="string"||t==="")&&(t="utf8"),!P.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let e=Sc(r,t)|0,n=Ye(e),o=n.write(r,t);return o!==e&&(n=n.slice(0,o)),n}function is(r){let t=r.length<0?0:us(r.length)|0,e=Ye(t);for(let n=0;n<t;n+=1)e[n]=r[n]&255;return e}function Bl(r){if(He(r,Uint8Array)){let t=new Uint8Array(r);return ss(t.buffer,t.byteOffset,t.byteLength)}return is(r)}function ss(r,t,e){if(t<0||r.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');let n;return t===void 0&&e===void 0?n=new Uint8Array(r):e===void 0?n=new Uint8Array(r,t):n=new Uint8Array(r,t,e),Object.setPrototypeOf(n,P.prototype),n}function Il(r){if(P.isBuffer(r)){let t=us(r.length)|0,e=Ye(t);return e.length===0||r.copy(e,0,0,t),e}if(r.length!==void 0)return typeof r.length!="number"||ls(r.length)?Ye(0):is(r);if(r.type==="Buffer"&&Array.isArray(r.data))return is(r.data)}function us(r){if(r>=yo)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+yo.toString(16)+" bytes");return r|0}function Al(r){return+r!=r&&(r=0),P.alloc(+r)}P.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==P.prototype};P.compare=function(t,e){if(He(t,Uint8Array)&&(t=P.from(t,t.offset,t.byteLength)),He(e,Uint8Array)&&(e=P.from(e,e.offset,e.byteLength)),!P.isBuffer(t)||!P.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,o=e.length;for(let i=0,s=Math.min(n,o);i<s;++i)if(t[i]!==e[i]){n=t[i],o=e[i];break}return n<o?-1:o<n?1:0};P.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};P.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return P.alloc(0);let n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;let o=P.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){let s=t[n];if(He(s,Uint8Array))i+s.length>o.length?(P.isBuffer(s)||(s=P.from(s)),s.copy(o,i)):Uint8Array.prototype.set.call(o,s,i);else if(P.isBuffer(s))s.copy(o,i);else throw new TypeError('"list" argument must be an Array of Buffers');i+=s.length}return o};function Sc(r,t){if(P.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||He(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let e=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&e===0)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return as(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return Tc(r).length;default:if(o)return n?-1:as(r).length;t=(""+t).toLowerCase(),o=!0}}P.byteLength=Sc;function Rl(r,t,e){let n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(r||(r="utf8");;)switch(r){case"hex":return zl(this,t,e);case"utf8":case"utf-8":return Ec(this,t,e);case"ascii":return Nl(this,t,e);case"latin1":case"binary":return ql(this,t,e);case"base64":return Ol(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Kl(this,t,e);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}P.prototype._isBuffer=!0;function Or(r,t,e){let n=r[t];r[t]=r[e],r[e]=n}P.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)Or(this,e,e+1);return this};P.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)Or(this,e,e+3),Or(this,e+1,e+2);return this};P.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)Or(this,e,e+7),Or(this,e+1,e+6),Or(this,e+2,e+5),Or(this,e+3,e+4);return this};P.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?Ec(this,0,t):Rl.apply(this,arguments)};P.prototype.toLocaleString=P.prototype.toString;P.prototype.equals=function(t){if(!P.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:P.compare(this,t)===0};P.prototype.inspect=function(){let t="",e=Jr.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"};gc&&(P.prototype[gc]=P.prototype.inspect);P.prototype.compare=function(t,e,n,o,i){if(He(t,Uint8Array)&&(t=P.from(t,t.offset,t.byteLength)),!P.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),o===void 0&&(o=0),i===void 0&&(i=this.length),e<0||n>t.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&e>=n)return 0;if(o>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,o>>>=0,i>>>=0,this===t)return 0;let s=i-o,l=n-e,f=Math.min(s,l),m=this.slice(o,i),v=t.slice(e,n);for(let x=0;x<f;++x)if(m[x]!==v[x]){s=m[x],l=v[x];break}return s<l?-1:l<s?1:0};function kc(r,t,e,n,o){if(r.length===0)return-1;if(typeof e=="string"?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,ls(e)&&(e=o?0:r.length-1),e<0&&(e=r.length+e),e>=r.length){if(o)return-1;e=r.length-1}else if(e<0)if(o)e=0;else return-1;if(typeof t=="string"&&(t=P.from(t,n)),P.isBuffer(t))return t.length===0?-1:mc(r,t,e,n,o);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(r,t,e):Uint8Array.prototype.lastIndexOf.call(r,t,e):mc(r,[t],e,n,o);throw new TypeError("val must be string, number or Buffer")}function mc(r,t,e,n,o){let i=1,s=r.length,l=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||t.length<2)return-1;i=2,s/=2,l/=2,e/=2}function f(v,x){return i===1?v[x]:v.readUInt16BE(x*i)}let m;if(o){let v=-1;for(m=e;m<s;m++)if(f(r,m)===f(t,v===-1?0:m-v)){if(v===-1&&(v=m),m-v+1===l)return v*i}else v!==-1&&(m-=m-v),v=-1}else for(e+l>s&&(e=s-l),m=e;m>=0;m--){let v=!0;for(let x=0;x<l;x++)if(f(r,m+x)!==f(t,x)){v=!1;break}if(v)return m}return-1}P.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1};P.prototype.indexOf=function(t,e,n){return kc(this,t,e,n,!0)};P.prototype.lastIndexOf=function(t,e,n){return kc(this,t,e,n,!1)};function Ll(r,t,e,n){e=Number(e)||0;let o=r.length-e;n?(n=Number(n),n>o&&(n=o)):n=o;let i=t.length;n>i/2&&(n=i/2);let s;for(s=0;s<n;++s){let l=parseInt(t.substr(s*2,2),16);if(ls(l))return s;r[e+s]=l}return s}function Tl(r,t,e,n){return go(as(t,r.length-e),r,e,n)}function Ml(r,t,e,n){return go(Hl(t),r,e,n)}function Pl(r,t,e,n){return go(Tc(t),r,e,n)}function Cl(r,t,e,n){return go(Vl(t,r.length-e),r,e,n)}P.prototype.write=function(t,e,n,o){if(e===void 0)o="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")o=e,n=this.length,e=0;else if(isFinite(e))e=e>>>0,isFinite(n)?(n=n>>>0,o===void 0&&(o="utf8")):(o=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let i=this.length-e;if((n===void 0||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");let s=!1;for(;;)switch(o){case"hex":return Ll(this,t,e,n);case"utf8":case"utf-8":return Tl(this,t,e,n);case"ascii":case"latin1":case"binary":return Ml(this,t,e,n);case"base64":return Pl(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Cl(this,t,e,n);default:if(s)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),s=!0}};P.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ol(r,t,e){return t===0&&e===r.length?os.fromByteArray(r):os.fromByteArray(r.slice(t,e))}function Ec(r,t,e){e=Math.min(r.length,e);let n=[],o=t;for(;o<e;){let i=r[o],s=null,l=i>239?4:i>223?3:i>191?2:1;if(o+l<=e){let f,m,v,x;switch(l){case 1:i<128&&(s=i);break;case 2:f=r[o+1],(f&192)===128&&(x=(i&31)<<6|f&63,x>127&&(s=x));break;case 3:f=r[o+1],m=r[o+2],(f&192)===128&&(m&192)===128&&(x=(i&15)<<12|(f&63)<<6|m&63,x>2047&&(x<55296||x>57343)&&(s=x));break;case 4:f=r[o+1],m=r[o+2],v=r[o+3],(f&192)===128&&(m&192)===128&&(v&192)===128&&(x=(i&15)<<18|(f&63)<<12|(m&63)<<6|v&63,x>65535&&x<1114112&&(s=x))}}s===null?(s=65533,l=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),o+=l}return Ul(n)}var bc=4096;function Ul(r){let t=r.length;if(t<=bc)return String.fromCharCode.apply(String,r);let e="",n=0;for(;n<t;)e+=String.fromCharCode.apply(String,r.slice(n,n+=bc));return e}function Nl(r,t,e){let n="";e=Math.min(r.length,e);for(let o=t;o<e;++o)n+=String.fromCharCode(r[o]&127);return n}function ql(r,t,e){let n="";e=Math.min(r.length,e);for(let o=t;o<e;++o)n+=String.fromCharCode(r[o]);return n}function zl(r,t,e){let n=r.length;(!t||t<0)&&(t=0),(!e||e<0||e>n)&&(e=n);let o="";for(let i=t;i<e;++i)o+=$l[r[i]];return o}function Kl(r,t,e){let n=r.slice(t,e),o="";for(let i=0;i<n.length-1;i+=2)o+=String.fromCharCode(n[i]+n[i+1]*256);return o}P.prototype.slice=function(t,e){let n=this.length;t=~~t,e=e===void 0?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);let o=this.subarray(t,e);return Object.setPrototypeOf(o,P.prototype),o};function ce(r,t,e){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+t>e)throw new RangeError("Trying to access beyond buffer length")}P.prototype.readUintLE=P.prototype.readUIntLE=function(t,e,n){t=t>>>0,e=e>>>0,n||ce(t,e,this.length);let o=this[t],i=1,s=0;for(;++s<e&&(i*=256);)o+=this[t+s]*i;return o};P.prototype.readUintBE=P.prototype.readUIntBE=function(t,e,n){t=t>>>0,e=e>>>0,n||ce(t,e,this.length);let o=this[t+--e],i=1;for(;e>0&&(i*=256);)o+=this[t+--e]*i;return o};P.prototype.readUint8=P.prototype.readUInt8=function(t,e){return t=t>>>0,e||ce(t,1,this.length),this[t]};P.prototype.readUint16LE=P.prototype.readUInt16LE=function(t,e){return t=t>>>0,e||ce(t,2,this.length),this[t]|this[t+1]<<8};P.prototype.readUint16BE=P.prototype.readUInt16BE=function(t,e){return t=t>>>0,e||ce(t,2,this.length),this[t]<<8|this[t+1]};P.prototype.readUint32LE=P.prototype.readUInt32LE=function(t,e){return t=t>>>0,e||ce(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};P.prototype.readUint32BE=P.prototype.readUInt32BE=function(t,e){return t=t>>>0,e||ce(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};P.prototype.readBigUInt64LE=hr(function(t){t=t>>>0,Xr(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&kn(t,this.length-8);let o=e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,i=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(o)+(BigInt(i)<<BigInt(32))});P.prototype.readBigUInt64BE=hr(function(t){t=t>>>0,Xr(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&kn(t,this.length-8);let o=e*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],i=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(o)<<BigInt(32))+BigInt(i)});P.prototype.readIntLE=function(t,e,n){t=t>>>0,e=e>>>0,n||ce(t,e,this.length);let o=this[t],i=1,s=0;for(;++s<e&&(i*=256);)o+=this[t+s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o};P.prototype.readIntBE=function(t,e,n){t=t>>>0,e=e>>>0,n||ce(t,e,this.length);let o=e,i=1,s=this[t+--o];for(;o>0&&(i*=256);)s+=this[t+--o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s};P.prototype.readInt8=function(t,e){return t=t>>>0,e||ce(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};P.prototype.readInt16LE=function(t,e){t=t>>>0,e||ce(t,2,this.length);let n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};P.prototype.readInt16BE=function(t,e){t=t>>>0,e||ce(t,2,this.length);let n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};P.prototype.readInt32LE=function(t,e){return t=t>>>0,e||ce(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};P.prototype.readInt32BE=function(t,e){return t=t>>>0,e||ce(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};P.prototype.readBigInt64LE=hr(function(t){t=t>>>0,Xr(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&kn(t,this.length-8);let o=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(o)<<BigInt(32))+BigInt(e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});P.prototype.readBigInt64BE=hr(function(t){t=t>>>0,Xr(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&kn(t,this.length-8);let o=(e<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(o)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)});P.prototype.readFloatLE=function(t,e){return t=t>>>0,e||ce(t,4,this.length),Zr.read(this,t,!0,23,4)};P.prototype.readFloatBE=function(t,e){return t=t>>>0,e||ce(t,4,this.length),Zr.read(this,t,!1,23,4)};P.prototype.readDoubleLE=function(t,e){return t=t>>>0,e||ce(t,8,this.length),Zr.read(this,t,!0,52,8)};P.prototype.readDoubleBE=function(t,e){return t=t>>>0,e||ce(t,8,this.length),Zr.read(this,t,!1,52,8)};function Be(r,t,e,n,o,i){if(!P.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(e+n>r.length)throw new RangeError("Index out of range")}P.prototype.writeUintLE=P.prototype.writeUIntLE=function(t,e,n,o){if(t=+t,e=e>>>0,n=n>>>0,!o){let l=Math.pow(2,8*n)-1;Be(this,t,e,n,l,0)}let i=1,s=0;for(this[e]=t&255;++s<n&&(i*=256);)this[e+s]=t/i&255;return e+n};P.prototype.writeUintBE=P.prototype.writeUIntBE=function(t,e,n,o){if(t=+t,e=e>>>0,n=n>>>0,!o){let l=Math.pow(2,8*n)-1;Be(this,t,e,n,l,0)}let i=n-1,s=1;for(this[e+i]=t&255;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+n};P.prototype.writeUint8=P.prototype.writeUInt8=function(t,e,n){return t=+t,e=e>>>0,n||Be(this,t,e,1,255,0),this[e]=t&255,e+1};P.prototype.writeUint16LE=P.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=e>>>0,n||Be(this,t,e,2,65535,0),this[e]=t&255,this[e+1]=t>>>8,e+2};P.prototype.writeUint16BE=P.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=e>>>0,n||Be(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=t&255,e+2};P.prototype.writeUint32LE=P.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=e>>>0,n||Be(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255,e+4};P.prototype.writeUint32BE=P.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=e>>>0,n||Be(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};function _c(r,t,e,n,o){Lc(t,n,o,r,e,7);let i=Number(t&BigInt(4294967295));r[e++]=i,i=i>>8,r[e++]=i,i=i>>8,r[e++]=i,i=i>>8,r[e++]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return r[e++]=s,s=s>>8,r[e++]=s,s=s>>8,r[e++]=s,s=s>>8,r[e++]=s,e}function Bc(r,t,e,n,o){Lc(t,n,o,r,e,7);let i=Number(t&BigInt(4294967295));r[e+7]=i,i=i>>8,r[e+6]=i,i=i>>8,r[e+5]=i,i=i>>8,r[e+4]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return r[e+3]=s,s=s>>8,r[e+2]=s,s=s>>8,r[e+1]=s,s=s>>8,r[e]=s,e+8}P.prototype.writeBigUInt64LE=hr(function(t,e=0){return _c(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))});P.prototype.writeBigUInt64BE=hr(function(t,e=0){return Bc(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))});P.prototype.writeIntLE=function(t,e,n,o){if(t=+t,e=e>>>0,!o){let f=Math.pow(2,8*n-1);Be(this,t,e,n,f-1,-f)}let i=0,s=1,l=0;for(this[e]=t&255;++i<n&&(s*=256);)t<0&&l===0&&this[e+i-1]!==0&&(l=1),this[e+i]=(t/s>>0)-l&255;return e+n};P.prototype.writeIntBE=function(t,e,n,o){if(t=+t,e=e>>>0,!o){let f=Math.pow(2,8*n-1);Be(this,t,e,n,f-1,-f)}let i=n-1,s=1,l=0;for(this[e+i]=t&255;--i>=0&&(s*=256);)t<0&&l===0&&this[e+i+1]!==0&&(l=1),this[e+i]=(t/s>>0)-l&255;return e+n};P.prototype.writeInt8=function(t,e,n){return t=+t,e=e>>>0,n||Be(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=t&255,e+1};P.prototype.writeInt16LE=function(t,e,n){return t=+t,e=e>>>0,n||Be(this,t,e,2,32767,-32768),this[e]=t&255,this[e+1]=t>>>8,e+2};P.prototype.writeInt16BE=function(t,e,n){return t=+t,e=e>>>0,n||Be(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=t&255,e+2};P.prototype.writeInt32LE=function(t,e,n){return t=+t,e=e>>>0,n||Be(this,t,e,4,2147483647,-2147483648),this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4};P.prototype.writeInt32BE=function(t,e,n){return t=+t,e=e>>>0,n||Be(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};P.prototype.writeBigInt64LE=hr(function(t,e=0){return _c(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});P.prototype.writeBigInt64BE=hr(function(t,e=0){return Bc(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ic(r,t,e,n,o,i){if(e+n>r.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function Ac(r,t,e,n,o){return t=+t,e=e>>>0,o||Ic(r,t,e,4,34028234663852886e22,-34028234663852886e22),Zr.write(r,t,e,n,23,4),e+4}P.prototype.writeFloatLE=function(t,e,n){return Ac(this,t,e,!0,n)};P.prototype.writeFloatBE=function(t,e,n){return Ac(this,t,e,!1,n)};function Rc(r,t,e,n,o){return t=+t,e=e>>>0,o||Ic(r,t,e,8,17976931348623157e292,-17976931348623157e292),Zr.write(r,t,e,n,52,8),e+8}P.prototype.writeDoubleLE=function(t,e,n){return Rc(this,t,e,!0,n)};P.prototype.writeDoubleBE=function(t,e,n){return Rc(this,t,e,!1,n)};P.prototype.copy=function(t,e,n,o){if(!P.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!o&&o!==0&&(o=this.length),e>=t.length&&(e=t.length),e||(e=0),o>0&&o<n&&(o=n),o===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-e<o-n&&(o=t.length-e+n);let i=o-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(e,n,o):Uint8Array.prototype.set.call(t,this.subarray(n,o),e),i};P.prototype.fill=function(t,e,n,o){if(typeof t=="string"){if(typeof e=="string"?(o=e,e=0,n=this.length):typeof n=="string"&&(o=n,n=this.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!P.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(t.length===1){let s=t.charCodeAt(0);(o==="utf8"&&s<128||o==="latin1")&&(t=s)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e=e>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let i;if(typeof t=="number")for(i=e;i<n;++i)this[i]=t;else{let s=P.isBuffer(t)?t:P.from(t,o),l=s.length;if(l===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=s[i%l]}return this};var Yr={};function fs(r,t,e){Yr[r]=class extends e{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(o){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:o,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}fs("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);fs("ERR_INVALID_ARG_TYPE",function(r,t){return`The "${r}" argument must be of type number. Received type ${typeof t}`},TypeError);fs("ERR_OUT_OF_RANGE",function(r,t,e){let n=`The value of "${r}" is out of range.`,o=e;return Number.isInteger(e)&&Math.abs(e)>2**32?o=wc(String(e)):typeof e=="bigint"&&(o=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(o=wc(o)),o+="n"),n+=` It must be ${t}. Received ${o}`,n},RangeError);function wc(r){let t="",e=r.length,n=r[0]==="-"?1:0;for(;e>=n+4;e-=3)t=`_${r.slice(e-3,e)}${t}`;return`${r.slice(0,e)}${t}`}function Dl(r,t,e){Xr(t,"offset"),(r[t]===void 0||r[t+e]===void 0)&&kn(t,r.length-(e+1))}function Lc(r,t,e,n,o,i){if(r>e||r<t){let s=typeof t=="bigint"?"n":"",l;throw i>3?t===0||t===BigInt(0)?l=`>= 0${s} and < 2${s} ** ${(i+1)*8}${s}`:l=`>= -(2${s} ** ${(i+1)*8-1}${s}) and < 2 ** ${(i+1)*8-1}${s}`:l=`>= ${t}${s} and <= ${e}${s}`,new Yr.ERR_OUT_OF_RANGE("value",l,r)}Dl(n,o,i)}function Xr(r,t){if(typeof r!="number")throw new Yr.ERR_INVALID_ARG_TYPE(t,"number",r)}function kn(r,t,e){throw Math.floor(r)!==r?(Xr(r,e),new Yr.ERR_OUT_OF_RANGE(e||"offset","an integer",r)):t<0?new Yr.ERR_BUFFER_OUT_OF_BOUNDS:new Yr.ERR_OUT_OF_RANGE(e||"offset",`>= ${e?1:0} and <= ${t}`,r)}var Fl=/[^+/0-9A-Za-z-_]/g;function Wl(r){if(r=r.split("=")[0],r=r.trim().replace(Fl,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function as(r,t){t=t||1/0;let e,n=r.length,o=null,i=[];for(let s=0;s<n;++s){if(e=r.charCodeAt(s),e>55295&&e<57344){if(!o){if(e>56319){(t-=3)>-1&&i.push(239,191,189);continue}else if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=e;continue}if(e<56320){(t-=3)>-1&&i.push(239,191,189),o=e;continue}e=(o-55296<<10|e-56320)+65536}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,e<128){if((t-=1)<0)break;i.push(e)}else if(e<2048){if((t-=2)<0)break;i.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;i.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;i.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return i}function Hl(r){let t=[];for(let e=0;e<r.length;++e)t.push(r.charCodeAt(e)&255);return t}function Vl(r,t){let e,n,o,i=[];for(let s=0;s<r.length&&!((t-=2)<0);++s)e=r.charCodeAt(s),n=e>>8,o=e%256,i.push(o),i.push(n);return i}function Tc(r){return os.toByteArray(Wl(r))}function go(r,t,e,n){let o;for(o=0;o<n&&!(o+e>=t.length||o>=r.length);++o)t[o+e]=r[o];return o}function He(r,t){return r instanceof t||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===t.name}function ls(r){return r!==r}var $l=function(){let r="0123456789abcdef",t=new Array(256);for(let e=0;e<16;++e){let n=e*16;for(let o=0;o<16;++o)t[n+o]=r[e]+r[o]}return t}();function hr(r){return typeof BigInt>"u"?Gl:r}function Gl(){throw new Error("BigInt not supported")}});var Os=st((Jc,Cs)=>{B();(function(r,t){"use strict";function e(S,a){if(!S)throw new Error(a||"Assertion failed")}function n(S,a){S.super_=a;var u=function(){};u.prototype=a.prototype,S.prototype=new u,S.prototype.constructor=S}function o(S,a,u){if(o.isBN(S))return S;this.negative=0,this.words=null,this.length=0,this.red=null,S!==null&&((a==="le"||a==="be")&&(u=a,a=10),this._init(S||0,a||10,u||"be"))}typeof r=="object"?r.exports=o:t.BN=o,o.BN=o,o.wordSize=26;var i;try{typeof window<"u"&&typeof window.Buffer<"u"?i=window.Buffer:i=En().Buffer}catch{}o.isBN=function(a){return a instanceof o?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===o.wordSize&&Array.isArray(a.words)},o.max=function(a,u){return a.cmp(u)>0?a:u},o.min=function(a,u){return a.cmp(u)<0?a:u},o.prototype._init=function(a,u,h){if(typeof a=="number")return this._initNumber(a,u,h);if(typeof a=="object")return this._initArray(a,u,h);u==="hex"&&(u=16),e(u===(u|0)&&u>=2&&u<=36),a=a.toString().replace(/\s+/g,"");var d=0;a[0]==="-"&&(d++,this.negative=1),d<a.length&&(u===16?this._parseHex(a,d,h):(this._parseBase(a,u,d),h==="le"&&this._initArray(this.toArray(),u,h)))},o.prototype._initNumber=function(a,u,h){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(e(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),u,h)},o.prototype._initArray=function(a,u,h){if(e(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var p,g,w=0;if(h==="be")for(d=a.length-1,p=0;d>=0;d-=3)g=a[d]|a[d-1]<<8|a[d-2]<<16,this.words[p]|=g<<w&67108863,this.words[p+1]=g>>>26-w&67108863,w+=24,w>=26&&(w-=26,p++);else if(h==="le")for(d=0,p=0;d<a.length;d+=3)g=a[d]|a[d+1]<<8|a[d+2]<<16,this.words[p]|=g<<w&67108863,this.words[p+1]=g>>>26-w&67108863,w+=24,w>=26&&(w-=26,p++);return this._strip()};function s(S,a){var u=S.charCodeAt(a);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;e(!1,"Invalid character in "+S)}function l(S,a,u){var h=s(S,u);return u-1>=a&&(h|=s(S,u-1)<<4),h}o.prototype._parseHex=function(a,u,h){this.length=Math.ceil((a.length-u)/6),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var p=0,g=0,w;if(h==="be")for(d=a.length-1;d>=u;d-=2)w=l(a,u,d)<<p,this.words[g]|=w&67108863,p>=18?(p-=18,g+=1,this.words[g]|=w>>>26):p+=8;else{var y=a.length-u;for(d=y%2===0?u+1:u;d<a.length;d+=2)w=l(a,u,d)<<p,this.words[g]|=w&67108863,p>=18?(p-=18,g+=1,this.words[g]|=w>>>26):p+=8}this._strip()};function f(S,a,u,h){for(var d=0,p=0,g=Math.min(S.length,u),w=a;w<g;w++){var y=S.charCodeAt(w)-48;d*=h,y>=49?p=y-49+10:y>=17?p=y-17+10:p=y,e(y>=0&&p<h,"Invalid character"),d+=p}return d}o.prototype._parseBase=function(a,u,h){this.words=[0],this.length=1;for(var d=0,p=1;p<=67108863;p*=u)d++;d--,p=p/u|0;for(var g=a.length-h,w=g%d,y=Math.min(g,g-w)+h,c=0,b=h;b<y;b+=d)c=f(a,b,b+d,u),this.imuln(p),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(w!==0){var U=1;for(c=f(a,b,a.length,u),b=0;b<w;b++)U*=u;this.imuln(U),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},o.prototype.copy=function(a){a.words=new Array(this.length);for(var u=0;u<this.length;u++)a.words[u]=this.words[u];a.length=this.length,a.negative=this.negative,a.red=this.red};function m(S,a){S.words=a.words,S.length=a.length,S.negative=a.negative,S.red=a.red}if(o.prototype._move=function(a){m(a,this)},o.prototype.clone=function(){var a=new o(null);return this.copy(a),a},o.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=v}catch{o.prototype.inspect=v}else o.prototype.inspect=v;function v(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(a,u){a=a||10,u=u|0||1;var h;if(a===16||a==="hex"){h="";for(var d=0,p=0,g=0;g<this.length;g++){var w=this.words[g],y=((w<<d|p)&16777215).toString(16);p=w>>>24-d&16777215,d+=2,d>=26&&(d-=26,g--),p!==0||g!==this.length-1?h=x[6-y.length]+y+h:h=y+h}for(p!==0&&(h=p.toString(16)+h);h.length%u!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(a===(a|0)&&a>=2&&a<=36){var c=M[a],b=E[a];h="";var U=this.clone();for(U.negative=0;!U.isZero();){var D=U.modrn(b).toString(a);U=U.idivn(b),U.isZero()?h=D+h:h=x[c-D.length]+D+h}for(this.isZero()&&(h="0"+h);h.length%u!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}e(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&e(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},o.prototype.toJSON=function(){return this.toString(16,2)},i&&(o.prototype.toBuffer=function(a,u){return this.toArrayLike(i,a,u)}),o.prototype.toArray=function(a,u){return this.toArrayLike(Array,a,u)};var T=function(a,u){return a.allocUnsafe?a.allocUnsafe(u):new a(u)};o.prototype.toArrayLike=function(a,u,h){this._strip();var d=this.byteLength(),p=h||Math.max(1,d);e(d<=p,"byte array longer than desired length"),e(p>0,"Requested array length <= 0");var g=T(a,p),w=u==="le"?"LE":"BE";return this["_toArrayLike"+w](g,d),g},o.prototype._toArrayLikeLE=function(a,u){for(var h=0,d=0,p=0,g=0;p<this.length;p++){var w=this.words[p]<<g|d;a[h++]=w&255,h<a.length&&(a[h++]=w>>8&255),h<a.length&&(a[h++]=w>>16&255),g===6?(h<a.length&&(a[h++]=w>>24&255),d=0,g=0):(d=w>>>24,g+=2)}if(h<a.length)for(a[h++]=d;h<a.length;)a[h++]=0},o.prototype._toArrayLikeBE=function(a,u){for(var h=a.length-1,d=0,p=0,g=0;p<this.length;p++){var w=this.words[p]<<g|d;a[h--]=w&255,h>=0&&(a[h--]=w>>8&255),h>=0&&(a[h--]=w>>16&255),g===6?(h>=0&&(a[h--]=w>>24&255),d=0,g=0):(d=w>>>24,g+=2)}if(h>=0)for(a[h--]=d;h>=0;)a[h--]=0},Math.clz32?o.prototype._countBits=function(a){return 32-Math.clz32(a)}:o.prototype._countBits=function(a){var u=a,h=0;return u>=4096&&(h+=13,u>>>=13),u>=64&&(h+=7,u>>>=7),u>=8&&(h+=4,u>>>=4),u>=2&&(h+=2,u>>>=2),h+u},o.prototype._zeroBits=function(a){if(a===0)return 26;var u=a,h=0;return u&8191||(h+=13,u>>>=13),u&127||(h+=7,u>>>=7),u&15||(h+=4,u>>>=4),u&3||(h+=2,u>>>=2),u&1||h++,h},o.prototype.bitLength=function(){var a=this.words[this.length-1],u=this._countBits(a);return(this.length-1)*26+u};function _(S){for(var a=new Array(S.bitLength()),u=0;u<a.length;u++){var h=u/26|0,d=u%26;a[u]=S.words[h]>>>d&1}return a}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,u=0;u<this.length;u++){var h=this._zeroBits(this.words[u]);if(a+=h,h!==26)break}return a},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},o.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var u=0;u<a.length;u++)this.words[u]=this.words[u]|a.words[u];return this._strip()},o.prototype.ior=function(a){return e((this.negative|a.negative)===0),this.iuor(a)},o.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},o.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},o.prototype.iuand=function(a){var u;this.length>a.length?u=a:u=this;for(var h=0;h<u.length;h++)this.words[h]=this.words[h]&a.words[h];return this.length=u.length,this._strip()},o.prototype.iand=function(a){return e((this.negative|a.negative)===0),this.iuand(a)},o.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},o.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},o.prototype.iuxor=function(a){var u,h;this.length>a.length?(u=this,h=a):(u=a,h=this);for(var d=0;d<h.length;d++)this.words[d]=u.words[d]^h.words[d];if(this!==u)for(;d<u.length;d++)this.words[d]=u.words[d];return this.length=u.length,this._strip()},o.prototype.ixor=function(a){return e((this.negative|a.negative)===0),this.iuxor(a)},o.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},o.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},o.prototype.inotn=function(a){e(typeof a=="number"&&a>=0);var u=Math.ceil(a/26)|0,h=a%26;this._expand(u),h>0&&u--;for(var d=0;d<u;d++)this.words[d]=~this.words[d]&67108863;return h>0&&(this.words[d]=~this.words[d]&67108863>>26-h),this._strip()},o.prototype.notn=function(a){return this.clone().inotn(a)},o.prototype.setn=function(a,u){e(typeof a=="number"&&a>=0);var h=a/26|0,d=a%26;return this._expand(h+1),u?this.words[h]=this.words[h]|1<<d:this.words[h]=this.words[h]&~(1<<d),this._strip()},o.prototype.iadd=function(a){var u;if(this.negative!==0&&a.negative===0)return this.negative=0,u=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,u=this.isub(a),a.negative=1,u._normSign();var h,d;this.length>a.length?(h=this,d=a):(h=a,d=this);for(var p=0,g=0;g<d.length;g++)u=(h.words[g]|0)+(d.words[g]|0)+p,this.words[g]=u&67108863,p=u>>>26;for(;p!==0&&g<h.length;g++)u=(h.words[g]|0)+p,this.words[g]=u&67108863,p=u>>>26;if(this.length=h.length,p!==0)this.words[this.length]=p,this.length++;else if(h!==this)for(;g<h.length;g++)this.words[g]=h.words[g];return this},o.prototype.add=function(a){var u;return a.negative!==0&&this.negative===0?(a.negative=0,u=this.sub(a),a.negative^=1,u):a.negative===0&&this.negative!==0?(this.negative=0,u=a.sub(this),this.negative=1,u):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},o.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var u=this.iadd(a);return a.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var h=this.cmp(a);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var d,p;h>0?(d=this,p=a):(d=a,p=this);for(var g=0,w=0;w<p.length;w++)u=(d.words[w]|0)-(p.words[w]|0)+g,g=u>>26,this.words[w]=u&67108863;for(;g!==0&&w<d.length;w++)u=(d.words[w]|0)+g,g=u>>26,this.words[w]=u&67108863;if(g===0&&w<d.length&&d!==this)for(;w<d.length;w++)this.words[w]=d.words[w];return this.length=Math.max(this.length,w),d!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(a){return this.clone().isub(a)};function I(S,a,u){u.negative=a.negative^S.negative;var h=S.length+a.length|0;u.length=h,h=h-1|0;var d=S.words[0]|0,p=a.words[0]|0,g=d*p,w=g&67108863,y=g/67108864|0;u.words[0]=w;for(var c=1;c<h;c++){for(var b=y>>>26,U=y&67108863,D=Math.min(c,a.length-1),K=Math.max(0,c-S.length+1);K<=D;K++){var V=c-K|0;d=S.words[V]|0,p=a.words[K]|0,g=d*p+U,b+=g/67108864|0,U=g&67108863}u.words[c]=U|0,y=b|0}return y!==0?u.words[c]=y|0:u.length--,u._strip()}var L=function(a,u,h){var d=a.words,p=u.words,g=h.words,w=0,y,c,b,U=d[0]|0,D=U&8191,K=U>>>13,V=d[1]|0,X=V&8191,Q=V>>>13,wt=d[2]|0,rt=wt&8191,nt=wt>>>13,ie=d[3]|0,pt=ie&8191,yt=ie>>>13,lr=d[4]|0,It=lr&8191,Mt=lr>>>13,so=d[5]|0,Pt=so&8191,Ct=so>>>13,wn=d[6]|0,At=wn&8191,kt=wn>>>13,vn=d[7]|0,Rt=vn&8191,Lt=vn>>>13,xn=d[8]|0,Tt=xn&8191,Ot=xn>>>13,ao=d[9]|0,Ut=ao&8191,Nt=ao>>>13,Va=p[0]|0,zt=Va&8191,Kt=Va>>>13,$a=p[1]|0,Dt=$a&8191,Ft=$a>>>13,Ga=p[2]|0,Wt=Ga&8191,Ht=Ga>>>13,ja=p[3]|0,Vt=ja&8191,$t=ja>>>13,Ya=p[4]|0,Gt=Ya&8191,jt=Ya>>>13,Za=p[5]|0,Yt=Za&8191,Zt=Za>>>13,Xa=p[6]|0,Xt=Xa&8191,Jt=Xa>>>13,Ja=p[7]|0,Qt=Ja&8191,te=Ja>>>13,Qa=p[8]|0,ee=Qa&8191,re=Qa>>>13,tc=p[9]|0,ne=tc&8191,oe=tc>>>13;h.negative=a.negative^u.negative,h.length=19,y=Math.imul(D,zt),c=Math.imul(D,Kt),c=c+Math.imul(K,zt)|0,b=Math.imul(K,Kt);var Mi=(w+y|0)+((c&8191)<<13)|0;w=(b+(c>>>13)|0)+(Mi>>>26)|0,Mi&=67108863,y=Math.imul(X,zt),c=Math.imul(X,Kt),c=c+Math.imul(Q,zt)|0,b=Math.imul(Q,Kt),y=y+Math.imul(D,Dt)|0,c=c+Math.imul(D,Ft)|0,c=c+Math.imul(K,Dt)|0,b=b+Math.imul(K,Ft)|0;var Pi=(w+y|0)+((c&8191)<<13)|0;w=(b+(c>>>13)|0)+(Pi>>>26)|0,Pi&=67108863,y=Math.imul(rt,zt),c=Math.imul(rt,Kt),c=c+Math.imul(nt,zt)|0,b=Math.imul(nt,Kt),y=y+Math.imul(X,Dt)|0,c=c+Math.imul(X,Ft)|0,c=c+Math.imul(Q,Dt)|0,b=b+Math.imul(Q,Ft)|0,y=y+Math.imul(D,Wt)|0,c=c+Math.imul(D,Ht)|0,c=c+Math.imul(K,Wt)|0,b=b+Math.imul(K,Ht)|0;var Ci=(w+y|0)+((c&8191)<<13)|0;w=(b+(c>>>13)|0)+(Ci>>>26)|0,Ci&=67108863,y=Math.imul(pt,zt),c=Math.imul(pt,Kt),c=c+Math.imul(yt,zt)|0,b=Math.imul(yt,Kt),y=y+Math.imul(rt,Dt)|0,c=c+Math.imul(rt,Ft)|0,c=c+Math.imul(nt,Dt)|0,b=b+Math.imul(nt,Ft)|0,y=y+Math.imul(X,Wt)|0,c=c+Math.imul(X,Ht)|0,c=c+Math.imul(Q,Wt)|0,b=b+Math.imul(Q,Ht)|0,y=y+Math.imul(D,Vt)|0,c=c+Math.imul(D,$t)|0,c=c+Math.imul(K,Vt)|0,b=b+Math.imul(K,$t)|0;var Oi=(w+y|0)+((c&8191)<<13)|0;w=(b+(c>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,y=Math.imul(It,zt),c=Math.imul(It,Kt),c=c+Math.imul(Mt,zt)|0,b=Math.imul(Mt,Kt),y=y+Math.imul(pt,Dt)|0,c=c+Math.imul(pt,Ft)|0,c=c+Math.imul(yt,Dt)|0,b=b+Math.imul(yt,Ft)|0,y=y+Math.imul(rt,Wt)|0,c=c+Math.imul(rt,Ht)|0,c=c+Math.imul(nt,Wt)|0,b=b+Math.imul(nt,Ht)|0,y=y+Math.imul(X,Vt)|0,c=c+Math.imul(X,$t)|0,c=c+Math.imul(Q,Vt)|0,b=b+Math.imul(Q,$t)|0,y=y+Math.imul(D,Gt)|0,c=c+Math.imul(D,jt)|0,c=c+Math.imul(K,Gt)|0,b=b+Math.imul(K,jt)|0;var Ui=(w+y|0)+((c&8191)<<13)|0;w=(b+(c>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,y=Math.imul(Pt,zt),c=Math.imul(Pt,Kt),c=c+Math.imul(Ct,zt)|0,b=Math.imul(Ct,Kt),y=y+Math.imul(It,Dt)|0,c=c+Math.imul(It,Ft)|0,c=c+Math.imul(Mt,Dt)|0,b=b+Math.imul(Mt,Ft)|0,y=y+Math.imul(pt,Wt)|0,c=c+Math.imul(pt,Ht)|0,c=c+Math.imul(yt,Wt)|0,b=b+Math.imul(yt,Ht)|0,y=y+Math.imul(rt,Vt)|0,c=c+Math.imul(rt,$t)|0,c=c+Math.imul(nt,Vt)|0,b=b+Math.imul(nt,$t)|0,y=y+Math.imul(X,Gt)|0,c=c+Math.imul(X,jt)|0,c=c+Math.imul(Q,Gt)|0,b=b+Math.imul(Q,jt)|0,y=y+Math.imul(D,Yt)|0,c=c+Math.imul(D,Zt)|0,c=c+Math.imul(K,Yt)|0,b=b+Math.imul(K,Zt)|0;var Ni=(w+y|0)+((c&8191)<<13)|0;w=(b+(c>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,y=Math.imul(At,zt),c=Math.imul(At,Kt),c=c+Math.imul(kt,zt)|0,b=Math.imul(kt,Kt),y=y+Math.imul(Pt,Dt)|0,c=c+Math.imul(Pt,Ft)|0,c=c+Math.imul(Ct,Dt)|0,b=b+Math.imul(Ct,Ft)|0,y=y+Math.imul(It,Wt)|0,c=c+Math.imul(It,Ht)|0,c=c+Math.imul(Mt,Wt)|0,b=b+Math.imul(Mt,Ht)|0,y=y+Math.imul(pt,Vt)|0,c=c+Math.imul(pt,$t)|0,c=c+Math.imul(yt,Vt)|0,b=b+Math.imul(yt,$t)|0,y=y+Math.imul(rt,Gt)|0,c=c+Math.imul(rt,jt)|0,c=c+Math.imul(nt,Gt)|0,b=b+Math.imul(nt,jt)|0,y=y+Math.imul(X,Yt)|0,c=c+Math.imul(X,Zt)|0,c=c+Math.imul(Q,Yt)|0,b=b+Math.imul(Q,Zt)|0,y=y+Math.imul(D,Xt)|0,c=c+Math.imul(D,Jt)|0,c=c+Math.imul(K,Xt)|0,b=b+Math.imul(K,Jt)|0;var qi=(w+y|0)+((c&8191)<<13)|0;w=(b+(c>>>13)|0)+(qi>>>26)|0,qi&=67108863,y=Math.imul(Rt,zt),c=Math.imul(Rt,Kt),c=c+Math.imul(Lt,zt)|0,b=Math.imul(Lt,Kt),y=y+Math.imul(At,Dt)|0,c=c+Math.imul(At,Ft)|0,c=c+Math.imul(kt,Dt)|0,b=b+Math.imul(kt,Ft)|0,y=y+Math.imul(Pt,Wt)|0,c=c+Math.imul(Pt,Ht)|0,c=c+Math.imul(Ct,Wt)|0,b=b+Math.imul(Ct,Ht)|0,y=y+Math.imul(It,Vt)|0,c=c+Math.imul(It,$t)|0,c=c+Math.imul(Mt,Vt)|0,b=b+Math.imul(Mt,$t)|0,y=y+Math.imul(pt,Gt)|0,c=c+Math.imul(pt,jt)|0,c=c+Math.imul(yt,Gt)|0,b=b+Math.imul(yt,jt)|0,y=y+Math.imul(rt,Yt)|0,c=c+Math.imul(rt,Zt)|0,c=c+Math.imul(nt,Yt)|0,b=b+Math.imul(nt,Zt)|0,y=y+Math.imul(X,Xt)|0,c=c+Math.imul(X,Jt)|0,c=c+Math.imul(Q,Xt)|0,b=b+Math.imul(Q,Jt)|0,y=y+Math.imul(D,Qt)|0,c=c+Math.imul(D,te)|0,c=c+Math.imul(K,Qt)|0,b=b+Math.imul(K,te)|0;var zi=(w+y|0)+((c&8191)<<13)|0;w=(b+(c>>>13)|0)+(zi>>>26)|0,zi&=67108863,y=Math.imul(Tt,zt),c=Math.imul(Tt,Kt),c=c+Math.imul(Ot,zt)|0,b=Math.imul(Ot,Kt),y=y+Math.imul(Rt,Dt)|0,c=c+Math.imul(Rt,Ft)|0,c=c+Math.imul(Lt,Dt)|0,b=b+Math.imul(Lt,Ft)|0,y=y+Math.imul(At,Wt)|0,c=c+Math.imul(At,Ht)|0,c=c+Math.imul(kt,Wt)|0,b=b+Math.imul(kt,Ht)|0,y=y+Math.imul(Pt,Vt)|0,c=c+Math.imul(Pt,$t)|0,c=c+Math.imul(Ct,Vt)|0,b=b+Math.imul(Ct,$t)|0,y=y+Math.imul(It,Gt)|0,c=c+Math.imul(It,jt)|0,c=c+Math.imul(Mt,Gt)|0,b=b+Math.imul(Mt,jt)|0,y=y+Math.imul(pt,Yt)|0,c=c+Math.imul(pt,Zt)|0,c=c+Math.imul(yt,Yt)|0,b=b+Math.imul(yt,Zt)|0,y=y+Math.imul(rt,Xt)|0,c=c+Math.imul(rt,Jt)|0,c=c+Math.imul(nt,Xt)|0,b=b+Math.imul(nt,Jt)|0,y=y+Math.imul(X,Qt)|0,c=c+Math.imul(X,te)|0,c=c+Math.imul(Q,Qt)|0,b=b+Math.imul(Q,te)|0,y=y+Math.imul(D,ee)|0,c=c+Math.imul(D,re)|0,c=c+Math.imul(K,ee)|0,b=b+Math.imul(K,re)|0;var Ki=(w+y|0)+((c&8191)<<13)|0;w=(b+(c>>>13)|0)+(Ki>>>26)|0,Ki&=67108863,y=Math.imul(Ut,zt),c=Math.imul(Ut,Kt),c=c+Math.imul(Nt,zt)|0,b=Math.imul(Nt,Kt),y=y+Math.imul(Tt,Dt)|0,c=c+Math.imul(Tt,Ft)|0,c=c+Math.imul(Ot,Dt)|0,b=b+Math.imul(Ot,Ft)|0,y=y+Math.imul(Rt,Wt)|0,c=c+Math.imul(Rt,Ht)|0,c=c+Math.imul(Lt,Wt)|0,b=b+Math.imul(Lt,Ht)|0,y=y+Math.imul(At,Vt)|0,c=c+Math.imul(At,$t)|0,c=c+Math.imul(kt,Vt)|0,b=b+Math.imul(kt,$t)|0,y=y+Math.imul(Pt,Gt)|0,c=c+Math.imul(Pt,jt)|0,c=c+Math.imul(Ct,Gt)|0,b=b+Math.imul(Ct,jt)|0,y=y+Math.imul(It,Yt)|0,c=c+Math.imul(It,Zt)|0,c=c+Math.imul(Mt,Yt)|0,b=b+Math.imul(Mt,Zt)|0,y=y+Math.imul(pt,Xt)|0,c=c+Math.imul(pt,Jt)|0,c=c+Math.imul(yt,Xt)|0,b=b+Math.imul(yt,Jt)|0,y=y+Math.imul(rt,Qt)|0,c=c+Math.imul(rt,te)|0,c=c+Math.imul(nt,Qt)|0,b=b+Math.imul(nt,te)|0,y=y+Math.imul(X,ee)|0,c=c+Math.imul(X,re)|0,c=c+Math.imul(Q,ee)|0,b=b+Math.imul(Q,re)|0,y=y+Math.imul(D,ne)|0,c=c+Math.imul(D,oe)|0,c=c+Math.imul(K,ne)|0,b=b+Math.imul(K,oe)|0;var Di=(w+y|0)+((c&8191)<<13)|0;w=(b+(c>>>13)|0)+(Di>>>26)|0,Di&=67108863,y=Math.imul(Ut,Dt),c=Math.imul(Ut,Ft),c=c+Math.imul(Nt,Dt)|0,b=Math.imul(Nt,Ft),y=y+Math.imul(Tt,Wt)|0,c=c+Math.imul(Tt,Ht)|0,c=c+Math.imul(Ot,Wt)|0,b=b+Math.imul(Ot,Ht)|0,y=y+Math.imul(Rt,Vt)|0,c=c+Math.imul(Rt,$t)|0,c=c+Math.imul(Lt,Vt)|0,b=b+Math.imul(Lt,$t)|0,y=y+Math.imul(At,Gt)|0,c=c+Math.imul(At,jt)|0,c=c+Math.imul(kt,Gt)|0,b=b+Math.imul(kt,jt)|0,y=y+Math.imul(Pt,Yt)|0,c=c+Math.imul(Pt,Zt)|0,c=c+Math.imul(Ct,Yt)|0,b=b+Math.imul(Ct,Zt)|0,y=y+Math.imul(It,Xt)|0,c=c+Math.imul(It,Jt)|0,c=c+Math.imul(Mt,Xt)|0,b=b+Math.imul(Mt,Jt)|0,y=y+Math.imul(pt,Qt)|0,c=c+Math.imul(pt,te)|0,c=c+Math.imul(yt,Qt)|0,b=b+Math.imul(yt,te)|0,y=y+Math.imul(rt,ee)|0,c=c+Math.imul(rt,re)|0,c=c+Math.imul(nt,ee)|0,b=b+Math.imul(nt,re)|0,y=y+Math.imul(X,ne)|0,c=c+Math.imul(X,oe)|0,c=c+Math.imul(Q,ne)|0,b=b+Math.imul(Q,oe)|0;var Fi=(w+y|0)+((c&8191)<<13)|0;w=(b+(c>>>13)|0)+(Fi>>>26)|0,Fi&=67108863,y=Math.imul(Ut,Wt),c=Math.imul(Ut,Ht),c=c+Math.imul(Nt,Wt)|0,b=Math.imul(Nt,Ht),y=y+Math.imul(Tt,Vt)|0,c=c+Math.imul(Tt,$t)|0,c=c+Math.imul(Ot,Vt)|0,b=b+Math.imul(Ot,$t)|0,y=y+Math.imul(Rt,Gt)|0,c=c+Math.imul(Rt,jt)|0,c=c+Math.imul(Lt,Gt)|0,b=b+Math.imul(Lt,jt)|0,y=y+Math.imul(At,Yt)|0,c=c+Math.imul(At,Zt)|0,c=c+Math.imul(kt,Yt)|0,b=b+Math.imul(kt,Zt)|0,y=y+Math.imul(Pt,Xt)|0,c=c+Math.imul(Pt,Jt)|0,c=c+Math.imul(Ct,Xt)|0,b=b+Math.imul(Ct,Jt)|0,y=y+Math.imul(It,Qt)|0,c=c+Math.imul(It,te)|0,c=c+Math.imul(Mt,Qt)|0,b=b+Math.imul(Mt,te)|0,y=y+Math.imul(pt,ee)|0,c=c+Math.imul(pt,re)|0,c=c+Math.imul(yt,ee)|0,b=b+Math.imul(yt,re)|0,y=y+Math.imul(rt,ne)|0,c=c+Math.imul(rt,oe)|0,c=c+Math.imul(nt,ne)|0,b=b+Math.imul(nt,oe)|0;var Wi=(w+y|0)+((c&8191)<<13)|0;w=(b+(c>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,y=Math.imul(Ut,Vt),c=Math.imul(Ut,$t),c=c+Math.imul(Nt,Vt)|0,b=Math.imul(Nt,$t),y=y+Math.imul(Tt,Gt)|0,c=c+Math.imul(Tt,jt)|0,c=c+Math.imul(Ot,Gt)|0,b=b+Math.imul(Ot,jt)|0,y=y+Math.imul(Rt,Yt)|0,c=c+Math.imul(Rt,Zt)|0,c=c+Math.imul(Lt,Yt)|0,b=b+Math.imul(Lt,Zt)|0,y=y+Math.imul(At,Xt)|0,c=c+Math.imul(At,Jt)|0,c=c+Math.imul(kt,Xt)|0,b=b+Math.imul(kt,Jt)|0,y=y+Math.imul(Pt,Qt)|0,c=c+Math.imul(Pt,te)|0,c=c+Math.imul(Ct,Qt)|0,b=b+Math.imul(Ct,te)|0,y=y+Math.imul(It,ee)|0,c=c+Math.imul(It,re)|0,c=c+Math.imul(Mt,ee)|0,b=b+Math.imul(Mt,re)|0,y=y+Math.imul(pt,ne)|0,c=c+Math.imul(pt,oe)|0,c=c+Math.imul(yt,ne)|0,b=b+Math.imul(yt,oe)|0;var Hi=(w+y|0)+((c&8191)<<13)|0;w=(b+(c>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,y=Math.imul(Ut,Gt),c=Math.imul(Ut,jt),c=c+Math.imul(Nt,Gt)|0,b=Math.imul(Nt,jt),y=y+Math.imul(Tt,Yt)|0,c=c+Math.imul(Tt,Zt)|0,c=c+Math.imul(Ot,Yt)|0,b=b+Math.imul(Ot,Zt)|0,y=y+Math.imul(Rt,Xt)|0,c=c+Math.imul(Rt,Jt)|0,c=c+Math.imul(Lt,Xt)|0,b=b+Math.imul(Lt,Jt)|0,y=y+Math.imul(At,Qt)|0,c=c+Math.imul(At,te)|0,c=c+Math.imul(kt,Qt)|0,b=b+Math.imul(kt,te)|0,y=y+Math.imul(Pt,ee)|0,c=c+Math.imul(Pt,re)|0,c=c+Math.imul(Ct,ee)|0,b=b+Math.imul(Ct,re)|0,y=y+Math.imul(It,ne)|0,c=c+Math.imul(It,oe)|0,c=c+Math.imul(Mt,ne)|0,b=b+Math.imul(Mt,oe)|0;var Vi=(w+y|0)+((c&8191)<<13)|0;w=(b+(c>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,y=Math.imul(Ut,Yt),c=Math.imul(Ut,Zt),c=c+Math.imul(Nt,Yt)|0,b=Math.imul(Nt,Zt),y=y+Math.imul(Tt,Xt)|0,c=c+Math.imul(Tt,Jt)|0,c=c+Math.imul(Ot,Xt)|0,b=b+Math.imul(Ot,Jt)|0,y=y+Math.imul(Rt,Qt)|0,c=c+Math.imul(Rt,te)|0,c=c+Math.imul(Lt,Qt)|0,b=b+Math.imul(Lt,te)|0,y=y+Math.imul(At,ee)|0,c=c+Math.imul(At,re)|0,c=c+Math.imul(kt,ee)|0,b=b+Math.imul(kt,re)|0,y=y+Math.imul(Pt,ne)|0,c=c+Math.imul(Pt,oe)|0,c=c+Math.imul(Ct,ne)|0,b=b+Math.imul(Ct,oe)|0;var $i=(w+y|0)+((c&8191)<<13)|0;w=(b+(c>>>13)|0)+($i>>>26)|0,$i&=67108863,y=Math.imul(Ut,Xt),c=Math.imul(Ut,Jt),c=c+Math.imul(Nt,Xt)|0,b=Math.imul(Nt,Jt),y=y+Math.imul(Tt,Qt)|0,c=c+Math.imul(Tt,te)|0,c=c+Math.imul(Ot,Qt)|0,b=b+Math.imul(Ot,te)|0,y=y+Math.imul(Rt,ee)|0,c=c+Math.imul(Rt,re)|0,c=c+Math.imul(Lt,ee)|0,b=b+Math.imul(Lt,re)|0,y=y+Math.imul(At,ne)|0,c=c+Math.imul(At,oe)|0,c=c+Math.imul(kt,ne)|0,b=b+Math.imul(kt,oe)|0;var Gi=(w+y|0)+((c&8191)<<13)|0;w=(b+(c>>>13)|0)+(Gi>>>26)|0,Gi&=67108863,y=Math.imul(Ut,Qt),c=Math.imul(Ut,te),c=c+Math.imul(Nt,Qt)|0,b=Math.imul(Nt,te),y=y+Math.imul(Tt,ee)|0,c=c+Math.imul(Tt,re)|0,c=c+Math.imul(Ot,ee)|0,b=b+Math.imul(Ot,re)|0,y=y+Math.imul(Rt,ne)|0,c=c+Math.imul(Rt,oe)|0,c=c+Math.imul(Lt,ne)|0,b=b+Math.imul(Lt,oe)|0;var ji=(w+y|0)+((c&8191)<<13)|0;w=(b+(c>>>13)|0)+(ji>>>26)|0,ji&=67108863,y=Math.imul(Ut,ee),c=Math.imul(Ut,re),c=c+Math.imul(Nt,ee)|0,b=Math.imul(Nt,re),y=y+Math.imul(Tt,ne)|0,c=c+Math.imul(Tt,oe)|0,c=c+Math.imul(Ot,ne)|0,b=b+Math.imul(Ot,oe)|0;var Yi=(w+y|0)+((c&8191)<<13)|0;w=(b+(c>>>13)|0)+(Yi>>>26)|0,Yi&=67108863,y=Math.imul(Ut,ne),c=Math.imul(Ut,oe),c=c+Math.imul(Nt,ne)|0,b=Math.imul(Nt,oe);var Zi=(w+y|0)+((c&8191)<<13)|0;return w=(b+(c>>>13)|0)+(Zi>>>26)|0,Zi&=67108863,g[0]=Mi,g[1]=Pi,g[2]=Ci,g[3]=Oi,g[4]=Ui,g[5]=Ni,g[6]=qi,g[7]=zi,g[8]=Ki,g[9]=Di,g[10]=Fi,g[11]=Wi,g[12]=Hi,g[13]=Vi,g[14]=$i,g[15]=Gi,g[16]=ji,g[17]=Yi,g[18]=Zi,w!==0&&(g[19]=w,h.length++),h};Math.imul||(L=I);function N(S,a,u){u.negative=a.negative^S.negative,u.length=S.length+a.length;for(var h=0,d=0,p=0;p<u.length-1;p++){var g=d;d=0;for(var w=h&67108863,y=Math.min(p,a.length-1),c=Math.max(0,p-S.length+1);c<=y;c++){var b=p-c,U=S.words[b]|0,D=a.words[c]|0,K=U*D,V=K&67108863;g=g+(K/67108864|0)|0,V=V+w|0,w=V&67108863,g=g+(V>>>26)|0,d+=g>>>26,g&=67108863}u.words[p]=w,h=g,g=d}return h!==0?u.words[p]=h:u.length--,u._strip()}function C(S,a,u){return N(S,a,u)}o.prototype.mulTo=function(a,u){var h,d=this.length+a.length;return this.length===10&&a.length===10?h=L(this,a,u):d<63?h=I(this,a,u):d<1024?h=N(this,a,u):h=C(this,a,u),h};function F(S,a){this.x=S,this.y=a}F.prototype.makeRBT=function(a){for(var u=new Array(a),h=o.prototype._countBits(a)-1,d=0;d<a;d++)u[d]=this.revBin(d,h,a);return u},F.prototype.revBin=function(a,u,h){if(a===0||a===h-1)return a;for(var d=0,p=0;p<u;p++)d|=(a&1)<<u-p-1,a>>=1;return d},F.prototype.permute=function(a,u,h,d,p,g){for(var w=0;w<g;w++)d[w]=u[a[w]],p[w]=h[a[w]]},F.prototype.transform=function(a,u,h,d,p,g){this.permute(g,a,u,h,d,p);for(var w=1;w<p;w<<=1)for(var y=w<<1,c=Math.cos(2*Math.PI/y),b=Math.sin(2*Math.PI/y),U=0;U<p;U+=y)for(var D=c,K=b,V=0;V<w;V++){var X=h[U+V],Q=d[U+V],wt=h[U+V+w],rt=d[U+V+w],nt=D*wt-K*rt;rt=D*rt+K*wt,wt=nt,h[U+V]=X+wt,d[U+V]=Q+rt,h[U+V+w]=X-wt,d[U+V+w]=Q-rt,V!==y&&(nt=c*D-b*K,K=c*K+b*D,D=nt)}},F.prototype.guessLen13b=function(a,u){var h=Math.max(u,a)|1,d=h&1,p=0;for(h=h/2|0;h;h=h>>>1)p++;return 1<<p+1+d},F.prototype.conjugate=function(a,u,h){if(!(h<=1))for(var d=0;d<h/2;d++){var p=a[d];a[d]=a[h-d-1],a[h-d-1]=p,p=u[d],u[d]=-u[h-d-1],u[h-d-1]=-p}},F.prototype.normalize13b=function(a,u){for(var h=0,d=0;d<u/2;d++){var p=Math.round(a[2*d+1]/u)*8192+Math.round(a[2*d]/u)+h;a[d]=p&67108863,p<67108864?h=0:h=p/67108864|0}return a},F.prototype.convert13b=function(a,u,h,d){for(var p=0,g=0;g<u;g++)p=p+(a[g]|0),h[2*g]=p&8191,p=p>>>13,h[2*g+1]=p&8191,p=p>>>13;for(g=2*u;g<d;++g)h[g]=0;e(p===0),e((p&-8192)===0)},F.prototype.stub=function(a){for(var u=new Array(a),h=0;h<a;h++)u[h]=0;return u},F.prototype.mulp=function(a,u,h){var d=2*this.guessLen13b(a.length,u.length),p=this.makeRBT(d),g=this.stub(d),w=new Array(d),y=new Array(d),c=new Array(d),b=new Array(d),U=new Array(d),D=new Array(d),K=h.words;K.length=d,this.convert13b(a.words,a.length,w,d),this.convert13b(u.words,u.length,b,d),this.transform(w,g,y,c,d,p),this.transform(b,g,U,D,d,p);for(var V=0;V<d;V++){var X=y[V]*U[V]-c[V]*D[V];c[V]=y[V]*D[V]+c[V]*U[V],y[V]=X}return this.conjugate(y,c,d),this.transform(y,c,K,g,d,p),this.conjugate(K,g,d),this.normalize13b(K,d),h.negative=a.negative^u.negative,h.length=a.length+u.length,h._strip()},o.prototype.mul=function(a){var u=new o(null);return u.words=new Array(this.length+a.length),this.mulTo(a,u)},o.prototype.mulf=function(a){var u=new o(null);return u.words=new Array(this.length+a.length),C(this,a,u)},o.prototype.imul=function(a){return this.clone().mulTo(a,this)},o.prototype.imuln=function(a){var u=a<0;u&&(a=-a),e(typeof a=="number"),e(a<67108864);for(var h=0,d=0;d<this.length;d++){var p=(this.words[d]|0)*a,g=(p&67108863)+(h&67108863);h>>=26,h+=p/67108864|0,h+=g>>>26,this.words[d]=g&67108863}return h!==0&&(this.words[d]=h,this.length++),u?this.ineg():this},o.prototype.muln=function(a){return this.clone().imuln(a)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(a){var u=_(a);if(u.length===0)return new o(1);for(var h=this,d=0;d<u.length&&u[d]===0;d++,h=h.sqr());if(++d<u.length)for(var p=h.sqr();d<u.length;d++,p=p.sqr())u[d]!==0&&(h=h.mul(p));return h},o.prototype.iushln=function(a){e(typeof a=="number"&&a>=0);var u=a%26,h=(a-u)/26,d=67108863>>>26-u<<26-u,p;if(u!==0){var g=0;for(p=0;p<this.length;p++){var w=this.words[p]&d,y=(this.words[p]|0)-w<<u;this.words[p]=y|g,g=w>>>26-u}g&&(this.words[p]=g,this.length++)}if(h!==0){for(p=this.length-1;p>=0;p--)this.words[p+h]=this.words[p];for(p=0;p<h;p++)this.words[p]=0;this.length+=h}return this._strip()},o.prototype.ishln=function(a){return e(this.negative===0),this.iushln(a)},o.prototype.iushrn=function(a,u,h){e(typeof a=="number"&&a>=0);var d;u?d=(u-u%26)/26:d=0;var p=a%26,g=Math.min((a-p)/26,this.length),w=67108863^67108863>>>p<<p,y=h;if(d-=g,d=Math.max(0,d),y){for(var c=0;c<g;c++)y.words[c]=this.words[c];y.length=g}if(g!==0)if(this.length>g)for(this.length-=g,c=0;c<this.length;c++)this.words[c]=this.words[c+g];else this.words[0]=0,this.length=1;var b=0;for(c=this.length-1;c>=0&&(b!==0||c>=d);c--){var U=this.words[c]|0;this.words[c]=b<<26-p|U>>>p,b=U&w}return y&&b!==0&&(y.words[y.length++]=b),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(a,u,h){return e(this.negative===0),this.iushrn(a,u,h)},o.prototype.shln=function(a){return this.clone().ishln(a)},o.prototype.ushln=function(a){return this.clone().iushln(a)},o.prototype.shrn=function(a){return this.clone().ishrn(a)},o.prototype.ushrn=function(a){return this.clone().iushrn(a)},o.prototype.testn=function(a){e(typeof a=="number"&&a>=0);var u=a%26,h=(a-u)/26,d=1<<u;if(this.length<=h)return!1;var p=this.words[h];return!!(p&d)},o.prototype.imaskn=function(a){e(typeof a=="number"&&a>=0);var u=a%26,h=(a-u)/26;if(e(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(u!==0&&h++,this.length=Math.min(h,this.length),u!==0){var d=67108863^67108863>>>u<<u;this.words[this.length-1]&=d}return this._strip()},o.prototype.maskn=function(a){return this.clone().imaskn(a)},o.prototype.iaddn=function(a){return e(typeof a=="number"),e(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},o.prototype._iaddn=function(a){this.words[0]+=a;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},o.prototype.isubn=function(a){if(e(typeof a=="number"),e(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},o.prototype.addn=function(a){return this.clone().iaddn(a)},o.prototype.subn=function(a){return this.clone().isubn(a)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(a,u,h){var d=a.length+h,p;this._expand(d);var g,w=0;for(p=0;p<a.length;p++){g=(this.words[p+h]|0)+w;var y=(a.words[p]|0)*u;g-=y&67108863,w=(g>>26)-(y/67108864|0),this.words[p+h]=g&67108863}for(;p<this.length-h;p++)g=(this.words[p+h]|0)+w,w=g>>26,this.words[p+h]=g&67108863;if(w===0)return this._strip();for(e(w===-1),w=0,p=0;p<this.length;p++)g=-(this.words[p]|0)+w,w=g>>26,this.words[p]=g&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(a,u){var h=this.length-a.length,d=this.clone(),p=a,g=p.words[p.length-1]|0,w=this._countBits(g);h=26-w,h!==0&&(p=p.ushln(h),d.iushln(h),g=p.words[p.length-1]|0);var y=d.length-p.length,c;if(u!=="mod"){c=new o(null),c.length=y+1,c.words=new Array(c.length);for(var b=0;b<c.length;b++)c.words[b]=0}var U=d.clone()._ishlnsubmul(p,1,y);U.negative===0&&(d=U,c&&(c.words[y]=1));for(var D=y-1;D>=0;D--){var K=(d.words[p.length+D]|0)*67108864+(d.words[p.length+D-1]|0);for(K=Math.min(K/g|0,67108863),d._ishlnsubmul(p,K,D);d.negative!==0;)K--,d.negative=0,d._ishlnsubmul(p,1,D),d.isZero()||(d.negative^=1);c&&(c.words[D]=K)}return c&&c._strip(),d._strip(),u!=="div"&&h!==0&&d.iushrn(h),{div:c||null,mod:d}},o.prototype.divmod=function(a,u,h){if(e(!a.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var d,p,g;return this.negative!==0&&a.negative===0?(g=this.neg().divmod(a,u),u!=="mod"&&(d=g.div.neg()),u!=="div"&&(p=g.mod.neg(),h&&p.negative!==0&&p.iadd(a)),{div:d,mod:p}):this.negative===0&&a.negative!==0?(g=this.divmod(a.neg(),u),u!=="mod"&&(d=g.div.neg()),{div:d,mod:g.mod}):this.negative&a.negative?(g=this.neg().divmod(a.neg(),u),u!=="div"&&(p=g.mod.neg(),h&&p.negative!==0&&p.isub(a)),{div:g.div,mod:p}):a.length>this.length||this.cmp(a)<0?{div:new o(0),mod:this}:a.length===1?u==="div"?{div:this.divn(a.words[0]),mod:null}:u==="mod"?{div:null,mod:new o(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new o(this.modrn(a.words[0]))}:this._wordDiv(a,u)},o.prototype.div=function(a){return this.divmod(a,"div",!1).div},o.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},o.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},o.prototype.divRound=function(a){var u=this.divmod(a);if(u.mod.isZero())return u.div;var h=u.div.negative!==0?u.mod.isub(a):u.mod,d=a.ushrn(1),p=a.andln(1),g=h.cmp(d);return g<0||p===1&&g===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},o.prototype.modrn=function(a){var u=a<0;u&&(a=-a),e(a<=67108863);for(var h=(1<<26)%a,d=0,p=this.length-1;p>=0;p--)d=(h*d+(this.words[p]|0))%a;return u?-d:d},o.prototype.modn=function(a){return this.modrn(a)},o.prototype.idivn=function(a){var u=a<0;u&&(a=-a),e(a<=67108863);for(var h=0,d=this.length-1;d>=0;d--){var p=(this.words[d]|0)+h*67108864;this.words[d]=p/a|0,h=p%a}return this._strip(),u?this.ineg():this},o.prototype.divn=function(a){return this.clone().idivn(a)},o.prototype.egcd=function(a){e(a.negative===0),e(!a.isZero());var u=this,h=a.clone();u.negative!==0?u=u.umod(a):u=u.clone();for(var d=new o(1),p=new o(0),g=new o(0),w=new o(1),y=0;u.isEven()&&h.isEven();)u.iushrn(1),h.iushrn(1),++y;for(var c=h.clone(),b=u.clone();!u.isZero();){for(var U=0,D=1;!(u.words[0]&D)&&U<26;++U,D<<=1);if(U>0)for(u.iushrn(U);U-- >0;)(d.isOdd()||p.isOdd())&&(d.iadd(c),p.isub(b)),d.iushrn(1),p.iushrn(1);for(var K=0,V=1;!(h.words[0]&V)&&K<26;++K,V<<=1);if(K>0)for(h.iushrn(K);K-- >0;)(g.isOdd()||w.isOdd())&&(g.iadd(c),w.isub(b)),g.iushrn(1),w.iushrn(1);u.cmp(h)>=0?(u.isub(h),d.isub(g),p.isub(w)):(h.isub(u),g.isub(d),w.isub(p))}return{a:g,b:w,gcd:h.iushln(y)}},o.prototype._invmp=function(a){e(a.negative===0),e(!a.isZero());var u=this,h=a.clone();u.negative!==0?u=u.umod(a):u=u.clone();for(var d=new o(1),p=new o(0),g=h.clone();u.cmpn(1)>0&&h.cmpn(1)>0;){for(var w=0,y=1;!(u.words[0]&y)&&w<26;++w,y<<=1);if(w>0)for(u.iushrn(w);w-- >0;)d.isOdd()&&d.iadd(g),d.iushrn(1);for(var c=0,b=1;!(h.words[0]&b)&&c<26;++c,b<<=1);if(c>0)for(h.iushrn(c);c-- >0;)p.isOdd()&&p.iadd(g),p.iushrn(1);u.cmp(h)>=0?(u.isub(h),d.isub(p)):(h.isub(u),p.isub(d))}var U;return u.cmpn(1)===0?U=d:U=p,U.cmpn(0)<0&&U.iadd(a),U},o.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var u=this.clone(),h=a.clone();u.negative=0,h.negative=0;for(var d=0;u.isEven()&&h.isEven();d++)u.iushrn(1),h.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;h.isEven();)h.iushrn(1);var p=u.cmp(h);if(p<0){var g=u;u=h,h=g}else if(p===0||h.cmpn(1)===0)break;u.isub(h)}while(!0);return h.iushln(d)},o.prototype.invm=function(a){return this.egcd(a).a.umod(a)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(a){return this.words[0]&a},o.prototype.bincn=function(a){e(typeof a=="number");var u=a%26,h=(a-u)/26,d=1<<u;if(this.length<=h)return this._expand(h+1),this.words[h]|=d,this;for(var p=d,g=h;p!==0&&g<this.length;g++){var w=this.words[g]|0;w+=p,p=w>>>26,w&=67108863,this.words[g]=w}return p!==0&&(this.words[g]=p,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(a){var u=a<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var h;if(this.length>1)h=1;else{u&&(a=-a),e(a<=67108863,"Number is too big");var d=this.words[0]|0;h=d===a?0:d<a?-1:1}return this.negative!==0?-h|0:h},o.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var u=this.ucmp(a);return this.negative!==0?-u|0:u},o.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var u=0,h=this.length-1;h>=0;h--){var d=this.words[h]|0,p=a.words[h]|0;if(d!==p){d<p?u=-1:d>p&&(u=1);break}}return u},o.prototype.gtn=function(a){return this.cmpn(a)===1},o.prototype.gt=function(a){return this.cmp(a)===1},o.prototype.gten=function(a){return this.cmpn(a)>=0},o.prototype.gte=function(a){return this.cmp(a)>=0},o.prototype.ltn=function(a){return this.cmpn(a)===-1},o.prototype.lt=function(a){return this.cmp(a)===-1},o.prototype.lten=function(a){return this.cmpn(a)<=0},o.prototype.lte=function(a){return this.cmp(a)<=0},o.prototype.eqn=function(a){return this.cmpn(a)===0},o.prototype.eq=function(a){return this.cmp(a)===0},o.red=function(a){return new Z(a)},o.prototype.toRed=function(a){return e(!this.red,"Already a number in reduction context"),e(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},o.prototype.fromRed=function(){return e(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(a){return this.red=a,this},o.prototype.forceRed=function(a){return e(!this.red,"Already a number in reduction context"),this._forceRed(a)},o.prototype.redAdd=function(a){return e(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},o.prototype.redIAdd=function(a){return e(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},o.prototype.redSub=function(a){return e(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},o.prototype.redISub=function(a){return e(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},o.prototype.redShl=function(a){return e(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},o.prototype.redMul=function(a){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},o.prototype.redIMul=function(a){return e(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},o.prototype.redSqr=function(){return e(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return e(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return e(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return e(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return e(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(a){return e(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var q={k256:null,p224:null,p192:null,p25519:null};function O(S,a){this.name=S,this.p=new o(a,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}O.prototype._tmp=function(){var a=new o(null);return a.words=new Array(Math.ceil(this.n/13)),a},O.prototype.ireduce=function(a){var u=a,h;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),h=u.bitLength();while(h>this.n);var d=h<this.n?-1:u.ucmp(this.p);return d===0?(u.words[0]=0,u.length=1):d>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},O.prototype.split=function(a,u){a.iushrn(this.n,0,u)},O.prototype.imulK=function(a){return a.imul(this.k)};function W(){O.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(W,O),W.prototype.split=function(a,u){for(var h=4194303,d=Math.min(a.length,9),p=0;p<d;p++)u.words[p]=a.words[p];if(u.length=d,a.length<=9){a.words[0]=0,a.length=1;return}var g=a.words[9];for(u.words[u.length++]=g&h,p=10;p<a.length;p++){var w=a.words[p]|0;a.words[p-10]=(w&h)<<4|g>>>22,g=w}g>>>=22,a.words[p-10]=g,g===0&&a.length>10?a.length-=10:a.length-=9},W.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var u=0,h=0;h<a.length;h++){var d=a.words[h]|0;u+=d*977,a.words[h]=u&67108863,u=d*64+(u/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function G(){O.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(G,O);function ut(){O.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(ut,O);function it(){O.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(it,O),it.prototype.imulK=function(a){for(var u=0,h=0;h<a.length;h++){var d=(a.words[h]|0)*19+u,p=d&67108863;d>>>=26,a.words[h]=p,u=d}return u!==0&&(a.words[a.length++]=u),a},o._prime=function(a){if(q[a])return q[a];var u;if(a==="k256")u=new W;else if(a==="p224")u=new G;else if(a==="p192")u=new ut;else if(a==="p25519")u=new it;else throw new Error("Unknown prime "+a);return q[a]=u,u};function Z(S){if(typeof S=="string"){var a=o._prime(S);this.m=a.p,this.prime=a}else e(S.gtn(1),"modulus must be greater than 1"),this.m=S,this.prime=null}Z.prototype._verify1=function(a){e(a.negative===0,"red works only with positives"),e(a.red,"red works only with red numbers")},Z.prototype._verify2=function(a,u){e((a.negative|u.negative)===0,"red works only with positives"),e(a.red&&a.red===u.red,"red works only with red numbers")},Z.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(m(a,a.umod(this.m)._forceRed(this)),a)},Z.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},Z.prototype.add=function(a,u){this._verify2(a,u);var h=a.add(u);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},Z.prototype.iadd=function(a,u){this._verify2(a,u);var h=a.iadd(u);return h.cmp(this.m)>=0&&h.isub(this.m),h},Z.prototype.sub=function(a,u){this._verify2(a,u);var h=a.sub(u);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},Z.prototype.isub=function(a,u){this._verify2(a,u);var h=a.isub(u);return h.cmpn(0)<0&&h.iadd(this.m),h},Z.prototype.shl=function(a,u){return this._verify1(a),this.imod(a.ushln(u))},Z.prototype.imul=function(a,u){return this._verify2(a,u),this.imod(a.imul(u))},Z.prototype.mul=function(a,u){return this._verify2(a,u),this.imod(a.mul(u))},Z.prototype.isqr=function(a){return this.imul(a,a.clone())},Z.prototype.sqr=function(a){return this.mul(a,a)},Z.prototype.sqrt=function(a){if(a.isZero())return a.clone();var u=this.m.andln(3);if(e(u%2===1),u===3){var h=this.m.add(new o(1)).iushrn(2);return this.pow(a,h)}for(var d=this.m.subn(1),p=0;!d.isZero()&&d.andln(1)===0;)p++,d.iushrn(1);e(!d.isZero());var g=new o(1).toRed(this),w=g.redNeg(),y=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);this.pow(c,y).cmp(w)!==0;)c.redIAdd(w);for(var b=this.pow(c,d),U=this.pow(a,d.addn(1).iushrn(1)),D=this.pow(a,d),K=p;D.cmp(g)!==0;){for(var V=D,X=0;V.cmp(g)!==0;X++)V=V.redSqr();e(X<K);var Q=this.pow(b,new o(1).iushln(K-X-1));U=U.redMul(Q),b=Q.redSqr(),D=D.redMul(b),K=X}return U},Z.prototype.invm=function(a){var u=a._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},Z.prototype.pow=function(a,u){if(u.isZero())return new o(1).toRed(this);if(u.cmpn(1)===0)return a.clone();var h=4,d=new Array(1<<h);d[0]=new o(1).toRed(this),d[1]=a;for(var p=2;p<d.length;p++)d[p]=this.mul(d[p-1],a);var g=d[0],w=0,y=0,c=u.bitLength()%26;for(c===0&&(c=26),p=u.length-1;p>=0;p--){for(var b=u.words[p],U=c-1;U>=0;U--){var D=b>>U&1;if(g!==d[0]&&(g=this.sqr(g)),D===0&&w===0){y=0;continue}w<<=1,w|=D,y++,!(y!==h&&(p!==0||U!==0))&&(g=this.mul(g,d[w]),y=0,w=0)}c=26}return g},Z.prototype.convertTo=function(a){var u=a.umod(this.m);return u===a?u.clone():u},Z.prototype.convertFrom=function(a){var u=a.clone();return u.red=null,u},o.mont=function(a){return new dt(a)};function dt(S){Z.call(this,S),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(dt,Z),dt.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},dt.prototype.convertFrom=function(a){var u=this.imod(a.mul(this.rinv));return u.red=null,u},dt.prototype.imul=function(a,u){if(a.isZero()||u.isZero())return a.words[0]=0,a.length=1,a;var h=a.imul(u),d=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=h.isub(d).iushrn(this.shift),g=p;return p.cmp(this.m)>=0?g=p.isub(this.m):p.cmpn(0)<0&&(g=p.iadd(this.m)),g._forceRed(this)},dt.prototype.mul=function(a,u){if(a.isZero()||u.isZero())return new o(0)._forceRed(this);var h=a.mul(u),d=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),p=h.isub(d).iushrn(this.shift),g=p;return p.cmp(this.m)>=0?g=p.isub(this.m):p.cmpn(0)<0&&(g=p.iadd(this.m)),g._forceRed(this)},dt.prototype.invm=function(a){var u=this.imod(a._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(typeof Cs>"u"||Cs,Jc)});var Ns=st((Us,tu)=>{B();var Lo=En(),$e=Lo.Buffer;function Qc(r,t){for(var e in r)t[e]=r[e]}$e.from&&$e.alloc&&$e.allocUnsafe&&$e.allocUnsafeSlow?tu.exports=Lo:(Qc(Lo,Us),Us.Buffer=Kr);function Kr(r,t,e){return $e(r,t,e)}Kr.prototype=Object.create($e.prototype);Qc($e,Kr);Kr.from=function(r,t,e){if(typeof r=="number")throw new TypeError("Argument must not be a number");return $e(r,t,e)};Kr.alloc=function(r,t,e){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=$e(r);return t!==void 0?typeof e=="string"?n.fill(t,e):n.fill(t):n.fill(0),n};Kr.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return $e(r)};Kr.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return Lo.SlowBuffer(r)}});var ru=st((Gg,eu)=>{"use strict";B();var To=Ns().Buffer;function Gh(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var o=r.charAt(n),i=o.charCodeAt(0);if(t[i]!==255)throw new TypeError(o+" is ambiguous");t[i]=n}var s=r.length,l=r.charAt(0),f=Math.log(s)/Math.log(256),m=Math.log(256)/Math.log(s);function v(E){if((Array.isArray(E)||E instanceof Uint8Array)&&(E=To.from(E)),!To.isBuffer(E))throw new TypeError("Expected Buffer");if(E.length===0)return"";for(var T=0,_=0,I=0,L=E.length;I!==L&&E[I]===0;)I++,T++;for(var N=(L-I)*m+1>>>0,C=new Uint8Array(N);I!==L;){for(var F=E[I],q=0,O=N-1;(F!==0||q<_)&&O!==-1;O--,q++)F+=256*C[O]>>>0,C[O]=F%s>>>0,F=F/s>>>0;if(F!==0)throw new Error("Non-zero carry");_=q,I++}for(var W=N-_;W!==N&&C[W]===0;)W++;for(var G=l.repeat(T);W<N;++W)G+=r.charAt(C[W]);return G}function x(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return To.alloc(0);for(var T=0,_=0,I=0;E[T]===l;)_++,T++;for(var L=(E.length-T)*f+1>>>0,N=new Uint8Array(L);E[T];){var C=t[E.charCodeAt(T)];if(C===255)return;for(var F=0,q=L-1;(C!==0||F<I)&&q!==-1;q--,F++)C+=s*N[q]>>>0,N[q]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");I=F,T++}for(var O=L-I;O!==L&&N[O]===0;)O++;var W=To.allocUnsafe(_+(L-O));W.fill(0,0,_);for(var G=_;O!==L;)W[G++]=N[O++];return W}function M(E){var T=x(E);if(T)return T;throw new Error("Non-base"+s+" character")}return{encode:v,decodeUnsafe:x,decode:M}}eu.exports=Gh});var ou=st((Yg,nu)=>{B();var jh=ru(),Yh="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";nu.exports=jh(Yh)});var su=st((em,iu)=>{"use strict";B();var Mo=Ns().Buffer;function Xh(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var o=r.charAt(n),i=o.charCodeAt(0);if(t[i]!==255)throw new TypeError(o+" is ambiguous");t[i]=n}var s=r.length,l=r.charAt(0),f=Math.log(s)/Math.log(256),m=Math.log(256)/Math.log(s);function v(E){if((Array.isArray(E)||E instanceof Uint8Array)&&(E=Mo.from(E)),!Mo.isBuffer(E))throw new TypeError("Expected Buffer");if(E.length===0)return"";for(var T=0,_=0,I=0,L=E.length;I!==L&&E[I]===0;)I++,T++;for(var N=(L-I)*m+1>>>0,C=new Uint8Array(N);I!==L;){for(var F=E[I],q=0,O=N-1;(F!==0||q<_)&&O!==-1;O--,q++)F+=256*C[O]>>>0,C[O]=F%s>>>0,F=F/s>>>0;if(F!==0)throw new Error("Non-zero carry");_=q,I++}for(var W=N-_;W!==N&&C[W]===0;)W++;for(var G=l.repeat(T);W<N;++W)G+=r.charAt(C[W]);return G}function x(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return Mo.alloc(0);for(var T=0,_=0,I=0;E[T]===l;)_++,T++;for(var L=(E.length-T)*f+1>>>0,N=new Uint8Array(L);E[T];){var C=t[E.charCodeAt(T)];if(C===255)return;for(var F=0,q=L-1;(C!==0||F<I)&&q!==-1;q--,F++)C+=s*N[q]>>>0,N[q]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");I=F,T++}for(var O=L-I;O!==L&&N[O]===0;)O++;var W=Mo.allocUnsafe(_+(L-O));W.fill(0,0,_);for(var G=_;O!==L;)W[G++]=N[O++];return W}function M(E){var T=x(E);if(T)return T;throw new Error("Non-base"+s+" character")}return{encode:v,decodeUnsafe:x,decode:M}}iu.exports=Xh});var cu=st((nm,au)=>{B();var Jh=su(),Qh="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";au.exports=Jh(Qh)});var uu=st(Ds=>{"use strict";B();function rr(r,t,e){return t<=r&&r<=e}function No(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function td(r){for(var t=String(r),e=t.length,n=0,o=[];n<e;){var i=t.charCodeAt(n);if(i<55296||i>57343)o.push(i);else if(56320<=i&&i<=57343)o.push(65533);else if(55296<=i&&i<=56319)if(n===e-1)o.push(65533);else{var s=r.charCodeAt(n+1);if(56320<=s&&s<=57343){var l=i&1023,f=s&1023;o.push(65536+(l<<10)+f),n+=1}else o.push(65533)}n+=1}return o}function ed(r){for(var t="",e=0;e<r.length;++e){var n=r[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var Po=-1;function Ks(r){this.tokens=[].slice.call(r)}Ks.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Po},prepend:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.push(t.shift());else this.tokens.push(r)}};var rn=-1;function zs(r,t){if(r)throw TypeError("Decoder error");return t||65533}var Co="utf-8";function Oo(r,t){if(!(this instanceof Oo))return new Oo(r,t);if(r=r!==void 0?String(r).toLowerCase():Co,r!==Co)throw new Error("Encoding not supported. Only utf-8 is supported");t=No(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Oo.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=No(e),this._streaming||(this._decoder=new rd({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var o=new Ks(n),i=[],s;!o.endOfStream()&&(s=this._decoder.handler(o,o.read()),s!==rn);)s!==null&&(Array.isArray(s)?i.push.apply(i,s):i.push(s));if(!this._streaming){do{if(s=this._decoder.handler(o,o.read()),s===rn)break;s!==null&&(Array.isArray(s)?i.push.apply(i,s):i.push(s))}while(!o.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),ed(i)}};function Uo(r,t){if(!(this instanceof Uo))return new Uo(r,t);if(r=r!==void 0?String(r).toLowerCase():Co,r!==Co)throw new Error("Encoding not supported. Only utf-8 is supported");t=No(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Uo.prototype={encode:function(t,e){t=t?String(t):"",e=No(e),this._streaming||(this._encoder=new nd(this._options)),this._streaming=!!e.stream;for(var n=[],o=new Ks(td(t)),i;!o.endOfStream()&&(i=this._encoder.handler(o,o.read()),i!==rn);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(o,o.read()),i!==rn;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function rd(r){var t=r.fatal,e=0,n=0,o=0,i=128,s=191;this.handler=function(l,f){if(f===Po&&o!==0)return o=0,zs(t);if(f===Po)return rn;if(o===0){if(rr(f,0,127))return f;if(rr(f,194,223))o=1,e=f-192;else if(rr(f,224,239))f===224&&(i=160),f===237&&(s=159),o=2,e=f-224;else if(rr(f,240,244))f===240&&(i=144),f===244&&(s=143),o=3,e=f-240;else return zs(t);return e=e<<6*o,null}if(!rr(f,i,s))return e=o=n=0,i=128,s=191,l.prepend(f),zs(t);if(i=128,s=191,n+=1,e+=f-128<<6*(o-n),n!==o)return null;var m=e;return e=o=n=0,m}}function nd(r){var t=r.fatal;this.handler=function(e,n){if(n===Po)return rn;if(rr(n,0,127))return n;var o,i;rr(n,128,2047)?(o=1,i=192):rr(n,2048,65535)?(o=2,i=224):rr(n,65536,1114111)&&(o=3,i=240);for(var s=[(n>>6*o)+i];o>0;){var l=n>>6*(o-1);s.push(128|l&63),o-=1}return s}}Ds.TextEncoder=Uo;Ds.TextDecoder=Oo});var pu=st(mt=>{"use strict";B();var od=mt&&mt.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),id=mt&&mt.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),Ge=mt&&mt.__decorate||function(r,t,e,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,n);else for(var l=r.length-1;l>=0;l--)(s=r[l])&&(i=(o<3?s(i):o>3?s(t,e,i):s(t,e))||i);return o>3&&i&&Object.defineProperty(t,e,i),i},sd=mt&&mt.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.hasOwnProperty.call(r,e)&&od(t,r,e);return id(t,r),t},fu=mt&&mt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mt,"__esModule",{value:!0});mt.deserializeUnchecked=mt.deserialize=mt.serialize=mt.BinaryReader=mt.BinaryWriter=mt.BorshError=mt.baseDecode=mt.baseEncode=void 0;var kr=fu(Os()),lu=fu(cu()),ad=sd(uu()),cd=typeof TextDecoder!="function"?ad.TextDecoder:TextDecoder,ud=new cd("utf-8",{fatal:!0});function fd(r){return typeof r=="string"&&(r=Buffer.from(r,"utf8")),lu.default.encode(Buffer.from(r))}mt.baseEncode=fd;function ld(r){return Buffer.from(lu.default.decode(r))}mt.baseDecode=ld;var Fs=1024,fe=class extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};mt.BorshError=fe;var qo=class{constructor(){this.buf=Buffer.alloc(Fs),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Fs)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new kr.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new kr.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new kr.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new kr.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(Fs)]),this.length+=t.length}writeString(t){this.maybeResize();let e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(let n of t)this.maybeResize(),e(n)}toArray(){return this.buf.subarray(0,this.length)}};mt.BinaryWriter=qo;function je(r,t,e){let n=e.value;e.value=function(...o){try{return n.apply(this,o)}catch(i){if(i instanceof RangeError){let s=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(s)>=0)throw new fe("Reached the end of buffer when deserializing")}throw i}}}var Se=class{constructor(t){this.buf=t,this.offset=0}readU8(){let t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){let t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){let t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){let t=this.readBuffer(8);return new kr.default(t,"le")}readU128(){let t=this.readBuffer(16);return new kr.default(t,"le")}readU256(){let t=this.readBuffer(32);return new kr.default(t,"le")}readU512(){let t=this.readBuffer(64);return new kr.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new fe(`Expected buffer length ${t} isn't within bounds`);let e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){let t=this.readU32(),e=this.readBuffer(t);try{return ud.decode(e)}catch(n){throw new fe(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){let e=this.readU32(),n=Array();for(let o=0;o<e;++o)n.push(t());return n}};Ge([je],Se.prototype,"readU8",null);Ge([je],Se.prototype,"readU16",null);Ge([je],Se.prototype,"readU32",null);Ge([je],Se.prototype,"readU64",null);Ge([je],Se.prototype,"readU128",null);Ge([je],Se.prototype,"readU256",null);Ge([je],Se.prototype,"readU512",null);Ge([je],Se.prototype,"readString",null);Ge([je],Se.prototype,"readFixedArray",null);Ge([je],Se.prototype,"readArray",null);mt.BinaryReader=Se;function hu(r){return r.charAt(0).toUpperCase()+r.slice(1)}function Dr(r,t,e,n,o){try{if(typeof n=="string")o[`write${hu(n)}`](e);else if(n instanceof Array)if(typeof n[0]=="number"){if(e.length!==n[0])throw new fe(`Expecting byte array of length ${n[0]}, but got ${e.length} bytes`);o.writeFixedArray(e)}else if(n.length===2&&typeof n[1]=="number"){if(e.length!==n[1])throw new fe(`Expecting byte array of length ${n[1]}, but got ${e.length} bytes`);for(let i=0;i<n[1];i++)Dr(r,null,e[i],n[0],o)}else o.writeArray(e,i=>{Dr(r,t,i,n[0],o)});else if(n.kind!==void 0)switch(n.kind){case"option":{e==null?o.writeU8(0):(o.writeU8(1),Dr(r,t,e,n.type,o));break}case"map":{o.writeU32(e.size),e.forEach((i,s)=>{Dr(r,t,s,n.key,o),Dr(r,t,i,n.value,o)});break}default:throw new fe(`FieldType ${n} unrecognized`)}else du(r,e,o)}catch(i){throw i instanceof fe&&i.addToFieldPath(t),i}}function du(r,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}let n=r.get(t.constructor);if(!n)throw new fe(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([o,i])=>{Dr(r,o,t[o],i,e)});else if(n.kind==="enum"){let o=t[n.field];for(let i=0;i<n.values.length;++i){let[s,l]=n.values[i];if(s===o){e.writeU8(i),Dr(r,s,t[s],l,e);break}}}else throw new fe(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function hd(r,t,e=qo){let n=new e;return du(r,t,n),n.toArray()}mt.serialize=hd;function Fr(r,t,e,n){try{if(typeof e=="string")return n[`read${hu(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return n.readFixedArray(e[0]);if(typeof e[1]=="number"){let o=[];for(let i=0;i<e[1];i++)o.push(Fr(r,null,e[0],n));return o}else return n.readArray(()=>Fr(r,t,e[0],n))}if(e.kind==="option")return n.readU8()?Fr(r,t,e.type,n):void 0;if(e.kind==="map"){let o=new Map,i=n.readU32();for(let s=0;s<i;s++){let l=Fr(r,t,e.key,n),f=Fr(r,t,e.value,n);o.set(l,f)}return o}return Ws(r,e,n)}catch(o){throw o instanceof fe&&o.addToFieldPath(t),o}}function Ws(r,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);let n=r.get(t);if(!n)throw new fe(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){let o={};for(let[i,s]of r.get(t).fields)o[i]=Fr(r,i,s,e);return new t(o)}if(n.kind==="enum"){let o=e.readU8();if(o>=n.values.length)throw new fe(`Enum index: ${o} is out of range`);let[i,s]=n.values[o],l=Fr(r,i,s,e);return new t({[i]:l})}throw new fe(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function dd(r,t,e,n=Se){let o=new n(e),i=Ws(r,t,o);if(o.offset<e.length)throw new fe(`Unexpected ${e.length-o.offset} bytes after deserialized data`);return i}mt.deserialize=dd;function pd(r,t,e,n=Se){let o=new n(e);return Ws(r,t,o)}mt.deserializeUnchecked=pd});var Gs=st(R=>{"use strict";B();Object.defineProperty(R,"__esModule",{value:!0});R.s16=R.s8=R.nu64be=R.u48be=R.u40be=R.u32be=R.u24be=R.u16be=R.nu64=R.u48=R.u40=R.u32=R.u24=R.u16=R.u8=R.offset=R.greedy=R.Constant=R.UTF8=R.CString=R.Blob=R.Boolean=R.BitField=R.BitStructure=R.VariantLayout=R.Union=R.UnionLayoutDiscriminator=R.UnionDiscriminator=R.Structure=R.Sequence=R.DoubleBE=R.Double=R.FloatBE=R.Float=R.NearInt64BE=R.NearInt64=R.NearUInt64BE=R.NearUInt64=R.IntBE=R.Int=R.UIntBE=R.UInt=R.OffsetLayout=R.GreedyCount=R.ExternalLayout=R.bindConstructorLayout=R.nameWithProperty=R.Layout=R.uint8ArrayToBuffer=R.checkUint8Array=void 0;R.constant=R.utf8=R.cstr=R.blob=R.unionLayoutDiscriminator=R.union=R.seq=R.bits=R.struct=R.f64be=R.f64=R.f32be=R.f32=R.ns64be=R.s48be=R.s40be=R.s32be=R.s24be=R.s16be=R.ns64=R.s48=R.s40=R.s32=R.s24=void 0;var Vs=En();function sn(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}R.checkUint8Array=sn;function ft(r){return sn(r),Vs.Buffer.from(r.buffer,r.byteOffset,r.length)}R.uint8ArrayToBuffer=ft;var ht=class{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){let e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}};R.Layout=ht;function $s(r,t){return t.property?r+"["+t.property+"]":r}R.nameWithProperty=$s;function yd(r,t){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof ht))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=t,t.boundConstructor_=r,t.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(r,"decode",{value(e,n){return t.decode(e,n)},writable:!0})}R.bindConstructorLayout=yd;var pe=class extends ht{isCount(){throw new Error("ExternalLayout is abstract")}};R.ExternalLayout=pe;var zo=class extends pe{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){sn(t);let n=t.length-e;return Math.floor(n/this.elementSpan)}encode(t,e,n){return 0}};R.GreedyCount=zo;var Rn=class extends pe{constructor(t,e=0,n){if(!(t instanceof ht))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Ie||this.layout instanceof Le}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,n=0){return this.layout.encode(t,e,n+this.offset)}};R.OffsetLayout=Rn;var Ie=class extends ht{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ft(t).readUIntLE(e,this.span)}encode(t,e,n=0){return ft(e).writeUIntLE(t,n,this.span),this.span}};R.UInt=Ie;var Le=class extends ht{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ft(t).readUIntBE(e,this.span)}encode(t,e,n=0){return ft(e).writeUIntBE(t,n,this.span),this.span}};R.UIntBE=Le;var nr=class extends ht{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ft(t).readIntLE(e,this.span)}encode(t,e,n=0){return ft(e).writeIntLE(t,n,this.span),this.span}};R.Int=nr;var Er=class extends ht{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return ft(t).readIntBE(e,this.span)}encode(t,e,n=0){return ft(e).writeIntBE(t,n,this.span),this.span}};R.IntBE=Er;var Hs=Math.pow(2,32);function ri(r){let t=Math.floor(r/Hs),e=r-t*Hs;return{hi32:t,lo32:e}}function ni(r,t){return r*Hs+t}var Ko=class extends ht{constructor(t){super(8,t)}decode(t,e=0){let n=ft(t),o=n.readUInt32LE(e),i=n.readUInt32LE(e+4);return ni(i,o)}encode(t,e,n=0){let o=ri(t),i=ft(e);return i.writeUInt32LE(o.lo32,n),i.writeUInt32LE(o.hi32,n+4),8}};R.NearUInt64=Ko;var Do=class extends ht{constructor(t){super(8,t)}decode(t,e=0){let n=ft(t),o=n.readUInt32BE(e),i=n.readUInt32BE(e+4);return ni(o,i)}encode(t,e,n=0){let o=ri(t),i=ft(e);return i.writeUInt32BE(o.hi32,n),i.writeUInt32BE(o.lo32,n+4),8}};R.NearUInt64BE=Do;var Fo=class extends ht{constructor(t){super(8,t)}decode(t,e=0){let n=ft(t),o=n.readUInt32LE(e),i=n.readInt32LE(e+4);return ni(i,o)}encode(t,e,n=0){let o=ri(t),i=ft(e);return i.writeUInt32LE(o.lo32,n),i.writeInt32LE(o.hi32,n+4),8}};R.NearInt64=Fo;var Wo=class extends ht{constructor(t){super(8,t)}decode(t,e=0){let n=ft(t),o=n.readInt32BE(e),i=n.readUInt32BE(e+4);return ni(o,i)}encode(t,e,n=0){let o=ri(t),i=ft(e);return i.writeInt32BE(o.hi32,n),i.writeUInt32BE(o.lo32,n+4),8}};R.NearInt64BE=Wo;var Ho=class extends ht{constructor(t){super(4,t)}decode(t,e=0){return ft(t).readFloatLE(e)}encode(t,e,n=0){return ft(e).writeFloatLE(t,n),4}};R.Float=Ho;var Vo=class extends ht{constructor(t){super(4,t)}decode(t,e=0){return ft(t).readFloatBE(e)}encode(t,e,n=0){return ft(e).writeFloatBE(t,n),4}};R.FloatBE=Vo;var $o=class extends ht{constructor(t){super(8,t)}decode(t,e=0){return ft(t).readDoubleLE(e)}encode(t,e,n=0){return ft(e).writeDoubleLE(t,n),8}};R.Double=$o;var Go=class extends ht{constructor(t){super(8,t)}decode(t,e=0){return ft(t).readDoubleBE(e)}encode(t,e,n=0){return ft(e).writeDoubleBE(t,n),8}};R.DoubleBE=Go;var jo=class extends ht{constructor(t,e,n){if(!(t instanceof ht))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof pe&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let o=-1;!(e instanceof pe)&&0<t.span&&(o=e*t.span),super(o,n),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0,o=this.count;if(o instanceof pe&&(o=o.decode(t,e)),0<this.elementLayout.span)n=o*this.elementLayout.span;else{let i=0;for(;i<o;)n+=this.elementLayout.getSpan(t,e+n),++i}return n}decode(t,e=0){let n=[],o=0,i=this.count;for(i instanceof pe&&(i=i.decode(t,e));o<i;)n.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),o+=1;return n}encode(t,e,n=0){let o=this.elementLayout,i=t.reduce((s,l)=>s+o.encode(l,e,n+s),0);return this.count instanceof pe&&this.count.encode(t.length,e,n),i}};R.Sequence=jo;var Yo=class extends ht{constructor(t,e,n){if(!(Array.isArray(t)&&t.reduce((i,s)=>i&&s instanceof ht,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&n===void 0&&(n=e,e=void 0);for(let i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let o=-1;try{o=t.reduce((i,s)=>i+s.getSpan(),0)}catch{}super(o,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((o,i)=>{let s=i.getSpan(t,e);return e+=s,o+s},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,e=0){sn(t);let n=this.makeDestinationObject();for(let o of this.fields)if(o.property!==void 0&&(n[o.property]=o.decode(t,e)),e+=o.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n=0){let o=n,i=0,s=0;for(let l of this.fields){let f=l.span;if(s=0<f?f:0,l.property!==void 0){let m=t[l.property];m!==void 0&&(s=l.encode(m,e,n),0>f&&(f=l.getSpan(e,n)))}i=n,n+=f}return i+s-o}fromArray(t){let e=this.makeDestinationObject();for(let n of this.fields)n.property!==void 0&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(let n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}};R.Structure=Yo;var Ln=class{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,n){throw new Error("UnionDiscriminator is abstract")}};R.UnionDiscriminator=Ln;var on=class extends Ln{constructor(t,e){if(!(t instanceof pe&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}};R.UnionLayoutDiscriminator=on;var Tn=class extends ht{constructor(t,e,n){let o;if(t instanceof Ie||t instanceof Le)o=new on(new Rn(t));else if(t instanceof pe&&t.isCount())o=new on(t);else if(t instanceof Ln)o=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof ht))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof Ie||t instanceof Le)&&(i+=o.layout.span)),super(i,n),this.discriminator=o,this.usesPrefixDiscriminator=t instanceof Ie||t instanceof Le,this.defaultLayout=e,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(l){return s(l)},this.configGetSourceVariant=function(l){s=l.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;let n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;let e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(let e in this.registry){let n=this.registry[e];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,e=0){let n,o=this.discriminator,i=o.decode(t,e),s=this.registry[i];if(s===void 0){let l=this.defaultLayout,f=0;this.usesPrefixDiscriminator&&(f=o.layout.span),n=this.makeDestinationObject(),n[o.property]=i,n[l.property]=l.decode(t,e+f)}else n=s.decode(t,e);return n}encode(t,e,n=0){let o=this.getSourceVariant(t);if(o===void 0){let i=this.discriminator,s=this.defaultLayout,l=0;return this.usesPrefixDiscriminator&&(l=i.layout.span),i.encode(t[i.property],e,n),l+s.encode(t[s.property],e,n+l)}return o.encode(t,e,n)}addVariant(t,e,n){let o=new Zo(this,t,e,n);return this.registry[t]=o,o}getVariant(t,e=0){let n;return t instanceof Uint8Array?n=this.discriminator.decode(t,e):n=t,this.registry[n]}};R.Union=Tn;var Zo=class extends ht{constructor(t,e,n,o){if(!(t instanceof Tn))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&o===void 0&&(o=n,n=null),n){if(!(n instanceof ht))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof o!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=n?n.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,o),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let o=0;return this.layout&&(o=this.layout.getSpan(t,e+n)),n+o}decode(t,e=0){let n=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let o=0;return this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+o):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n=0){let o=0;if(this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let i=o;if(this.layout&&(this.layout.encode(t[this.property],e,n+o),i+=this.layout.getSpan(e,n+o),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}};R.VariantLayout=Zo;function nn(r){return 0>r&&(r+=4294967296),r}var Mn=class extends ht{constructor(t,e,n){if(!(t instanceof Ie||t instanceof Le))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&n===void 0&&(n=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!e,this.fields=[];let o=0;this._packedSetValue=function(i){return o=nn(i),this},this._packedGetValue=function(){return o}}decode(t,e=0){let n=this.makeDestinationObject(),o=this.word.decode(t,e);this._packedSetValue(o);for(let i of this.fields)i.property!==void 0&&(n[i.property]=i.decode(t));return n}encode(t,e,n=0){let o=this.word.decode(e,n);this._packedSetValue(o);for(let i of this.fields)if(i.property!==void 0){let s=t[i.property];s!==void 0&&i.encode(s)}return this.word.encode(this._packedGetValue(),e,n)}addField(t,e){let n=new Pn(this,t,e);return this.fields.push(n),n}addBoolean(t){let e=new Xo(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(let e of this.fields)if(e.property===t)return e}};R.BitStructure=Mn;var Pn=class{constructor(t,e,n){if(!(t instanceof Mn))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");let o=8*t.span,i=t.fields.reduce((s,l)=>s+l.bits,0);if(e+i>o)throw new Error("bits too long for span remainder ("+(o-i)+" of "+o+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=o-i-e),this.wordMask=nn(this.valueMask<<this.start),this.property=n}decode(t,e){let n=this.container._packedGetValue();return nn(n&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==nn(t&this.valueMask))throw new TypeError($s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let e=this.container._packedGetValue(),n=nn(t<<this.start);this.container._packedSetValue(nn(e&~this.wordMask)|n)}};R.BitField=Pn;var Xo=class extends Pn{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};R.Boolean=Xo;var Jo=class extends ht{constructor(t,e){if(!(t instanceof pe&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof pe||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e=0){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),ft(t).slice(e,e+n)}encode(t,e,n){let o=this.length;if(this.length instanceof pe&&(o=t.length),!(t instanceof Uint8Array&&o===t.length))throw new TypeError($s("Blob.encode",this)+" requires (length "+o+") Uint8Array as src");if(n+o>e.length)throw new RangeError("encoding overruns Uint8Array");let i=ft(t);return ft(e).write(i.toString("hex"),n,o,"hex"),this.length instanceof pe&&this.length.encode(o,e,n),o}};R.Blob=Jo;var Qo=class extends ht{constructor(t){super(-1,t)}getSpan(t,e=0){sn(t);let n=e;for(;n<t.length&&t[n]!==0;)n+=1;return 1+n-e}decode(t,e=0){let n=this.getSpan(t,e);return ft(t).slice(e,e+n-1).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));let o=Vs.Buffer.from(t,"utf8"),i=o.length;if(n+i>e.length)throw new RangeError("encoding overruns Buffer");let s=ft(e);return o.copy(s,n),s[n+i]=0,i+1}};R.CString=Qo;var ti=class extends ht{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return sn(t),t.length-e}decode(t,e=0){let n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return ft(t).slice(e,e+n).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));let o=Vs.Buffer.from(t,"utf8"),i=o.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>e.length)throw new RangeError("encoding overruns Buffer");return o.copy(ft(e),n),i}};R.UTF8=ti;var ei=class extends ht{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,n){return 0}};R.Constant=ei;R.greedy=(r,t)=>new zo(r,t);R.offset=(r,t,e)=>new Rn(r,t,e);R.u8=r=>new Ie(1,r);R.u16=r=>new Ie(2,r);R.u24=r=>new Ie(3,r);R.u32=r=>new Ie(4,r);R.u40=r=>new Ie(5,r);R.u48=r=>new Ie(6,r);R.nu64=r=>new Ko(r);R.u16be=r=>new Le(2,r);R.u24be=r=>new Le(3,r);R.u32be=r=>new Le(4,r);R.u40be=r=>new Le(5,r);R.u48be=r=>new Le(6,r);R.nu64be=r=>new Do(r);R.s8=r=>new nr(1,r);R.s16=r=>new nr(2,r);R.s24=r=>new nr(3,r);R.s32=r=>new nr(4,r);R.s40=r=>new nr(5,r);R.s48=r=>new nr(6,r);R.ns64=r=>new Fo(r);R.s16be=r=>new Er(2,r);R.s24be=r=>new Er(3,r);R.s32be=r=>new Er(4,r);R.s40be=r=>new Er(5,r);R.s48be=r=>new Er(6,r);R.ns64be=r=>new Wo(r);R.f32=r=>new Ho(r);R.f32be=r=>new Vo(r);R.f64=r=>new $o(r);R.f64be=r=>new Go(r);R.struct=(r,t,e)=>new Yo(r,t,e);R.bits=(r,t,e)=>new Mn(r,t,e);R.seq=(r,t,e)=>new jo(r,t,e);R.union=(r,t,e)=>new Tn(r,t,e);R.unionLayoutDiscriminator=(r,t)=>new on(r,t);R.blob=(r,t)=>new Jo(r,t);R.cstr=r=>new Qo(r);R.utf8=(r,t)=>new ti(r,t);R.constant=(r,t)=>new ei(r,t)});var yu=st(an=>{"use strict";B();Object.defineProperty(an,"__esModule",{value:!0});var oi;function gd(r){{let t=Buffer.from(r);t.reverse();let e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}return oi.toBigInt(r,!1)}an.toBigIntLE=gd;function md(r){{let t=r.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}return oi.toBigInt(r,!0)}an.toBigIntBE=md;function bd(r,t){{let e=r.toString(16),n=Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return n.reverse(),n}return oi.fromBigInt(r,Buffer.allocUnsafe(t),!1)}an.toBufferLE=bd;function wd(r,t){{let e=r.toString(16);return Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}return oi.fromBigInt(r,Buffer.allocUnsafe(t),!0)}an.toBufferBE=wd});function On(){if(!ai&&(ai=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ai))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ai(_d)}var ai,_d,Xs=he(()=>{B();_d=new Uint8Array(16)});var vu,xu=he(()=>{B();vu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Bd(r){return typeof r=="string"&&vu.test(r)}var Br,Un=he(()=>{B();xu();Br=Bd});function Id(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(le[r[t+0]]+le[r[t+1]]+le[r[t+2]]+le[r[t+3]]+"-"+le[r[t+4]]+le[r[t+5]]+"-"+le[r[t+6]]+le[r[t+7]]+"-"+le[r[t+8]]+le[r[t+9]]+"-"+le[r[t+10]]+le[r[t+11]]+le[r[t+12]]+le[r[t+13]]+le[r[t+14]]+le[r[t+15]]).toLowerCase();if(!Br(e))throw TypeError("Stringified UUID is invalid");return e}var le,ci,Ir,Nn=he(()=>{B();Un();le=[];for(ci=0;ci<256;++ci)le.push((ci+256).toString(16).substr(1));Ir=Id});function Ad(r,t,e){var n=t&&e||0,o=t||new Array(16);r=r||{};var i=r.node||Su,s=r.clockseq!==void 0?r.clockseq:Js;if(i==null||s==null){var l=r.random||(r.rng||On)();i==null&&(i=Su=[l[0]|1,l[1],l[2],l[3],l[4],l[5]]),s==null&&(s=Js=(l[6]<<8|l[7])&16383)}var f=r.msecs!==void 0?r.msecs:Date.now(),m=r.nsecs!==void 0?r.nsecs:ta+1,v=f-Qs+(m-ta)/1e4;if(v<0&&r.clockseq===void 0&&(s=s+1&16383),(v<0||f>Qs)&&r.nsecs===void 0&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Qs=f,ta=m,Js=s,f+=122192928e5;var x=((f&268435455)*1e4+m)%4294967296;o[n++]=x>>>24&255,o[n++]=x>>>16&255,o[n++]=x>>>8&255,o[n++]=x&255;var M=f/4294967296*1e4&268435455;o[n++]=M>>>8&255,o[n++]=M&255,o[n++]=M>>>24&15|16,o[n++]=M>>>16&255,o[n++]=s>>>8|128,o[n++]=s&255;for(var E=0;E<6;++E)o[n+E]=i[E];return t||Ir(o)}var Su,Js,Qs,ta,ku,Eu=he(()=>{B();Xs();Nn();Qs=0,ta=0;ku=Ad});function Rd(r){if(!Br(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}var ui,ea=he(()=>{B();Un();ui=Rd});function Ld(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}function fi(r,t,e){function n(o,i,s,l){if(typeof o=="string"&&(o=Ld(o)),typeof i=="string"&&(i=ui(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var f=new Uint8Array(16+o.length);if(f.set(i),f.set(o,i.length),f=e(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,s){l=l||0;for(var m=0;m<16;++m)s[l+m]=f[m];return s}return Ir(f)}try{n.name=r}catch{}return n.DNS=Td,n.URL=Md,n}var Td,Md,ra=he(()=>{B();Nn();ea();Td="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Md="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Pd(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return Cd(Od(Ud(r),r.length*8))}function Cd(r){for(var t=[],e=r.length*32,n="0123456789abcdef",o=0;o<e;o+=8){var i=r[o>>5]>>>o%32&255,s=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);t.push(s)}return t}function _u(r){return(r+64>>>9<<4)+14+1}function Od(r,t){r[t>>5]|=128<<t%32,r[_u(t)-1]=t;for(var e=1732584193,n=-271733879,o=-1732584194,i=271733878,s=0;s<r.length;s+=16){var l=e,f=n,m=o,v=i;e=ye(e,n,o,i,r[s],7,-680876936),i=ye(i,e,n,o,r[s+1],12,-389564586),o=ye(o,i,e,n,r[s+2],17,606105819),n=ye(n,o,i,e,r[s+3],22,-1044525330),e=ye(e,n,o,i,r[s+4],7,-176418897),i=ye(i,e,n,o,r[s+5],12,1200080426),o=ye(o,i,e,n,r[s+6],17,-1473231341),n=ye(n,o,i,e,r[s+7],22,-45705983),e=ye(e,n,o,i,r[s+8],7,1770035416),i=ye(i,e,n,o,r[s+9],12,-1958414417),o=ye(o,i,e,n,r[s+10],17,-42063),n=ye(n,o,i,e,r[s+11],22,-1990404162),e=ye(e,n,o,i,r[s+12],7,1804603682),i=ye(i,e,n,o,r[s+13],12,-40341101),o=ye(o,i,e,n,r[s+14],17,-1502002290),n=ye(n,o,i,e,r[s+15],22,1236535329),e=ge(e,n,o,i,r[s+1],5,-165796510),i=ge(i,e,n,o,r[s+6],9,-1069501632),o=ge(o,i,e,n,r[s+11],14,643717713),n=ge(n,o,i,e,r[s],20,-373897302),e=ge(e,n,o,i,r[s+5],5,-701558691),i=ge(i,e,n,o,r[s+10],9,38016083),o=ge(o,i,e,n,r[s+15],14,-660478335),n=ge(n,o,i,e,r[s+4],20,-405537848),e=ge(e,n,o,i,r[s+9],5,568446438),i=ge(i,e,n,o,r[s+14],9,-1019803690),o=ge(o,i,e,n,r[s+3],14,-187363961),n=ge(n,o,i,e,r[s+8],20,1163531501),e=ge(e,n,o,i,r[s+13],5,-1444681467),i=ge(i,e,n,o,r[s+2],9,-51403784),o=ge(o,i,e,n,r[s+7],14,1735328473),n=ge(n,o,i,e,r[s+12],20,-1926607734),e=me(e,n,o,i,r[s+5],4,-378558),i=me(i,e,n,o,r[s+8],11,-2022574463),o=me(o,i,e,n,r[s+11],16,1839030562),n=me(n,o,i,e,r[s+14],23,-35309556),e=me(e,n,o,i,r[s+1],4,-1530992060),i=me(i,e,n,o,r[s+4],11,1272893353),o=me(o,i,e,n,r[s+7],16,-155497632),n=me(n,o,i,e,r[s+10],23,-1094730640),e=me(e,n,o,i,r[s+13],4,681279174),i=me(i,e,n,o,r[s],11,-358537222),o=me(o,i,e,n,r[s+3],16,-722521979),n=me(n,o,i,e,r[s+6],23,76029189),e=me(e,n,o,i,r[s+9],4,-640364487),i=me(i,e,n,o,r[s+12],11,-421815835),o=me(o,i,e,n,r[s+15],16,530742520),n=me(n,o,i,e,r[s+2],23,-995338651),e=be(e,n,o,i,r[s],6,-198630844),i=be(i,e,n,o,r[s+7],10,1126891415),o=be(o,i,e,n,r[s+14],15,-1416354905),n=be(n,o,i,e,r[s+5],21,-57434055),e=be(e,n,o,i,r[s+12],6,1700485571),i=be(i,e,n,o,r[s+3],10,-1894986606),o=be(o,i,e,n,r[s+10],15,-1051523),n=be(n,o,i,e,r[s+1],21,-2054922799),e=be(e,n,o,i,r[s+8],6,1873313359),i=be(i,e,n,o,r[s+15],10,-30611744),o=be(o,i,e,n,r[s+6],15,-1560198380),n=be(n,o,i,e,r[s+13],21,1309151649),e=be(e,n,o,i,r[s+4],6,-145523070),i=be(i,e,n,o,r[s+11],10,-1120210379),o=be(o,i,e,n,r[s+2],15,718787259),n=be(n,o,i,e,r[s+9],21,-343485551),e=Ar(e,l),n=Ar(n,f),o=Ar(o,m),i=Ar(i,v)}return[e,n,o,i]}function Ud(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(_u(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function Ar(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function Nd(r,t){return r<<t|r>>>32-t}function li(r,t,e,n,o,i){return Ar(Nd(Ar(Ar(t,r),Ar(n,i)),o),e)}function ye(r,t,e,n,o,i,s){return li(t&e|~t&n,r,t,o,i,s)}function ge(r,t,e,n,o,i,s){return li(t&n|e&~n,r,t,o,i,s)}function me(r,t,e,n,o,i,s){return li(t^e^n,r,t,o,i,s)}function be(r,t,e,n,o,i,s){return li(e^(t|~n),r,t,o,i,s)}var Bu,Iu=he(()=>{B();Bu=Pd});var qd,Au,Ru=he(()=>{B();ra();Iu();qd=fi("v3",48,Bu),Au=qd});function zd(r,t,e){r=r||{};var n=r.random||(r.rng||On)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var o=0;o<16;++o)t[e+o]=n[o];return t}return Ir(n)}var Lu,Tu=he(()=>{B();Xs();Nn();Lu=zd});function Kd(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function na(r,t){return r<<t|r>>>32-t}function Dd(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var o=0;o<n.length;++o)r.push(n.charCodeAt(o))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,s=Math.ceil(i/16),l=new Array(s),f=0;f<s;++f){for(var m=new Uint32Array(16),v=0;v<16;++v)m[v]=r[f*64+v*4]<<24|r[f*64+v*4+1]<<16|r[f*64+v*4+2]<<8|r[f*64+v*4+3];l[f]=m}l[s-1][14]=(r.length-1)*8/Math.pow(2,32),l[s-1][14]=Math.floor(l[s-1][14]),l[s-1][15]=(r.length-1)*8&4294967295;for(var x=0;x<s;++x){for(var M=new Uint32Array(80),E=0;E<16;++E)M[E]=l[x][E];for(var T=16;T<80;++T)M[T]=na(M[T-3]^M[T-8]^M[T-14]^M[T-16],1);for(var _=e[0],I=e[1],L=e[2],N=e[3],C=e[4],F=0;F<80;++F){var q=Math.floor(F/20),O=na(_,5)+Kd(q,I,L,N)+C+t[q]+M[F]>>>0;C=N,N=L,L=na(I,30)>>>0,I=_,_=O}e[0]=e[0]+_>>>0,e[1]=e[1]+I>>>0,e[2]=e[2]+L>>>0,e[3]=e[3]+N>>>0,e[4]=e[4]+C>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Mu,Pu=he(()=>{B();Mu=Dd});var Fd,Cu,Ou=he(()=>{B();ra();Pu();Fd=fi("v5",80,Mu),Cu=Fd});var Uu,Nu=he(()=>{B();Uu="00000000-0000-0000-0000-000000000000"});function Wd(r){if(!Br(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}var qu,zu=he(()=>{B();Un();qu=Wd});var oa={};ec(oa,{NIL:()=>Uu,parse:()=>ui,stringify:()=>Ir,v1:()=>ku,v3:()=>Au,v4:()=>Lu,v5:()=>Cu,validate:()=>Br,version:()=>qu});var ia=he(()=>{B();Eu();Ru();Tu();Ou();Nu();zu();Un();Nn();ea()});var Du=st((db,Ku)=>{"use strict";B();var Hd=(ia(),nc(oa)).v4,Vd=function(r,t,e,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};let o=typeof n.version=="number"?n.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");let i={method:r};if(o===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){let s=typeof n.generator=="function"?n.generator:function(){return Hd()};i.id=s(i,n)}else o===2&&e===null?n.notificationIdNull&&(i.id=null):i.id=e;return i};Ku.exports=Vd});var Wu=st((yb,Fu)=>{"use strict";B();var $d=(ia(),nc(oa)).v4,Gd=Du(),qn=function(r,t){if(!(this instanceof qn))return new qn(r,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return $d()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=r};Fu.exports=qn;qn.prototype.request=function(r,t,e,n){let o=this,i=null,s=Array.isArray(r)&&typeof t=="function";if(this.options.version===1&&s)throw new TypeError("JSON-RPC 1.0 does not support batching");if(s||!s&&r&&typeof r=="object"&&typeof t=="function")n=t,i=r;else{typeof e=="function"&&(n=e,e=void 0);let m=typeof n=="function";try{i=Gd(r,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(v){if(m)return n(v);throw v}if(!m)return i}let f;try{f=JSON.stringify(i,this.options.replacer)}catch(m){return n(m)}return this.callServer(f,function(m,v){o._parseResponse(m,v,n)}),i};qn.prototype._parseResponse=function(r,t,e){if(r){e(r);return}if(!t)return e();let n;try{n=JSON.parse(t,this.options.reviver)}catch(o){return e(o)}if(e.length===3)if(Array.isArray(n)){let o=function(s){return typeof s.error<"u"},i=function(s){return!o(s)};return e(null,n.filter(o),n.filter(i))}else return e(null,n.error,n.result);e(null,n)}});var hi=st((mb,zn)=>{B();function jd(r){return r&&r.__esModule?r:{default:r}}zn.exports=jd,zn.exports.__esModule=!0,zn.exports.default=zn.exports});var ln=st((wb,or)=>{B();function sa(r){"@babel/helpers - typeof";return or.exports=sa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},or.exports.__esModule=!0,or.exports.default=or.exports,sa(r)}or.exports=sa,or.exports.__esModule=!0,or.exports.default=or.exports});var $u=st((xb,ir)=>{B();var Hu=ln().default;function Vu(){"use strict";ir.exports=Vu=function(){return t},ir.exports.__esModule=!0,ir.exports.default=ir.exports;var r,t={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(h,d,p){h[d]=p.value},i=typeof Symbol=="function"?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",f=i.toStringTag||"@@toStringTag";function m(h,d,p){return Object.defineProperty(h,d,{value:p,enumerable:!0,configurable:!0,writable:!0}),h[d]}try{m({},"")}catch{m=function(p,g,w){return p[g]=w}}function v(h,d,p,g){var w=d&&d.prototype instanceof L?d:L,y=Object.create(w.prototype),c=new a(g||[]);return o(y,"_invoke",{value:it(h,p,c)}),y}function x(h,d,p){try{return{type:"normal",arg:h.call(d,p)}}catch(g){return{type:"throw",arg:g}}}t.wrap=v;var M="suspendedStart",E="suspendedYield",T="executing",_="completed",I={};function L(){}function N(){}function C(){}var F={};m(F,s,function(){return this});var q=Object.getPrototypeOf,O=q&&q(q(u([])));O&&O!==e&&n.call(O,s)&&(F=O);var W=C.prototype=L.prototype=Object.create(F);function G(h){["next","throw","return"].forEach(function(d){m(h,d,function(p){return this._invoke(d,p)})})}function ut(h,d){function p(w,y,c,b){var U=x(h[w],h,y);if(U.type!=="throw"){var D=U.arg,K=D.value;return K&&Hu(K)=="object"&&n.call(K,"__await")?d.resolve(K.__await).then(function(V){p("next",V,c,b)},function(V){p("throw",V,c,b)}):d.resolve(K).then(function(V){D.value=V,c(D)},function(V){return p("throw",V,c,b)})}b(U.arg)}var g;o(this,"_invoke",{value:function(y,c){function b(){return new d(function(U,D){p(y,c,U,D)})}return g=g?g.then(b,b):b()}})}function it(h,d,p){var g=M;return function(w,y){if(g===T)throw new Error("Generator is already running");if(g===_){if(w==="throw")throw y;return{value:r,done:!0}}for(p.method=w,p.arg=y;;){var c=p.delegate;if(c){var b=Z(c,p);if(b){if(b===I)continue;return b}}if(p.method==="next")p.sent=p._sent=p.arg;else if(p.method==="throw"){if(g===M)throw g=_,p.arg;p.dispatchException(p.arg)}else p.method==="return"&&p.abrupt("return",p.arg);g=T;var U=x(h,d,p);if(U.type==="normal"){if(g=p.done?_:E,U.arg===I)continue;return{value:U.arg,done:p.done}}U.type==="throw"&&(g=_,p.method="throw",p.arg=U.arg)}}}function Z(h,d){var p=d.method,g=h.iterator[p];if(g===r)return d.delegate=null,p==="throw"&&h.iterator.return&&(d.method="return",d.arg=r,Z(h,d),d.method==="throw")||p!=="return"&&(d.method="throw",d.arg=new TypeError("The iterator does not provide a '"+p+"' method")),I;var w=x(g,h.iterator,d.arg);if(w.type==="throw")return d.method="throw",d.arg=w.arg,d.delegate=null,I;var y=w.arg;return y?y.done?(d[h.resultName]=y.value,d.next=h.nextLoc,d.method!=="return"&&(d.method="next",d.arg=r),d.delegate=null,I):y:(d.method="throw",d.arg=new TypeError("iterator result is not an object"),d.delegate=null,I)}function dt(h){var d={tryLoc:h[0]};1 in h&&(d.catchLoc=h[1]),2 in h&&(d.finallyLoc=h[2],d.afterLoc=h[3]),this.tryEntries.push(d)}function S(h){var d=h.completion||{};d.type="normal",delete d.arg,h.completion=d}function a(h){this.tryEntries=[{tryLoc:"root"}],h.forEach(dt,this),this.reset(!0)}function u(h){if(h||h===""){var d=h[s];if(d)return d.call(h);if(typeof h.next=="function")return h;if(!isNaN(h.length)){var p=-1,g=function w(){for(;++p<h.length;)if(n.call(h,p))return w.value=h[p],w.done=!1,w;return w.value=r,w.done=!0,w};return g.next=g}}throw new TypeError(Hu(h)+" is not iterable")}return N.prototype=C,o(W,"constructor",{value:C,configurable:!0}),o(C,"constructor",{value:N,configurable:!0}),N.displayName=m(C,f,"GeneratorFunction"),t.isGeneratorFunction=function(h){var d=typeof h=="function"&&h.constructor;return!!d&&(d===N||(d.displayName||d.name)==="GeneratorFunction")},t.mark=function(h){return Object.setPrototypeOf?Object.setPrototypeOf(h,C):(h.__proto__=C,m(h,f,"GeneratorFunction")),h.prototype=Object.create(W),h},t.awrap=function(h){return{__await:h}},G(ut.prototype),m(ut.prototype,l,function(){return this}),t.AsyncIterator=ut,t.async=function(h,d,p,g,w){w===void 0&&(w=Promise);var y=new ut(v(h,d,p,g),w);return t.isGeneratorFunction(d)?y:y.next().then(function(c){return c.done?c.value:y.next()})},G(W),m(W,f,"Generator"),m(W,s,function(){return this}),m(W,"toString",function(){return"[object Generator]"}),t.keys=function(h){var d=Object(h),p=[];for(var g in d)p.push(g);return p.reverse(),function w(){for(;p.length;){var y=p.pop();if(y in d)return w.value=y,w.done=!1,w}return w.done=!0,w}},t.values=u,a.prototype={constructor:a,reset:function(d){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(S),!d)for(var p in this)p.charAt(0)==="t"&&n.call(this,p)&&!isNaN(+p.slice(1))&&(this[p]=r)},stop:function(){this.done=!0;var d=this.tryEntries[0].completion;if(d.type==="throw")throw d.arg;return this.rval},dispatchException:function(d){if(this.done)throw d;var p=this;function g(D,K){return c.type="throw",c.arg=d,p.next=D,K&&(p.method="next",p.arg=r),!!K}for(var w=this.tryEntries.length-1;w>=0;--w){var y=this.tryEntries[w],c=y.completion;if(y.tryLoc==="root")return g("end");if(y.tryLoc<=this.prev){var b=n.call(y,"catchLoc"),U=n.call(y,"finallyLoc");if(b&&U){if(this.prev<y.catchLoc)return g(y.catchLoc,!0);if(this.prev<y.finallyLoc)return g(y.finallyLoc)}else if(b){if(this.prev<y.catchLoc)return g(y.catchLoc,!0)}else{if(!U)throw new Error("try statement without catch or finally");if(this.prev<y.finallyLoc)return g(y.finallyLoc)}}}},abrupt:function(d,p){for(var g=this.tryEntries.length-1;g>=0;--g){var w=this.tryEntries[g];if(w.tryLoc<=this.prev&&n.call(w,"finallyLoc")&&this.prev<w.finallyLoc){var y=w;break}}y&&(d==="break"||d==="continue")&&y.tryLoc<=p&&p<=y.finallyLoc&&(y=null);var c=y?y.completion:{};return c.type=d,c.arg=p,y?(this.method="next",this.next=y.finallyLoc,I):this.complete(c)},complete:function(d,p){if(d.type==="throw")throw d.arg;return d.type==="break"||d.type==="continue"?this.next=d.arg:d.type==="return"?(this.rval=this.arg=d.arg,this.method="return",this.next="end"):d.type==="normal"&&p&&(this.next=p),I},finish:function(d){for(var p=this.tryEntries.length-1;p>=0;--p){var g=this.tryEntries[p];if(g.finallyLoc===d)return this.complete(g.completion,g.afterLoc),S(g),I}},catch:function(d){for(var p=this.tryEntries.length-1;p>=0;--p){var g=this.tryEntries[p];if(g.tryLoc===d){var w=g.completion;if(w.type==="throw"){var y=w.arg;S(g)}return y}}throw new Error("illegal catch attempt")},delegateYield:function(d,p,g){return this.delegate={iterator:u(d),resultName:p,nextLoc:g},this.method==="next"&&(this.arg=r),I}},t}ir.exports=Vu,ir.exports.__esModule=!0,ir.exports.default=ir.exports});var ju=st((kb,Gu)=>{B();var di=$u()();Gu.exports=di;try{regeneratorRuntime=di}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=di:Function("r","regeneratorRuntime = r")(di)}});var Zu=st((_b,Kn)=>{B();function Yu(r,t,e,n,o,i,s){try{var l=r[i](s),f=l.value}catch(m){e(m);return}l.done?t(f):Promise.resolve(f).then(n,o)}function Yd(r){return function(){var t=this,e=arguments;return new Promise(function(n,o){var i=r.apply(t,e);function s(f){Yu(i,n,o,s,l,"next",f)}function l(f){Yu(i,n,o,s,l,"throw",f)}s(void 0)})}}Kn.exports=Yd,Kn.exports.__esModule=!0,Kn.exports.default=Kn.exports});var pi=st((Ib,Dn)=>{B();function Zd(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}Dn.exports=Zd,Dn.exports.__esModule=!0,Dn.exports.default=Dn.exports});var Ju=st((Rb,Fn)=>{B();var Xu=ln().default;function Xd(r,t){if(Xu(r)!="object"||!r)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var n=e.call(r,t||"default");if(Xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}Fn.exports=Xd,Fn.exports.__esModule=!0,Fn.exports.default=Fn.exports});var Qu=st((Tb,Wn)=>{B();var Jd=ln().default,Qd=Ju();function t0(r){var t=Qd(r,"string");return Jd(t)=="symbol"?t:String(t)}Wn.exports=t0,Wn.exports.__esModule=!0,Wn.exports.default=Wn.exports});var yi=st((Pb,Hn)=>{B();var e0=Qu();function tf(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,e0(n.key),n)}}function r0(r,t,e){return t&&tf(r.prototype,t),e&&tf(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}Hn.exports=r0,Hn.exports.__esModule=!0,Hn.exports.default=Hn.exports});var ef=st((Ob,sr)=>{B();function aa(r,t){return sr.exports=aa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},sr.exports.__esModule=!0,sr.exports.default=sr.exports,aa(r,t)}sr.exports=aa,sr.exports.__esModule=!0,sr.exports.default=sr.exports});var ca=st((Nb,Vn)=>{B();var n0=ef();function o0(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&n0(r,t)}Vn.exports=o0,Vn.exports.__esModule=!0,Vn.exports.default=Vn.exports});var rf=st((zb,$n)=>{B();function i0(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}$n.exports=i0,$n.exports.__esModule=!0,$n.exports.default=$n.exports});var ua=st((Db,Gn)=>{B();var s0=ln().default,a0=rf();function c0(r,t){if(t&&(s0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return a0(r)}Gn.exports=c0,Gn.exports.__esModule=!0,Gn.exports.default=Gn.exports});var la=st((Wb,ar)=>{B();function fa(r){return ar.exports=fa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ar.exports.__esModule=!0,ar.exports.default=ar.exports,fa(r)}ar.exports=fa,ar.exports.__esModule=!0,ar.exports.default=ar.exports});var da=st((Vb,ha)=>{"use strict";B();var u0=Object.prototype.hasOwnProperty,Ee="~";function jn(){}Object.create&&(jn.prototype=Object.create(null),new jn().__proto__||(Ee=!1));function f0(r,t,e){this.fn=r,this.context=t,this.once=e||!1}function nf(r,t,e,n,o){if(typeof e!="function")throw new TypeError("The listener must be a function");var i=new f0(e,n||r,o),s=Ee?Ee+t:t;return r._events[s]?r._events[s].fn?r._events[s]=[r._events[s],i]:r._events[s].push(i):(r._events[s]=i,r._eventsCount++),r}function gi(r,t){--r._eventsCount===0?r._events=new jn:delete r._events[t]}function we(){this._events=new jn,this._eventsCount=0}we.prototype.eventNames=function(){var t=[],e,n;if(this._eventsCount===0)return t;for(n in e=this._events)u0.call(e,n)&&t.push(Ee?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(e)):t};we.prototype.listeners=function(t){var e=Ee?Ee+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,s=new Array(i);o<i;o++)s[o]=n[o].fn;return s};we.prototype.listenerCount=function(t){var e=Ee?Ee+t:t,n=this._events[e];return n?n.fn?1:n.length:0};we.prototype.emit=function(t,e,n,o,i,s){var l=Ee?Ee+t:t;if(!this._events[l])return!1;var f=this._events[l],m=arguments.length,v,x;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),m){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,n),!0;case 4:return f.fn.call(f.context,e,n,o),!0;case 5:return f.fn.call(f.context,e,n,o,i),!0;case 6:return f.fn.call(f.context,e,n,o,i,s),!0}for(x=1,v=new Array(m-1);x<m;x++)v[x-1]=arguments[x];f.fn.apply(f.context,v)}else{var M=f.length,E;for(x=0;x<M;x++)switch(f[x].once&&this.removeListener(t,f[x].fn,void 0,!0),m){case 1:f[x].fn.call(f[x].context);break;case 2:f[x].fn.call(f[x].context,e);break;case 3:f[x].fn.call(f[x].context,e,n);break;case 4:f[x].fn.call(f[x].context,e,n,o);break;default:if(!v)for(E=1,v=new Array(m-1);E<m;E++)v[E-1]=arguments[E];f[x].fn.apply(f[x].context,v)}}return!0};we.prototype.on=function(t,e,n){return nf(this,t,e,n,!1)};we.prototype.once=function(t,e,n){return nf(this,t,e,n,!0)};we.prototype.removeListener=function(t,e,n,o){var i=Ee?Ee+t:t;if(!this._events[i])return this;if(!e)return gi(this,i),this;var s=this._events[i];if(s.fn)s.fn===e&&(!o||s.once)&&(!n||s.context===n)&&gi(this,i);else{for(var l=0,f=[],m=s.length;l<m;l++)(s[l].fn!==e||o&&!s[l].once||n&&s[l].context!==n)&&f.push(s[l]);f.length?this._events[i]=f.length===1?f[0]:f:gi(this,i)}return this};we.prototype.removeAllListeners=function(t){var e;return t?(e=Ee?Ee+t:t,this._events[e]&&gi(this,e)):(this._events=new jn,this._eventsCount=0),this};we.prototype.off=we.prototype.removeListener;we.prototype.addListener=we.prototype.on;we.prefixed=Ee;we.EventEmitter=we;typeof ha<"u"&&(ha.exports=we)});var sf=st(Yn=>{"use strict";B();var of=hi();Object.defineProperty(Yn,"__esModule",{value:!0});Yn.DefaultDataPack=void 0;Yn.createError=y0;var l0=of(pi()),h0=of(yi()),d0=new Map([[-32e3,"Event not provided"],[-32600,"Invalid Request"],[-32601,"Method not found"],[-32602,"Invalid params"],[-32603,"Internal error"],[-32604,"Params not found"],[-32605,"Method forbidden"],[-32606,"Event forbidden"],[-32700,"Parse error"]]),p0=function(){function r(){(0,l0.default)(this,r)}return(0,h0.default)(r,[{key:"encode",value:function(e){return JSON.stringify(e)}},{key:"decode",value:function(e){return JSON.parse(e)}}]),r}();Yn.DefaultDataPack=p0;function y0(r,t){var e={code:r,message:d0.get(r)||"Internal Server Error"};return t&&(e.data=t),e}});var cf=st(bi=>{"use strict";B();var Lr=hi();Object.defineProperty(bi,"__esModule",{value:!0});bi.default=void 0;var Rr=Lr(ju()),mi=Lr(Zu()),g0=Lr(ln()),m0=Lr(pi()),b0=Lr(yi()),w0=Lr(ca()),v0=Lr(ua()),af=Lr(la()),x0=da(),S0=sf();function k0(r){var t=E0();return function(){var n=(0,af.default)(r),o;if(t){var i=(0,af.default)(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return(0,v0.default)(this,o)}}function E0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var _0=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(r);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(r,n[o])&&(e[n[o]]=r[n[o]]);return e},B0=function(r){(0,w0.default)(e,r);var t=k0(e);function e(n){var o,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3?arguments[3]:void 0,f=arguments.length>4?arguments[4]:void 0;(0,m0.default)(this,e);var m=s.autoconnect,v=m===void 0?!0:m,x=s.reconnect,M=x===void 0?!0:x,E=s.reconnect_interval,T=E===void 0?1e3:E,_=s.max_reconnects,I=_===void 0?5:_,L=_0(s,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return o=t.call(this),o.webSocketFactory=n,o.queue={},o.rpc_id=0,o.address=i,o.autoconnect=v,o.ready=!1,o.reconnect=M,o.reconnect_timer_id=void 0,o.reconnect_interval=T,o.max_reconnects=I,o.rest_options=L,o.current_reconnects=0,o.generate_request_id=l||function(){return++o.rpc_id},f?o.dataPack=f:o.dataPack=new S0.DefaultDataPack,o.autoconnect&&o._connect(o.address,Object.assign({autoconnect:o.autoconnect,reconnect:o.reconnect,reconnect_interval:o.reconnect_interval,max_reconnects:o.max_reconnects},o.rest_options)),o}return(0,b0.default)(e,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(o,i,s,l){var f=this;return!l&&(0,g0.default)(s)==="object"&&(l=s,s=null),new Promise(function(m,v){if(!f.ready)return v(new Error("socket not ready"));var x=f.generate_request_id(o,i),M={jsonrpc:"2.0",method:o,params:i||void 0,id:x};f.socket.send(f.dataPack.encode(M),l,function(E){if(E)return v(E);f.queue[x]={promise:[m,v]},s&&(f.queue[x].timeout=setTimeout(function(){delete f.queue[x],v(new Error("reply timeout"))},s))})})}},{key:"login",value:function(){var n=(0,mi.default)(Rr.default.mark(function i(s){var l;return Rr.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.call("rpc.login",s);case 2:if(l=m.sent,l){m.next=5;break}throw new Error("authentication failed");case 5:return m.abrupt("return",l);case 6:case"end":return m.stop()}},i,this)}));function o(i){return n.apply(this,arguments)}return o}()},{key:"listMethods",value:function(){var n=(0,mi.default)(Rr.default.mark(function i(){return Rr.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,this.call("__listMethods");case 2:return l.abrupt("return",l.sent);case 3:case"end":return l.stop()}},i,this)}));function o(){return n.apply(this,arguments)}return o}()},{key:"notify",value:function(o,i){var s=this;return new Promise(function(l,f){if(!s.ready)return f(new Error("socket not ready"));var m={jsonrpc:"2.0",method:o,params:i};s.socket.send(s.dataPack.encode(m),function(v){if(v)return f(v);l()})})}},{key:"subscribe",value:function(){var n=(0,mi.default)(Rr.default.mark(function i(s){var l;return Rr.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return typeof s=="string"&&(s=[s]),m.next=3,this.call("rpc.on",s);case 3:if(l=m.sent,!(typeof s=="string"&&l[s]!=="ok")){m.next=6;break}throw new Error("Failed subscribing to an event '"+s+"' with: "+l[s]);case 6:return m.abrupt("return",l);case 7:case"end":return m.stop()}},i,this)}));function o(i){return n.apply(this,arguments)}return o}()},{key:"unsubscribe",value:function(){var n=(0,mi.default)(Rr.default.mark(function i(s){var l;return Rr.default.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return typeof s=="string"&&(s=[s]),m.next=3,this.call("rpc.off",s);case 3:if(l=m.sent,!(typeof s=="string"&&l[s]!=="ok")){m.next=6;break}throw new Error("Failed unsubscribing from an event with: "+l);case 6:return m.abrupt("return",l);case 7:case"end":return m.stop()}},i,this)}));function o(i){return n.apply(this,arguments)}return o}()},{key:"close",value:function(o,i){this.socket.close(o||1e3,i)}},{key:"_connect",value:function(o,i){var s=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(o,i),this.socket.addEventListener("open",function(){s.ready=!0,s.emit("open"),s.current_reconnects=0}),this.socket.addEventListener("message",function(l){var f=l.data;f instanceof ArrayBuffer&&(f=Buffer.from(f).toString());try{f=s.dataPack.decode(f)}catch{return}if(f.notification&&s.listeners(f.notification).length){if(!Object.keys(f.params).length)return s.emit(f.notification);var m=[f.notification];if(f.params.constructor===Object)m.push(f.params);else for(var v=0;v<f.params.length;v++)m.push(f.params[v]);return Promise.resolve().then(function(){s.emit.apply(s,m)})}if(!s.queue[f.id])return f.method?Promise.resolve().then(function(){s.emit(f.method,f?.params)}):void 0;"error"in f=="result"in f&&s.queue[f.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),s.queue[f.id].timeout&&clearTimeout(s.queue[f.id].timeout),f.error?s.queue[f.id].promise[1](f.error):s.queue[f.id].promise[0](f.result),delete s.queue[f.id]}),this.socket.addEventListener("error",function(l){return s.emit("error",l)}),this.socket.addEventListener("close",function(l){var f=l.code,m=l.reason;s.ready&&setTimeout(function(){return s.emit("close",f,m)},0),s.ready=!1,s.socket=void 0,f!==1e3&&(s.current_reconnects++,s.reconnect&&(s.max_reconnects>s.current_reconnects||s.max_reconnects===0)&&(s.reconnect_timer_id=setTimeout(function(){return s._connect(o,i)},s.reconnect_interval)))})}}]),e}(x0.EventEmitter);bi.default=B0});var ff=st(pa=>{"use strict";B();var Zn=hi();Object.defineProperty(pa,"__esModule",{value:!0});pa.default=O0;var I0=Zn(pi()),A0=Zn(yi()),R0=Zn(ca()),L0=Zn(ua()),uf=Zn(la()),T0=da();function M0(r){var t=P0();return function(){var n=(0,uf.default)(r),o;if(t){var i=(0,uf.default)(this).constructor;o=Reflect.construct(n,arguments,i)}else o=n.apply(this,arguments);return(0,L0.default)(this,o)}}function P0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var C0=function(r){(0,R0.default)(e,r);var t=M0(e);function e(n,o,i){var s;return(0,I0.default)(this,e),s=t.call(this),s.socket=new window.WebSocket(n,i),s.socket.onopen=function(){return s.emit("open")},s.socket.onmessage=function(l){return s.emit("message",l.data)},s.socket.onerror=function(l){return s.emit("error",l)},s.socket.onclose=function(l){s.emit("close",l.code,l.reason)},s}return(0,A0.default)(e,[{key:"send",value:function(o,i,s){var l=s||i;try{this.socket.send(o),l()}catch(f){l(f)}}},{key:"close",value:function(o,i){this.socket.close(o,i)}},{key:"addEventListener",value:function(o,i,s){this.socket.addEventListener(o,i,s)}}]),e}(T0.EventEmitter);function O0(r,t){return new C0(r,t)}});var Qf=st((ev,Jf)=>{"use strict";B();function Vp(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var o=r.charAt(n),i=o.charCodeAt(0);if(t[i]!==255)throw new TypeError(o+" is ambiguous");t[i]=n}var s=r.length,l=r.charAt(0),f=Math.log(s)/Math.log(256),m=Math.log(256)/Math.log(s);function v(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var T=0,_=0,I=0,L=E.length;I!==L&&E[I]===0;)I++,T++;for(var N=(L-I)*m+1>>>0,C=new Uint8Array(N);I!==L;){for(var F=E[I],q=0,O=N-1;(F!==0||q<_)&&O!==-1;O--,q++)F+=256*C[O]>>>0,C[O]=F%s>>>0,F=F/s>>>0;if(F!==0)throw new Error("Non-zero carry");_=q,I++}for(var W=N-_;W!==N&&C[W]===0;)W++;for(var G=l.repeat(T);W<N;++W)G+=r.charAt(C[W]);return G}function x(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;for(var T=0,_=0,I=0;E[T]===l;)_++,T++;for(var L=(E.length-T)*f+1>>>0,N=new Uint8Array(L);E[T];){var C=t[E.charCodeAt(T)];if(C===255)return;for(var F=0,q=L-1;(C!==0||F<I)&&q!==-1;q--,F++)C+=s*N[q]>>>0,N[q]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");I=F,T++}for(var O=L-I;O!==L&&N[O]===0;)O++;for(var W=new Uint8Array(_+(L-O)),G=_;O!==L;)W[G++]=N[O++];return W}function M(E){var T=x(E);if(T)return T;throw new Error("Non-base"+s+" character")}return{encode:v,decodeUnsafe:x,decode:M}}Jf.exports=Vp});var Wa=st((nv,tl)=>{B();var $p=Qf(),Gp="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";tl.exports=$p(Gp)});B();B();B();B();var oc="channel-secure-ui-background-request",Xi="channel-secure-ui-background-response";B();B();function ic(r){return window.flutter_inappwebview.callHandler("request",r)}B();var cc=Ae(ac(),1);var uc=cc.default;B();B();var fo,dl=new Uint8Array(16);function Qi(){if(!fo&&(fo=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!fo))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fo(dl)}B();var ue=[];for(let r=0;r<256;++r)ue.push((r+256).toString(16).slice(1));function fc(r,t=0){return ue[r[t+0]]+ue[r[t+1]]+ue[r[t+2]]+ue[r[t+3]]+"-"+ue[r[t+4]]+ue[r[t+5]]+"-"+ue[r[t+6]]+ue[r[t+7]]+"-"+ue[r[t+8]]+ue[r[t+9]]+"-"+ue[r[t+10]]+ue[r[t+11]]+ue[r[t+12]]+ue[r[t+13]]+ue[r[t+14]]+ue[r[t+15]]}B();B();var pl=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ts={randomUUID:pl};function yl(r,t,e){if(ts.randomUUID&&!t&&!r)return ts.randomUUID();r=r||{};let n=r.random||(r.rng||Qi)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(let o=0;o<16;++o)t[e+o]=n[o];return t}return fc(n)}var es=yl;var lc=new uc,lo=class{constructor(t){this.responseQueue=[];this.responseHandler=t=>{if(t.channel!==Xi)return;let e=this.getRequest(t.data.id);e&&e.resolve(t.data)};this.getRequest=t=>{if(t===void 0)return null;let e=this.responseQueue.findIndex(o=>o.request.id===t);if(e<0)return null;let n=this.responseQueue[e];return this.responseQueue.splice(e,1),n??null};this.send=t=>new Promise(async e=>{let n={...t,origin:this.forwardOrigin?t.origin??this.origin:this.origin,id:es()};this.responseQueue.push({request:n,resolve:e});try{let o=await ic({channel:oc,data:n});lc.emit("message",{channel:Xi,data:o.data})}catch(o){let i=this.getRequest(n.id),s={name:n.name,id:n.id,error:o};if(i)return i.resolve(s)}});this.origin=t.origin,this.forwardOrigin=!!t.forwardOrigin,lc.on("message",this.responseHandler.bind(this))}};B();B();B();B();B();var ho=class{constructor(t){this.client=t}signMessage(t,e={}){return this.client.send({name:"SECURE_SVM_SIGN_MESSAGE",request:t,...e}).then(n=>n)}signTransaction(t,e={}){return this.client.send({name:"SECURE_SVM_SIGN_TX",request:t,...e}).then(n=>n)}signAllTransactions(t,e={}){return this.client.send({name:"SECURE_SVM_SIGN_ALL_TX",request:t,...e}).then(n=>n)}signIn(t,e={}){return this.client.send({name:"SECURE_SVM_SIGN_IN",request:t,...e}).then(n=>n)}connect(t,e={}){return this.client.send({name:"SECURE_SVM_CONNECT",request:t,...e}).then(n=>n)}disconnect(t={},e={}){return this.client.send({name:"SECURE_SVM_DISCONNECT",request:t,...e}).then(n=>n)}getKey(t={},e={}){return this.client.send({name:"SECURE_SVM_GETKEY",request:t,...e}).then(n=>n)}};B();B();var tt=Ae(En());B();B();B();B();function _n(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`positive integer expected, not ${r}`)}function jl(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function dr(r,...t){if(!jl(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${r.length}`)}function Mc(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");_n(r.outputLen),_n(r.blockLen)}function Ze(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function mo(r,t){dr(r);let e=t.outputLen;if(r.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}B();B();var bo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Pc=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),wo=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),ze=(r,t)=>r<<32-t|r>>>t;var hs=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,Yl=r=>r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255;function ds(r){for(let t=0;t<r.length;t++)r[t]=Yl(r[t])}function ps(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function yr(r){return typeof r=="string"&&(r=ps(r)),dr(r),r}function vo(...r){let t=0;for(let n=0;n<r.length;n++){let o=r[n];dr(o),t+=o.length}let e=new Uint8Array(t);for(let n=0,o=0;n<r.length;n++){let i=r[n];e.set(i,o),o+=i.length}return e}var pr=class{clone(){return this._cloneInto()}},tg={}.toString;function Qr(r){let t=n=>r().update(yr(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function Cc(r){let t=(n,o)=>r(o).update(yr(n)).digest(),e=r({});return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=n=>r(n),t}function xo(r=32){if(bo&&typeof bo.getRandomValues=="function")return bo.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}function Zl(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);let o=BigInt(32),i=BigInt(4294967295),s=Number(e>>o&i),l=Number(e&i),f=n?4:0,m=n?0:4;r.setUint32(t+f,s,n),r.setUint32(t+m,l,n)}var Oc=(r,t,e)=>r&t^~r&e,Uc=(r,t,e)=>r&t^r&e^t&e,tn=class extends pr{constructor(t,e,n,o){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=wo(this.buffer)}update(t){Ze(this);let{view:e,buffer:n,blockLen:o}=this;t=yr(t);let i=t.length;for(let s=0;s<i;){let l=Math.min(o-this.pos,i-s);if(l===o){let f=wo(t);for(;o<=i-s;s+=o)this.process(f,s);continue}n.set(t.subarray(s,s+l),this.pos),this.pos+=l,s+=l,this.pos===o&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ze(this),mo(t,this),this.finished=!0;let{buffer:e,view:n,blockLen:o,isLE:i}=this,{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(n,0),s=0);for(let x=s;x<o;x++)e[x]=0;Zl(n,o-8,BigInt(this.length*8),i),this.process(n,0);let l=wo(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let m=f/4,v=this.get();if(m>v.length)throw new Error("_sha2: outputLen bigger than state");for(let x=0;x<m;x++)l.setUint32(4*x,v[x],i)}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:e,buffer:n,length:o,finished:i,destroyed:s,pos:l}=this;return t.length=o,t.pos=l,t.finished=i,t.destroyed=s,o%e&&t.buffer.set(n),t}};B();var So=BigInt(4294967295),ys=BigInt(32);function Nc(r,t=!1){return t?{h:Number(r&So),l:Number(r>>ys&So)}:{h:Number(r>>ys&So)|0,l:Number(r&So)|0}}function gs(r,t=!1){let e=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let o=0;o<r.length;o++){let{h:i,l:s}=Nc(r[o],t);[e[o],n[o]]=[i,s]}return[e,n]}var Xl=(r,t)=>BigInt(r>>>0)<<ys|BigInt(t>>>0),Jl=(r,t,e)=>r>>>e,Ql=(r,t,e)=>r<<32-e|t>>>e,th=(r,t,e)=>r>>>e|t<<32-e,eh=(r,t,e)=>r<<32-e|t>>>e,rh=(r,t,e)=>r<<64-e|t>>>e-32,nh=(r,t,e)=>r>>>e-32|t<<64-e,oh=(r,t)=>t,ih=(r,t)=>r,ms=(r,t,e)=>r<<e|t>>>32-e,bs=(r,t,e)=>t<<e|r>>>32-e,ws=(r,t,e)=>t<<e-32|r>>>64-e,vs=(r,t,e)=>r<<e-32|t>>>64-e;function sh(r,t,e,n){let o=(t>>>0)+(n>>>0);return{h:r+e+(o/2**32|0)|0,l:o|0}}var ah=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),ch=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,uh=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),fh=(r,t,e,n,o)=>t+e+n+o+(r/2**32|0)|0,lh=(r,t,e,n,o)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(o>>>0),hh=(r,t,e,n,o,i)=>t+e+n+o+i+(r/2**32|0)|0;var dh={fromBig:Nc,split:gs,toBig:Xl,shrSH:Jl,shrSL:Ql,rotrSH:th,rotrSL:eh,rotrBH:rh,rotrBL:nh,rotr32H:oh,rotr32L:ih,rotlSH:ms,rotlSL:bs,rotlBH:ws,rotlBL:vs,add:sh,add3L:ah,add3H:ch,add4L:uh,add4H:fh,add5H:hh,add5L:lh},ot=dh;var[ph,yh]=ot.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),gr=new Uint32Array(80),mr=new Uint32Array(80),xs=class extends tn{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:t,Al:e,Bh:n,Bl:o,Ch:i,Cl:s,Dh:l,Dl:f,Eh:m,El:v,Fh:x,Fl:M,Gh:E,Gl:T,Hh:_,Hl:I}=this;return[t,e,n,o,i,s,l,f,m,v,x,M,E,T,_,I]}set(t,e,n,o,i,s,l,f,m,v,x,M,E,T,_,I){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=o|0,this.Ch=i|0,this.Cl=s|0,this.Dh=l|0,this.Dl=f|0,this.Eh=m|0,this.El=v|0,this.Fh=x|0,this.Fl=M|0,this.Gh=E|0,this.Gl=T|0,this.Hh=_|0,this.Hl=I|0}process(t,e){for(let C=0;C<16;C++,e+=4)gr[C]=t.getUint32(e),mr[C]=t.getUint32(e+=4);for(let C=16;C<80;C++){let F=gr[C-15]|0,q=mr[C-15]|0,O=ot.rotrSH(F,q,1)^ot.rotrSH(F,q,8)^ot.shrSH(F,q,7),W=ot.rotrSL(F,q,1)^ot.rotrSL(F,q,8)^ot.shrSL(F,q,7),G=gr[C-2]|0,ut=mr[C-2]|0,it=ot.rotrSH(G,ut,19)^ot.rotrBH(G,ut,61)^ot.shrSH(G,ut,6),Z=ot.rotrSL(G,ut,19)^ot.rotrBL(G,ut,61)^ot.shrSL(G,ut,6),dt=ot.add4L(W,Z,mr[C-7],mr[C-16]),S=ot.add4H(dt,O,it,gr[C-7],gr[C-16]);gr[C]=S|0,mr[C]=dt|0}let{Ah:n,Al:o,Bh:i,Bl:s,Ch:l,Cl:f,Dh:m,Dl:v,Eh:x,El:M,Fh:E,Fl:T,Gh:_,Gl:I,Hh:L,Hl:N}=this;for(let C=0;C<80;C++){let F=ot.rotrSH(x,M,14)^ot.rotrSH(x,M,18)^ot.rotrBH(x,M,41),q=ot.rotrSL(x,M,14)^ot.rotrSL(x,M,18)^ot.rotrBL(x,M,41),O=x&E^~x&_,W=M&T^~M&I,G=ot.add5L(N,q,W,yh[C],mr[C]),ut=ot.add5H(G,L,F,O,ph[C],gr[C]),it=G|0,Z=ot.rotrSH(n,o,28)^ot.rotrBH(n,o,34)^ot.rotrBH(n,o,39),dt=ot.rotrSL(n,o,28)^ot.rotrBL(n,o,34)^ot.rotrBL(n,o,39),S=n&i^n&l^i&l,a=o&s^o&f^s&f;L=_|0,N=I|0,_=E|0,I=T|0,E=x|0,T=M|0,{h:x,l:M}=ot.add(m|0,v|0,ut|0,it|0),m=l|0,v=f|0,l=i|0,f=s|0,i=n|0,s=o|0;let u=ot.add3L(it,dt,a);n=ot.add3H(u,ut,Z,S),o=u|0}({h:n,l:o}=ot.add(this.Ah|0,this.Al|0,n|0,o|0)),{h:i,l:s}=ot.add(this.Bh|0,this.Bl|0,i|0,s|0),{h:l,l:f}=ot.add(this.Ch|0,this.Cl|0,l|0,f|0),{h:m,l:v}=ot.add(this.Dh|0,this.Dl|0,m|0,v|0),{h:x,l:M}=ot.add(this.Eh|0,this.El|0,x|0,M|0),{h:E,l:T}=ot.add(this.Fh|0,this.Fl|0,E|0,T|0),{h:_,l:I}=ot.add(this.Gh|0,this.Gl|0,_|0,I|0),{h:L,l:N}=ot.add(this.Hh|0,this.Hl|0,L|0,N|0),this.set(n,o,i,s,l,f,m,v,x,M,E,T,_,I,L,N)}roundClean(){gr.fill(0),mr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var Ss=Qr(()=>new xs);B();B();var Eo={};ec(Eo,{abytes:()=>en,bitGet:()=>Sh,bitLen:()=>xh,bitMask:()=>Bn,bitSet:()=>kh,bytesToHex:()=>Je,bytesToNumberBE:()=>Qe,bytesToNumberLE:()=>wr,concatBytes:()=>tr,createHmacDrbg:()=>_s,ensureBytes:()=>qt,equalBytes:()=>wh,hexToBytes:()=>Ur,hexToNumber:()=>Es,isBytes:()=>br,numberToBytesBE:()=>vr,numberToBytesLE:()=>Nr,numberToHexUnpadded:()=>Dc,numberToVarBytesBE:()=>bh,utf8ToBytes:()=>vh,validateObject:()=>Ve});B();var Kc=BigInt(0),ko=BigInt(1),gh=BigInt(2);function br(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function en(r){if(!br(r))throw new Error("Uint8Array expected")}var mh=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function Je(r){en(r);let t="";for(let e=0;e<r.length;e++)t+=mh[r[e]];return t}function Dc(r){let t=r.toString(16);return t.length&1?`0${t}`:t}function Es(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}var Xe={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function qc(r){if(r>=Xe._0&&r<=Xe._9)return r-Xe._0;if(r>=Xe._A&&r<=Xe._F)return r-(Xe._A-10);if(r>=Xe._a&&r<=Xe._f)return r-(Xe._a-10)}function Ur(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);let t=r.length,e=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(e);for(let o=0,i=0;o<e;o++,i+=2){let s=qc(r.charCodeAt(i)),l=qc(r.charCodeAt(i+1));if(s===void 0||l===void 0){let f=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+i)}n[o]=s*16+l}return n}function Qe(r){return Es(Je(r))}function wr(r){return en(r),Es(Je(Uint8Array.from(r).reverse()))}function vr(r,t){return Ur(r.toString(16).padStart(t*2,"0"))}function Nr(r,t){return vr(r,t).reverse()}function bh(r){return Ur(Dc(r))}function qt(r,t,e){let n;if(typeof t=="string")try{n=Ur(t)}catch(i){throw new Error(`${r} must be valid hex string, got "${t}". Cause: ${i}`)}else if(br(t))n=Uint8Array.from(t);else throw new Error(`${r} must be hex string or Uint8Array`);let o=n.length;if(typeof e=="number"&&o!==e)throw new Error(`${r} expected ${e} bytes, got ${o}`);return n}function tr(...r){let t=0;for(let n=0;n<r.length;n++){let o=r[n];en(o),t+=o.length}let e=new Uint8Array(t);for(let n=0,o=0;n<r.length;n++){let i=r[n];e.set(i,o),o+=i.length}return e}function wh(r,t){if(r.length!==t.length)return!1;let e=0;for(let n=0;n<r.length;n++)e|=r[n]^t[n];return e===0}function vh(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function xh(r){let t;for(t=0;r>Kc;r>>=ko,t+=1);return t}function Sh(r,t){return r>>BigInt(t)&ko}function kh(r,t,e){return r|(e?ko:Kc)<<BigInt(t)}var Bn=r=>(gh<<BigInt(r-1))-ko,ks=r=>new Uint8Array(r),zc=r=>Uint8Array.from(r);function _s(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let n=ks(r),o=ks(r),i=0,s=()=>{n.fill(1),o.fill(0),i=0},l=(...x)=>e(o,n,...x),f=(x=ks())=>{o=l(zc([0]),x),n=l(),x.length!==0&&(o=l(zc([1]),x),n=l())},m=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let x=0,M=[];for(;x<t;){n=l();let E=n.slice();M.push(E),x+=n.length}return tr(...M)};return(x,M)=>{s(),f(x);let E;for(;!(E=M(m()));)f();return s(),E}}var Eh={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||br(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,t)=>t.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Ve(r,t,e={}){let n=(o,i,s)=>{let l=Eh[i];if(typeof l!="function")throw new Error(`Invalid validator "${i}", expected function`);let f=r[o];if(!(s&&f===void 0)&&!l(f,r))throw new Error(`Invalid param ${String(o)}=${f} (${typeof f}), expected ${i}`)};for(let[o,i]of Object.entries(t))n(o,i,!1);for(let[o,i]of Object.entries(e))n(o,i,!0);return r}var se=BigInt(0),Et=BigInt(1),qr=BigInt(2),_h=BigInt(3),Bs=BigInt(4),Fc=BigInt(5),Wc=BigInt(8),Bh=BigInt(9),Ih=BigInt(16);function gt(r,t){let e=r%t;return e>=se?e:t+e}function Ah(r,t,e){if(e<=se||t<se)throw new Error("Expected power/modulo > 0");if(e===Et)return se;let n=Et;for(;t>se;)t&Et&&(n=n*r%e),r=r*r%e,t>>=Et;return n}function _t(r,t,e){let n=r;for(;t-- >se;)n*=n,n%=e;return n}function _o(r,t){if(r===se||t<=se)throw new Error(`invert: expected positive integers, got n=${r} mod=${t}`);let e=gt(r,t),n=t,o=se,i=Et,s=Et,l=se;for(;e!==se;){let m=n/e,v=n%e,x=o-s*m,M=i-l*m;n=e,e=v,o=s,i=l,s=x,l=M}if(n!==Et)throw new Error("invert: does not exist");return gt(o,t)}function Rh(r){let t=(r-Et)/qr,e,n,o;for(e=r-Et,n=0;e%qr===se;e/=qr,n++);for(o=qr;o<r&&Ah(o,t,r)!==r-Et;o++);if(n===1){let s=(r+Et)/Bs;return function(f,m){let v=f.pow(m,s);if(!f.eql(f.sqr(v),m))throw new Error("Cannot find square root");return v}}let i=(e+Et)/qr;return function(l,f){if(l.pow(f,t)===l.neg(l.ONE))throw new Error("Cannot find square root");let m=n,v=l.pow(l.mul(l.ONE,o),e),x=l.pow(f,i),M=l.pow(f,e);for(;!l.eql(M,l.ONE);){if(l.eql(M,l.ZERO))return l.ZERO;let E=1;for(let _=l.sqr(M);E<m&&!l.eql(_,l.ONE);E++)_=l.sqr(_);let T=l.pow(v,Et<<BigInt(m-E-1));v=l.sqr(T),x=l.mul(x,T),M=l.mul(M,v),m=E}return x}}function Lh(r){if(r%Bs===_h){let t=(r+Et)/Bs;return function(n,o){let i=n.pow(o,t);if(!n.eql(n.sqr(i),o))throw new Error("Cannot find square root");return i}}if(r%Wc===Fc){let t=(r-Fc)/Wc;return function(n,o){let i=n.mul(o,qr),s=n.pow(i,t),l=n.mul(o,s),f=n.mul(n.mul(l,qr),s),m=n.mul(l,n.sub(f,n.ONE));if(!n.eql(n.sqr(m),o))throw new Error("Cannot find square root");return m}}return r%Ih,Rh(r)}var Hc=(r,t)=>(gt(r,t)&Et)===Et,Th=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Is(r){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=Th.reduce((n,o)=>(n[o]="function",n),t);return Ve(r,e)}function Mh(r,t,e){if(e<se)throw new Error("Expected power > 0");if(e===se)return r.ONE;if(e===Et)return t;let n=r.ONE,o=t;for(;e>se;)e&Et&&(n=r.mul(n,o)),o=r.sqr(o),e>>=Et;return n}function Ph(r,t){let e=new Array(t.length),n=t.reduce((i,s,l)=>r.is0(s)?i:(e[l]=i,r.mul(i,s)),r.ONE),o=r.inv(n);return t.reduceRight((i,s,l)=>r.is0(s)?i:(e[l]=r.mul(i,e[l]),r.mul(i,s)),o),e}function As(r,t){let e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function Bo(r,t,e=!1,n={}){if(r<=se)throw new Error(`Expected Field ORDER > 0, got ${r}`);let{nBitLength:o,nByteLength:i}=As(r,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let s=Lh(r),l=Object.freeze({ORDER:r,BITS:o,BYTES:i,MASK:Bn(o),ZERO:se,ONE:Et,create:f=>gt(f,r),isValid:f=>{if(typeof f!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof f}`);return se<=f&&f<r},is0:f=>f===se,isOdd:f=>(f&Et)===Et,neg:f=>gt(-f,r),eql:(f,m)=>f===m,sqr:f=>gt(f*f,r),add:(f,m)=>gt(f+m,r),sub:(f,m)=>gt(f-m,r),mul:(f,m)=>gt(f*m,r),pow:(f,m)=>Mh(l,f,m),div:(f,m)=>gt(f*_o(m,r),r),sqrN:f=>f*f,addN:(f,m)=>f+m,subN:(f,m)=>f-m,mulN:(f,m)=>f*m,inv:f=>_o(f,r),sqrt:n.sqrt||(f=>s(l,f)),invertBatch:f=>Ph(l,f),cmov:(f,m,v)=>v?m:f,toBytes:f=>e?Nr(f,i):vr(f,i),fromBytes:f=>{if(f.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${f.length}`);return e?wr(f):Qe(f)}});return Object.freeze(l)}function Vc(r,t){if(!r.isOdd)throw new Error("Field doesn't have isOdd");let e=r.sqrt(t);return r.isOdd(e)?r.neg(e):e}function $c(r){if(typeof r!="bigint")throw new Error("field order must be bigint");let t=r.toString(2).length;return Math.ceil(t/8)}function Rs(r){let t=$c(r);return t+Math.ceil(t/2)}function Gc(r,t,e=!1){let n=r.length,o=$c(t),i=Rs(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);let s=e?Qe(r):wr(r),l=gt(s,t-Et)+Et;return e?Nr(l,o):vr(l,o)}B();var Oh=BigInt(0),Ls=BigInt(1);function Io(r,t){let e=(o,i)=>{let s=i.negate();return o?s:i},n=o=>{let i=Math.ceil(t/o)+1,s=2**(o-1);return{windows:i,windowSize:s}};return{constTimeNegate:e,unsafeLadder(o,i){let s=r.ZERO,l=o;for(;i>Oh;)i&Ls&&(s=s.add(l)),l=l.double(),i>>=Ls;return s},precomputeWindow(o,i){let{windows:s,windowSize:l}=n(i),f=[],m=o,v=m;for(let x=0;x<s;x++){v=m,f.push(v);for(let M=1;M<l;M++)v=v.add(m),f.push(v);m=v.double()}return f},wNAF(o,i,s){let{windows:l,windowSize:f}=n(o),m=r.ZERO,v=r.BASE,x=BigInt(2**o-1),M=2**o,E=BigInt(o);for(let T=0;T<l;T++){let _=T*f,I=Number(s&x);s>>=E,I>f&&(I-=M,s+=Ls);let L=_,N=_+Math.abs(I)-1,C=T%2!==0,F=I<0;I===0?v=v.add(e(C,i[L])):m=m.add(e(F,i[N]))}return{p:m,f:v}},wNAFCached(o,i,s,l){let f=o._WINDOW_SIZE||1,m=i.get(o);return m||(m=this.precomputeWindow(o,f),f!==1&&i.set(o,l(m))),this.wNAF(f,m,s)}}}function In(r){return Is(r.Fp),Ve(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...As(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}var Ke=BigInt(0),Re=BigInt(1),Ao=BigInt(2),Uh=BigInt(8),Nh={zip215:!0};function qh(r){let t=In(r);return Ve(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Ro(r){let t=qh(r),{Fp:e,n,prehash:o,hash:i,randomBytes:s,nByteLength:l,h:f}=t,m=Ao<<BigInt(l*8)-Re,v=e.create,x=t.uvRatio||((p,g)=>{try{return{isValid:!0,value:e.sqrt(p*e.inv(g))}}catch{return{isValid:!1,value:Ke}}}),M=t.adjustScalarBytes||(p=>p),E=t.domain||((p,g,w)=>{if(g.length||w)throw new Error("Contexts/pre-hash are not supported");return p}),T=p=>typeof p=="bigint"&&Ke<p,_=(p,g)=>T(p)&&T(g)&&p<g,I=p=>p===Ke||_(p,m);function L(p,g){if(_(p,g))return p;throw new Error(`Expected valid scalar < ${g}, got ${typeof p} ${p}`)}function N(p){return p===Ke?p:L(p,n)}let C=new Map;function F(p){if(!(p instanceof q))throw new Error("ExtendedPoint expected")}class q{constructor(g,w,y,c){if(this.ex=g,this.ey=w,this.ez=y,this.et=c,!I(g))throw new Error("x required");if(!I(w))throw new Error("y required");if(!I(y))throw new Error("z required");if(!I(c))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(g){if(g instanceof q)throw new Error("extended point not allowed");let{x:w,y}=g||{};if(!I(w)||!I(y))throw new Error("invalid affine point");return new q(w,y,Re,v(w*y))}static normalizeZ(g){let w=e.invertBatch(g.map(y=>y.ez));return g.map((y,c)=>y.toAffine(w[c])).map(q.fromAffine)}_setWindowSize(g){this._WINDOW_SIZE=g,C.delete(this)}assertValidity(){let{a:g,d:w}=t;if(this.is0())throw new Error("bad point: ZERO");let{ex:y,ey:c,ez:b,et:U}=this,D=v(y*y),K=v(c*c),V=v(b*b),X=v(V*V),Q=v(D*g),wt=v(V*v(Q+K)),rt=v(X+v(w*v(D*K)));if(wt!==rt)throw new Error("bad point: equation left != right (1)");let nt=v(y*c),ie=v(b*U);if(nt!==ie)throw new Error("bad point: equation left != right (2)")}equals(g){F(g);let{ex:w,ey:y,ez:c}=this,{ex:b,ey:U,ez:D}=g,K=v(w*D),V=v(b*c),X=v(y*D),Q=v(U*c);return K===V&&X===Q}is0(){return this.equals(q.ZERO)}negate(){return new q(v(-this.ex),this.ey,this.ez,v(-this.et))}double(){let{a:g}=t,{ex:w,ey:y,ez:c}=this,b=v(w*w),U=v(y*y),D=v(Ao*v(c*c)),K=v(g*b),V=w+y,X=v(v(V*V)-b-U),Q=K+U,wt=Q-D,rt=K-U,nt=v(X*wt),ie=v(Q*rt),pt=v(X*rt),yt=v(wt*Q);return new q(nt,ie,yt,pt)}add(g){F(g);let{a:w,d:y}=t,{ex:c,ey:b,ez:U,et:D}=this,{ex:K,ey:V,ez:X,et:Q}=g;if(w===BigInt(-1)){let wn=v((b-c)*(V+K)),At=v((b+c)*(V-K)),kt=v(At-wn);if(kt===Ke)return this.double();let vn=v(U*Ao*Q),Rt=v(D*Ao*X),Lt=Rt+vn,xn=At+wn,Tt=Rt-vn,Ot=v(Lt*kt),ao=v(xn*Tt),Ut=v(Lt*Tt),Nt=v(kt*xn);return new q(Ot,ao,Nt,Ut)}let wt=v(c*K),rt=v(b*V),nt=v(D*y*Q),ie=v(U*X),pt=v((c+b)*(K+V)-wt-rt),yt=ie-nt,lr=ie+nt,It=v(rt-w*wt),Mt=v(pt*yt),so=v(lr*It),Pt=v(pt*It),Ct=v(yt*lr);return new q(Mt,so,Ct,Pt)}subtract(g){return this.add(g.negate())}wNAF(g){return G.wNAFCached(this,C,g,q.normalizeZ)}multiply(g){let{p:w,f:y}=this.wNAF(L(g,n));return q.normalizeZ([w,y])[0]}multiplyUnsafe(g){let w=N(g);return w===Ke?W:this.equals(W)||w===Re?this:this.equals(O)?this.wNAF(w).p:G.unsafeLadder(this,w)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}isTorsionFree(){return G.unsafeLadder(this,n).is0()}toAffine(g){let{ex:w,ey:y,ez:c}=this,b=this.is0();g==null&&(g=b?Uh:e.inv(c));let U=v(w*g),D=v(y*g),K=v(c*g);if(b)return{x:Ke,y:Re};if(K!==Re)throw new Error("invZ was invalid");return{x:U,y:D}}clearCofactor(){let{h:g}=t;return g===Re?this:this.multiplyUnsafe(g)}static fromHex(g,w=!1){let{d:y,a:c}=t,b=e.BYTES;g=qt("pointHex",g,b);let U=g.slice(),D=g[b-1];U[b-1]=D&-129;let K=wr(U);K===Ke||(w?L(K,m):L(K,e.ORDER));let V=v(K*K),X=v(V-Re),Q=v(y*V-c),{isValid:wt,value:rt}=x(X,Q);if(!wt)throw new Error("Point.fromHex: invalid y coordinate");let nt=(rt&Re)===Re,ie=(D&128)!==0;if(!w&&rt===Ke&&ie)throw new Error("Point.fromHex: x=0 and x_0=1");return ie!==nt&&(rt=v(-rt)),q.fromAffine({x:rt,y:K})}static fromPrivateKey(g){return Z(g).point}toRawBytes(){let{x:g,y:w}=this.toAffine(),y=Nr(w,e.BYTES);return y[y.length-1]|=g&Re?128:0,y}toHex(){return Je(this.toRawBytes())}}q.BASE=new q(t.Gx,t.Gy,Re,v(t.Gx*t.Gy)),q.ZERO=new q(Ke,Re,Re,Ke);let{BASE:O,ZERO:W}=q,G=Io(q,l*8);function ut(p){return gt(p,n)}function it(p){return ut(wr(p))}function Z(p){let g=l;p=qt("private key",p,g);let w=qt("hashed private key",i(p),2*g),y=M(w.slice(0,g)),c=w.slice(g,2*g),b=it(y),U=O.multiply(b),D=U.toRawBytes();return{head:y,prefix:c,scalar:b,point:U,pointBytes:D}}function dt(p){return Z(p).pointBytes}function S(p=new Uint8Array,...g){let w=tr(...g);return it(i(E(w,qt("context",p),!!o)))}function a(p,g,w={}){p=qt("message",p),o&&(p=o(p));let{prefix:y,scalar:c,pointBytes:b}=Z(g),U=S(w.context,y,p),D=O.multiply(U).toRawBytes(),K=S(w.context,D,b,p),V=ut(U+K*c);N(V);let X=tr(D,Nr(V,e.BYTES));return qt("result",X,l*2)}let u=Nh;function h(p,g,w,y=u){let{context:c,zip215:b}=y,U=e.BYTES;p=qt("signature",p,2*U),g=qt("message",g),o&&(g=o(g));let D=wr(p.slice(U,2*U)),K,V,X;try{K=q.fromHex(w,b),V=q.fromHex(p.slice(0,U),b),X=O.multiplyUnsafe(D)}catch{return!1}if(!b&&K.isSmallOrder())return!1;let Q=S(c,V.toRawBytes(),K.toRawBytes(),g);return V.add(K.multiplyUnsafe(Q)).subtract(X).clearCofactor().equals(q.ZERO)}return O._setWindowSize(8),{CURVE:t,getPublicKey:dt,sign:a,verify:h,ExtendedPoint:q,utils:{getExtendedPublicKey:Z,randomPrivateKey:()=>s(e.BYTES),precompute(p=8,g=q.BASE){return g._setWindowSize(p),g.multiply(BigInt(3)),g}}}}var Ms=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),jc=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Lg=BigInt(0),zh=BigInt(1),Ts=BigInt(2),Kh=BigInt(5),Yc=BigInt(10),Dh=BigInt(20),Fh=BigInt(40),Zc=BigInt(80);function Wh(r){let t=Ms,n=r*r%t*r%t,o=_t(n,Ts,t)*n%t,i=_t(o,zh,t)*r%t,s=_t(i,Kh,t)*i%t,l=_t(s,Yc,t)*s%t,f=_t(l,Dh,t)*l%t,m=_t(f,Fh,t)*f%t,v=_t(m,Zc,t)*m%t,x=_t(v,Zc,t)*m%t,M=_t(x,Yc,t)*s%t;return{pow_p_5_8:_t(M,Ts,t)*r%t,b2:n}}function Hh(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function Vh(r,t){let e=Ms,n=gt(t*t*t,e),o=gt(n*n*t,e),i=Wh(r*o).pow_p_5_8,s=gt(r*n*i,e),l=gt(t*s*s,e),f=s,m=gt(s*jc,e),v=l===r,x=l===gt(-r,e),M=l===gt(-r*jc,e);return v&&(s=f),(x||M)&&(s=m),Hc(s,e)&&(s=gt(-s,e)),{isValid:v||x,value:s}}var er=Bo(Ms,void 0,!0),Ps={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:er,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Ss,randomBytes:xo,adjustScalarBytes:Hh,uvRatio:Vh},zr=Ro(Ps);function Xc(r,t,e){if(t.length>255)throw new Error("Context is too big");return vo(ps("SigEd25519 no Ed25519 collisions"),new Uint8Array([e?1:0,t.length]),t,r)}var Tg=Ro({...Ps,domain:Xc}),Mg=Ro({...Ps,domain:Xc,prehash:Ss});var $h=(er.ORDER+BigInt(3))/BigInt(8),Pg=er.pow(Ts,$h),Cg=er.sqrt(er.neg(er.ONE)),Og=(er.ORDER-BigInt(5))/BigInt(8),Ug=BigInt(486662);var Ng=Vc(er,er.neg(BigInt(486664)));var qg=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),zg=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Kg=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Dg=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");var Fg=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var ka=Ae(Os()),ve=Ae(ou());B();var Zh=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),xr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Sr=new Uint32Array(64),qs=class extends tn{constructor(){super(64,32,8,!1),this.A=xr[0]|0,this.B=xr[1]|0,this.C=xr[2]|0,this.D=xr[3]|0,this.E=xr[4]|0,this.F=xr[5]|0,this.G=xr[6]|0,this.H=xr[7]|0}get(){let{A:t,B:e,C:n,D:o,E:i,F:s,G:l,H:f}=this;return[t,e,n,o,i,s,l,f]}set(t,e,n,o,i,s,l,f){this.A=t|0,this.B=e|0,this.C=n|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=l|0,this.H=f|0}process(t,e){for(let x=0;x<16;x++,e+=4)Sr[x]=t.getUint32(e,!1);for(let x=16;x<64;x++){let M=Sr[x-15],E=Sr[x-2],T=ze(M,7)^ze(M,18)^M>>>3,_=ze(E,17)^ze(E,19)^E>>>10;Sr[x]=_+Sr[x-7]+T+Sr[x-16]|0}let{A:n,B:o,C:i,D:s,E:l,F:f,G:m,H:v}=this;for(let x=0;x<64;x++){let M=ze(l,6)^ze(l,11)^ze(l,25),E=v+M+Oc(l,f,m)+Zh[x]+Sr[x]|0,_=(ze(n,2)^ze(n,13)^ze(n,22))+Uc(n,o,i)|0;v=m,m=f,f=l,l=s+E|0,s=i,i=o,o=n,n=E+_|0}n=n+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,l=l+this.E|0,f=f+this.F|0,m=m+this.G|0,v=v+this.H|0,this.set(n,o,i,s,l,f,m,v)}roundClean(){Sr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var An=Qr(()=>new qs);var gn=Ae(pu()),k=Ae(Gs()),Of=Ae(Gs()),oo=Ae(yu());B();var js=class extends TypeError{constructor(t,e){let n,{message:o,...i}=t,{path:s}=t,l=s.length===0?o:"At path: "+s.join(".")+" -- "+o;super(l),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var f;return(f=n)!=null?f:n=[t,...e()]}}};function vd(r){return _r(r)&&typeof r[Symbol.iterator]=="function"}function _r(r){return typeof r=="object"&&r!=null}function De(r){return typeof r=="string"?JSON.stringify(r):""+r}function xd(r){let{done:t,value:e}=r.next();return t?void 0:e}function Sd(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});let{path:o,branch:i}=t,{type:s}=e,{refinement:l,message:f="Expected a value of type `"+s+"`"+(l?" with refinement `"+l+"`":"")+", but received: `"+De(n)+"`"}=r;return{value:n,type:s,refinement:l,key:o[o.length-1],path:o,branch:i,...r,message:f}}function*gu(r,t,e,n){vd(r)||(r=[r]);for(let o of r){let i=Sd(o,t,e,n);i&&(yield i)}}function*Ys(r,t,e={}){let{path:n=[],branch:o=[r],coerce:i=!1,mask:s=!1}=e,l={path:n,branch:o};if(i&&(r=t.coercer(r,l),s&&t.type!=="type"&&_r(t.schema)&&_r(r)&&!Array.isArray(r)))for(let m in r)t.schema[m]===void 0&&delete r[m];let f=!0;for(let m of t.validator(r,l))f=!1,yield[m,void 0];for(let[m,v,x]of t.entries(r,l)){let M=Ys(v,x,{path:m===void 0?n:[...n,m],branch:m===void 0?o:[...o,v],coerce:i,mask:s});for(let E of M)E[0]?(f=!1,yield[E[0],void 0]):i&&(v=E[1],m===void 0?r=v:r instanceof Map?r.set(m,v):r instanceof Set?r.add(v):_r(r)&&(r[m]=v))}if(f)for(let m of t.refiner(r,l))f=!1,yield[m,void 0];f&&(yield[void 0,r])}var Oe=class{constructor(t){let{type:e,schema:n,validator:o,refiner:i,coercer:s=f=>f,entries:l=function*(){}}=t;this.type=e,this.schema=n,this.entries=l,this.coercer=s,o?this.validator=(f,m)=>{let v=o(f,m);return gu(v,m,this,f)}:this.validator=()=>[],i?this.refiner=(f,m)=>{let v=i(f,m);return gu(v,m,this,f)}:this.refiner=()=>[]}assert(t){return mu(t,this)}create(t){return cn(t,this)}is(t){return bu(t,this)}mask(t){return kd(t,this)}validate(t,e={}){return Cn(t,this,e)}};function mu(r,t){let e=Cn(r,t);if(e[0])throw e[0]}function cn(r,t){let e=Cn(r,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function kd(r,t){let e=Cn(r,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function bu(r,t){return!Cn(r,t)[0]}function Cn(r,t,e={}){let n=Ys(r,t,e),o=xd(n);return o[0]?[new js(o[0],function*(){for(let s of n)s[0]&&(yield s[0])}),void 0]:[void 0,o[1]]}function Wr(r,t){return new Oe({type:r,schema:null,validator:t})}function wu(){return Wr("any",()=>!0)}function Y(r){return new Oe({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(let[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+De(t)}})}function Fe(){return Wr("boolean",r=>typeof r=="boolean")}function ii(r){return Wr("instance",t=>t instanceof r||"Expected a `"+r.name+"` instance, but received: "+De(t))}function Bt(r){let t=De(r),e=typeof r;return new Oe({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?r:null,validator(n){return n===r||"Expected the literal `"+t+"`, but received: "+De(n)}})}function Ed(){return Wr("never",()=>!1)}function j(r){return new Oe({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function A(){return Wr("number",r=>typeof r=="number"&&!isNaN(r)||"Expected a number, but received: "+De(r))}function J(r){return new Oe({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function Zs(r,t){return new Oe({type:"record",schema:null,*entries(e){if(_r(e))for(let n in e){let o=e[n];yield[n,n,r],yield[n,o,t]}},validator(e){return _r(e)||"Expected an object, but received: "+De(e)}})}function $(){return Wr("string",r=>typeof r=="string"||"Expected a string, but received: "+De(r))}function si(r){let t=Ed();return new Oe({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){let n=Math.max(r.length,e.length);for(let o=0;o<n;o++)yield[o,e[o],r[o]||t]}},validator(e){return Array.isArray(e)||"Expected an array, but received: "+De(e)}})}function z(r){let t=Object.keys(r);return new Oe({type:"type",schema:r,*entries(e){if(_r(e))for(let n of t)yield[n,e[n],r[n]]},validator(e){return _r(e)||"Expected an object, but received: "+De(e)}})}function ke(r){let t=r.map(e=>e.type).join(" | ");return new Oe({type:"union",schema:null,validator(e,n){let o=[];for(let i of r){let[...s]=Ys(e,i,n),[l]=s;if(l[0])for(let[f]of s)f&&o.push(f);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+De(e),...o]}})}function un(){return Wr("unknown",()=>!0)}function fn(r,t,e){return new Oe({...r,coercer:(n,o)=>bu(n,t)?r.coercer(e(n,o),o):r.coercer(n,o)})}var J0=Ae(Wu()),Q0=Ae(cf()),tp=Ae(ff());B();var df=[],pf=[],yf=[],U0=BigInt(0),Xn=BigInt(1),N0=BigInt(2),q0=BigInt(7),z0=BigInt(256),K0=BigInt(113);for(let r=0,t=Xn,e=1,n=0;r<24;r++){[e,n]=[n,(2*e+3*n)%5],df.push(2*(5*n+e)),pf.push((r+1)*(r+2)/2%64);let o=U0;for(let i=0;i<7;i++)t=(t<<Xn^(t>>q0)*K0)%z0,t&N0&&(o^=Xn<<(Xn<<BigInt(i))-Xn);yf.push(o)}var[D0,F0]=gs(yf,!0),lf=(r,t,e)=>e>32?ws(r,t,e):ms(r,t,e),hf=(r,t,e)=>e>32?vs(r,t,e):bs(r,t,e);function W0(r,t=24){let e=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let s=0;s<10;s++)e[s]=r[s]^r[s+10]^r[s+20]^r[s+30]^r[s+40];for(let s=0;s<10;s+=2){let l=(s+8)%10,f=(s+2)%10,m=e[f],v=e[f+1],x=lf(m,v,1)^e[l],M=hf(m,v,1)^e[l+1];for(let E=0;E<50;E+=10)r[s+E]^=x,r[s+E+1]^=M}let o=r[2],i=r[3];for(let s=0;s<24;s++){let l=pf[s],f=lf(o,i,l),m=hf(o,i,l),v=df[s];o=r[v],i=r[v+1],r[v]=f,r[v+1]=m}for(let s=0;s<50;s+=10){for(let l=0;l<10;l++)e[l]=r[s+l];for(let l=0;l<10;l++)r[s+l]^=~e[(l+2)%10]&e[(l+4)%10]}r[0]^=D0[n],r[1]^=F0[n]}e.fill(0)}var wi=class r extends pr{constructor(t,e,n,o=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=o,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,_n(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Pc(this.state)}keccak(){hs||ds(this.state32),W0(this.state32,this.rounds),hs||ds(this.state32),this.posOut=0,this.pos=0}update(t){Ze(this);let{blockLen:e,state:n}=this;t=yr(t);let o=t.length;for(let i=0;i<o;){let s=Math.min(e-this.pos,o-i);for(let l=0;l<s;l++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:e,pos:n,blockLen:o}=this;t[n]^=e,e&128&&n===o-1&&this.keccak(),t[o-1]^=128,this.keccak()}writeInto(t){Ze(this,!1),dr(t),this.finish();let e=this.state,{blockLen:n}=this;for(let o=0,i=t.length;o<i;){this.posOut>=n&&this.keccak();let s=Math.min(n-this.posOut,i-o);t.set(e.subarray(this.posOut,this.posOut+s),o),this.posOut+=s,o+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return _n(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(mo(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:e,suffix:n,outputLen:o,rounds:i,enableXOF:s}=this;return t||(t=new r(e,n,o,s,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=o,t.enableXOF=s,t.destroyed=this.destroyed,t}},Tr=(r,t,e)=>Qr(()=>new wi(t,r,e)),rw=Tr(6,144,224/8),nw=Tr(6,136,256/8),ow=Tr(6,104,384/8),iw=Tr(6,72,512/8),sw=Tr(1,144,224/8),ya=Tr(1,136,256/8),aw=Tr(1,104,384/8),cw=Tr(1,72,512/8),gf=(r,t,e)=>Cc((n={})=>new wi(t,r,n.dkLen===void 0?e:n.dkLen,!0)),uw=gf(31,168,128/8),fw=gf(31,136,256/8);B();B();function H0(r){let t=In(r);Ve(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:e,Fp:n,a:o}=t;if(e){if(!n.eql(o,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:V0,hexToBytes:$0}=Eo,Hr={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(r){let{Err:t}=Hr;if(r.length<2||r[0]!==2)throw new t("Invalid signature integer tag");let e=r[1],n=r.subarray(2,e+2);if(!e||n.length!==e)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:V0(n),l:r.subarray(e+2)}},toSig(r){let{Err:t}=Hr,e=typeof r=="string"?$0(r):r;en(e);let n=e.length;if(n<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:o,l:i}=Hr._parseInt(e.subarray(2)),{d:s,l}=Hr._parseInt(i);if(l.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s}},hexFromSig(r){let t=m=>Number.parseInt(m[0],16)&8?"00"+m:m,e=m=>{let v=m.toString(16);return v.length&1?`0${v}`:v},n=t(e(r.s)),o=t(e(r.r)),i=n.length/2,s=o.length/2,l=e(i),f=e(s);return`30${e(s+i+4)}02${f}${o}02${l}${n}`}},cr=BigInt(0),Ue=BigInt(1),gw=BigInt(2),mf=BigInt(3),mw=BigInt(4);function G0(r){let t=H0(r),{Fp:e}=t,n=t.toBytes||((T,_,I)=>{let L=_.toAffine();return tr(Uint8Array.from([4]),e.toBytes(L.x),e.toBytes(L.y))}),o=t.fromBytes||(T=>{let _=T.subarray(1),I=e.fromBytes(_.subarray(0,e.BYTES)),L=e.fromBytes(_.subarray(e.BYTES,2*e.BYTES));return{x:I,y:L}});function i(T){let{a:_,b:I}=t,L=e.sqr(T),N=e.mul(L,T);return e.add(e.add(N,e.mul(T,_)),I)}if(!e.eql(e.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function s(T){return typeof T=="bigint"&&cr<T&&T<t.n}function l(T){if(!s(T))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function f(T){let{allowedPrivateKeyLengths:_,nByteLength:I,wrapPrivateKey:L,n:N}=t;if(_&&typeof T!="bigint"){if(br(T)&&(T=Je(T)),typeof T!="string"||!_.includes(T.length))throw new Error("Invalid key");T=T.padStart(I*2,"0")}let C;try{C=typeof T=="bigint"?T:Qe(qt("private key",T,I))}catch{throw new Error(`private key must be ${I} bytes, hex or bigint, not ${typeof T}`)}return L&&(C=gt(C,N)),l(C),C}let m=new Map;function v(T){if(!(T instanceof x))throw new Error("ProjectivePoint expected")}class x{constructor(_,I,L){if(this.px=_,this.py=I,this.pz=L,_==null||!e.isValid(_))throw new Error("x required");if(I==null||!e.isValid(I))throw new Error("y required");if(L==null||!e.isValid(L))throw new Error("z required")}static fromAffine(_){let{x:I,y:L}=_||{};if(!_||!e.isValid(I)||!e.isValid(L))throw new Error("invalid affine point");if(_ instanceof x)throw new Error("projective point not allowed");let N=C=>e.eql(C,e.ZERO);return N(I)&&N(L)?x.ZERO:new x(I,L,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(_){let I=e.invertBatch(_.map(L=>L.pz));return _.map((L,N)=>L.toAffine(I[N])).map(x.fromAffine)}static fromHex(_){let I=x.fromAffine(o(qt("pointHex",_)));return I.assertValidity(),I}static fromPrivateKey(_){return x.BASE.multiply(f(_))}_setWindowSize(_){this._WINDOW_SIZE=_,m.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:_,y:I}=this.toAffine();if(!e.isValid(_)||!e.isValid(I))throw new Error("bad point: x or y not FE");let L=e.sqr(I),N=i(_);if(!e.eql(L,N))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:_}=this.toAffine();if(e.isOdd)return!e.isOdd(_);throw new Error("Field doesn't support isOdd")}equals(_){v(_);let{px:I,py:L,pz:N}=this,{px:C,py:F,pz:q}=_,O=e.eql(e.mul(I,q),e.mul(C,N)),W=e.eql(e.mul(L,q),e.mul(F,N));return O&&W}negate(){return new x(this.px,e.neg(this.py),this.pz)}double(){let{a:_,b:I}=t,L=e.mul(I,mf),{px:N,py:C,pz:F}=this,q=e.ZERO,O=e.ZERO,W=e.ZERO,G=e.mul(N,N),ut=e.mul(C,C),it=e.mul(F,F),Z=e.mul(N,C);return Z=e.add(Z,Z),W=e.mul(N,F),W=e.add(W,W),q=e.mul(_,W),O=e.mul(L,it),O=e.add(q,O),q=e.sub(ut,O),O=e.add(ut,O),O=e.mul(q,O),q=e.mul(Z,q),W=e.mul(L,W),it=e.mul(_,it),Z=e.sub(G,it),Z=e.mul(_,Z),Z=e.add(Z,W),W=e.add(G,G),G=e.add(W,G),G=e.add(G,it),G=e.mul(G,Z),O=e.add(O,G),it=e.mul(C,F),it=e.add(it,it),G=e.mul(it,Z),q=e.sub(q,G),W=e.mul(it,ut),W=e.add(W,W),W=e.add(W,W),new x(q,O,W)}add(_){v(_);let{px:I,py:L,pz:N}=this,{px:C,py:F,pz:q}=_,O=e.ZERO,W=e.ZERO,G=e.ZERO,ut=t.a,it=e.mul(t.b,mf),Z=e.mul(I,C),dt=e.mul(L,F),S=e.mul(N,q),a=e.add(I,L),u=e.add(C,F);a=e.mul(a,u),u=e.add(Z,dt),a=e.sub(a,u),u=e.add(I,N);let h=e.add(C,q);return u=e.mul(u,h),h=e.add(Z,S),u=e.sub(u,h),h=e.add(L,N),O=e.add(F,q),h=e.mul(h,O),O=e.add(dt,S),h=e.sub(h,O),G=e.mul(ut,u),O=e.mul(it,S),G=e.add(O,G),O=e.sub(dt,G),G=e.add(dt,G),W=e.mul(O,G),dt=e.add(Z,Z),dt=e.add(dt,Z),S=e.mul(ut,S),u=e.mul(it,u),dt=e.add(dt,S),S=e.sub(Z,S),S=e.mul(ut,S),u=e.add(u,S),Z=e.mul(dt,u),W=e.add(W,Z),Z=e.mul(h,u),O=e.mul(a,O),O=e.sub(O,Z),Z=e.mul(a,dt),G=e.mul(h,G),G=e.add(G,Z),new x(O,W,G)}subtract(_){return this.add(_.negate())}is0(){return this.equals(x.ZERO)}wNAF(_){return E.wNAFCached(this,m,_,I=>{let L=e.invertBatch(I.map(N=>N.pz));return I.map((N,C)=>N.toAffine(L[C])).map(x.fromAffine)})}multiplyUnsafe(_){let I=x.ZERO;if(_===cr)return I;if(l(_),_===Ue)return this;let{endo:L}=t;if(!L)return E.unsafeLadder(this,_);let{k1neg:N,k1:C,k2neg:F,k2:q}=L.splitScalar(_),O=I,W=I,G=this;for(;C>cr||q>cr;)C&Ue&&(O=O.add(G)),q&Ue&&(W=W.add(G)),G=G.double(),C>>=Ue,q>>=Ue;return N&&(O=O.negate()),F&&(W=W.negate()),W=new x(e.mul(W.px,L.beta),W.py,W.pz),O.add(W)}multiply(_){l(_);let I=_,L,N,{endo:C}=t;if(C){let{k1neg:F,k1:q,k2neg:O,k2:W}=C.splitScalar(I),{p:G,f:ut}=this.wNAF(q),{p:it,f:Z}=this.wNAF(W);G=E.constTimeNegate(F,G),it=E.constTimeNegate(O,it),it=new x(e.mul(it.px,C.beta),it.py,it.pz),L=G.add(it),N=ut.add(Z)}else{let{p:F,f:q}=this.wNAF(I);L=F,N=q}return x.normalizeZ([L,N])[0]}multiplyAndAddUnsafe(_,I,L){let N=x.BASE,C=(q,O)=>O===cr||O===Ue||!q.equals(N)?q.multiplyUnsafe(O):q.multiply(O),F=C(this,I).add(C(_,L));return F.is0()?void 0:F}toAffine(_){let{px:I,py:L,pz:N}=this,C=this.is0();_==null&&(_=C?e.ONE:e.inv(N));let F=e.mul(I,_),q=e.mul(L,_),O=e.mul(N,_);if(C)return{x:e.ZERO,y:e.ZERO};if(!e.eql(O,e.ONE))throw new Error("invZ was invalid");return{x:F,y:q}}isTorsionFree(){let{h:_,isTorsionFree:I}=t;if(_===Ue)return!0;if(I)return I(x,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:_,clearCofactor:I}=t;return _===Ue?this:I?I(x,this):this.multiplyUnsafe(t.h)}toRawBytes(_=!0){return this.assertValidity(),n(x,this,_)}toHex(_=!0){return Je(this.toRawBytes(_))}}x.BASE=new x(t.Gx,t.Gy,e.ONE),x.ZERO=new x(e.ZERO,e.ONE,e.ZERO);let M=t.nBitLength,E=Io(x,t.endo?Math.ceil(M/2):M);return{CURVE:t,ProjectivePoint:x,normPrivateKeyToScalar:f,weierstrassEquation:i,isWithinCurveOrder:s}}function j0(r){let t=In(r);return Ve(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function bf(r){let t=j0(r),{Fp:e,n}=t,o=e.BYTES+1,i=2*e.BYTES+1;function s(u){return cr<u&&u<e.ORDER}function l(u){return gt(u,n)}function f(u){return _o(u,n)}let{ProjectivePoint:m,normPrivateKeyToScalar:v,weierstrassEquation:x,isWithinCurveOrder:M}=G0({...t,toBytes(u,h,d){let p=h.toAffine(),g=e.toBytes(p.x),w=tr;return d?w(Uint8Array.from([h.hasEvenY()?2:3]),g):w(Uint8Array.from([4]),g,e.toBytes(p.y))},fromBytes(u){let h=u.length,d=u[0],p=u.subarray(1);if(h===o&&(d===2||d===3)){let g=Qe(p);if(!s(g))throw new Error("Point is not on curve");let w=x(g),y;try{y=e.sqrt(w)}catch(U){let D=U instanceof Error?": "+U.message:"";throw new Error("Point is not on curve"+D)}let c=(y&Ue)===Ue;return(d&1)===1!==c&&(y=e.neg(y)),{x:g,y}}else if(h===i&&d===4){let g=e.fromBytes(p.subarray(0,e.BYTES)),w=e.fromBytes(p.subarray(e.BYTES,2*e.BYTES));return{x:g,y:w}}else throw new Error(`Point of length ${h} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}}),E=u=>Je(vr(u,t.nByteLength));function T(u){let h=n>>Ue;return u>h}function _(u){return T(u)?l(-u):u}let I=(u,h,d)=>Qe(u.slice(h,d));class L{constructor(h,d,p){this.r=h,this.s=d,this.recovery=p,this.assertValidity()}static fromCompact(h){let d=t.nByteLength;return h=qt("compactSignature",h,d*2),new L(I(h,0,d),I(h,d,2*d))}static fromDER(h){let{r:d,s:p}=Hr.toSig(qt("DER",h));return new L(d,p)}assertValidity(){if(!M(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!M(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(h){return new L(this.r,this.s,h)}recoverPublicKey(h){let{r:d,s:p,recovery:g}=this,w=W(qt("msgHash",h));if(g==null||![0,1,2,3].includes(g))throw new Error("recovery id invalid");let y=g===2||g===3?d+t.n:d;if(y>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");let c=g&1?"03":"02",b=m.fromHex(c+E(y)),U=f(y),D=l(-w*U),K=l(p*U),V=m.BASE.multiplyAndAddUnsafe(b,D,K);if(!V)throw new Error("point at infinify");return V.assertValidity(),V}hasHighS(){return T(this.s)}normalizeS(){return this.hasHighS()?new L(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return Ur(this.toDERHex())}toDERHex(){return Hr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ur(this.toCompactHex())}toCompactHex(){return E(this.r)+E(this.s)}}let N={isValidPrivateKey(u){try{return v(u),!0}catch{return!1}},normPrivateKeyToScalar:v,randomPrivateKey:()=>{let u=Rs(t.n);return Gc(t.randomBytes(u),t.n)},precompute(u=8,h=m.BASE){return h._setWindowSize(u),h.multiply(BigInt(3)),h}};function C(u,h=!0){return m.fromPrivateKey(u).toRawBytes(h)}function F(u){let h=br(u),d=typeof u=="string",p=(h||d)&&u.length;return h?p===o||p===i:d?p===2*o||p===2*i:u instanceof m}function q(u,h,d=!0){if(F(u))throw new Error("first arg must be private key");if(!F(h))throw new Error("second arg must be public key");return m.fromHex(h).multiply(v(u)).toRawBytes(d)}let O=t.bits2int||function(u){let h=Qe(u),d=u.length*8-t.nBitLength;return d>0?h>>BigInt(d):h},W=t.bits2int_modN||function(u){return l(O(u))},G=Bn(t.nBitLength);function ut(u){if(typeof u!="bigint")throw new Error("bigint expected");if(!(cr<=u&&u<G))throw new Error(`bigint expected < 2^${t.nBitLength}`);return vr(u,t.nByteLength)}function it(u,h,d=Z){if(["recovered","canonical"].some(Q=>Q in d))throw new Error("sign() legacy options not supported");let{hash:p,randomBytes:g}=t,{lowS:w,prehash:y,extraEntropy:c}=d;w==null&&(w=!0),u=qt("msgHash",u),y&&(u=qt("prehashed msgHash",p(u)));let b=W(u),U=v(h),D=[ut(U),ut(b)];if(c!=null&&c!==!1){let Q=c===!0?g(e.BYTES):c;D.push(qt("extraEntropy",Q))}let K=tr(...D),V=b;function X(Q){let wt=O(Q);if(!M(wt))return;let rt=f(wt),nt=m.BASE.multiply(wt).toAffine(),ie=l(nt.x);if(ie===cr)return;let pt=l(rt*l(V+ie*U));if(pt===cr)return;let yt=(nt.x===ie?0:2)|Number(nt.y&Ue),lr=pt;return w&&T(pt)&&(lr=_(pt),yt^=1),new L(ie,lr,yt)}return{seed:K,k2sig:X}}let Z={lowS:t.lowS,prehash:!1},dt={lowS:t.lowS,prehash:!1};function S(u,h,d=Z){let{seed:p,k2sig:g}=it(u,h,d),w=t;return _s(w.hash.outputLen,w.nByteLength,w.hmac)(p,g)}m.BASE._setWindowSize(8);function a(u,h,d,p=dt){let g=u;if(h=qt("msgHash",h),d=qt("publicKey",d),"strict"in p)throw new Error("options.strict was renamed to lowS");let{lowS:w,prehash:y}=p,c,b;try{if(typeof g=="string"||br(g))try{c=L.fromDER(g)}catch(nt){if(!(nt instanceof Hr.Err))throw nt;c=L.fromCompact(g)}else if(typeof g=="object"&&typeof g.r=="bigint"&&typeof g.s=="bigint"){let{r:nt,s:ie}=g;c=new L(nt,ie)}else throw new Error("PARSE");b=m.fromHex(d)}catch(nt){if(nt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(w&&c.hasHighS())return!1;y&&(h=t.hash(h));let{r:U,s:D}=c,K=W(h),V=f(D),X=l(K*V),Q=l(U*V),wt=m.BASE.multiplyAndAddUnsafe(b,X,Q)?.toAffine();return wt?l(wt.x)===U:!1}return{CURVE:t,getPublicKey:C,getSharedSecret:q,sign:S,verify:a,ProjectivePoint:m,Signature:L,utils:N}}B();B();var vi=class extends pr{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Mc(t);let n=yr(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,i=new Uint8Array(o);i.set(n.length>o?t.create().update(n).digest():n);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(t){return Ze(this),this.iHash.update(t),this}digestInto(t){Ze(this),dr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:e,iHash:n,finished:o,destroyed:i,blockLen:s,outputLen:l}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=s,t.outputLen=l,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},ga=(r,t,e)=>new vi(r,t).update(e).digest();ga.create=(r,t)=>new vi(r,t);function Y0(r){return{hash:r,hmac:(t,...e)=>ga(r,t,vo(...e)),randomBytes:xo}}function wf(r,t){let e=n=>bf({...r,...Y0(n)});return Object.freeze({...e(t),create:e})}var Sf=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),vf=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Z0=BigInt(1),ma=BigInt(2),xf=(r,t)=>(r+t/ma)/t;function X0(r){let t=Sf,e=BigInt(3),n=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),l=BigInt(44),f=BigInt(88),m=r*r*r%t,v=m*m*r%t,x=_t(v,e,t)*v%t,M=_t(x,e,t)*v%t,E=_t(M,ma,t)*m%t,T=_t(E,o,t)*E%t,_=_t(T,i,t)*T%t,I=_t(_,l,t)*_%t,L=_t(I,f,t)*I%t,N=_t(L,l,t)*_%t,C=_t(N,e,t)*v%t,F=_t(C,s,t)*T%t,q=_t(F,n,t)*m%t,O=_t(q,ma,t);if(!ba.eql(ba.sqr(O),r))throw new Error("Cannot find square root");return O}var ba=Bo(Sf,void 0,void 0,{sqrt:X0}),Jn=wf({a:BigInt(0),b:BigInt(7),Fp:ba,n:vf,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{let t=vf,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Z0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,s=BigInt("0x100000000000000000000000000000000"),l=xf(i*r,t),f=xf(-n*r,t),m=gt(r-l*e-f*o,t),v=gt(-l*n-f*i,t),x=m>s,M=v>s;if(x&&(m=t-m),M&&(v=t-v),m>s||v>s)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:x,k1:m,k2neg:M,k2:v}}}},An),Mw=BigInt(0);var Pw=Jn.ProjectivePoint;var Dw=zr.utils.randomPrivateKey,kf=()=>{let r=zr.utils.randomPrivateKey(),t=Ea(r),e=new Uint8Array(64);return e.set(r),e.set(t,32),{publicKey:t,secretKey:e}},Ea=zr.getPublicKey;function Ef(r){try{return zr.ExtendedPoint.fromHex(r),!0}catch{return!1}}var Na=(r,t)=>zr.sign(r,t.slice(0,32)),ep=zr.verify,lt=r=>tt.Buffer.isBuffer(r)?r:r instanceof Uint8Array?tt.Buffer.from(r.buffer,r.byteOffset,r.byteLength):tt.Buffer.from(r),_a=class{constructor(t){Object.assign(this,t)}encode(){return tt.Buffer.from((0,gn.serialize)(Si,this))}static decode(t){return(0,gn.deserialize)(Si,this,t)}static decodeUnchecked(t){return(0,gn.deserializeUnchecked)(Si,this,t)}};var Si=new Map,Uf,Nf,rp=32,Pr=32;function np(r){return r._bn!==void 0}var _f=1;Nf=Symbol.toStringTag;var et=class r extends _a{constructor(t){if(super({}),this._bn=void 0,np(t))this._bn=t._bn;else{if(typeof t=="string"){let e=ve.default.decode(t);if(e.length!=Pr)throw new Error("Invalid public key input");this._bn=new ka.default(e)}else this._bn=new ka.default(t);if(this._bn.byteLength()>Pr)throw new Error("Invalid public key input")}}static unique(){let t=new r(_f);return _f+=1,new r(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return ve.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){let t=this._bn.toArrayLike(tt.Buffer);if(t.length===Pr)return t;let e=tt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Nf](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){let o=tt.Buffer.concat([t.toBuffer(),tt.Buffer.from(e),n.toBuffer()]),i=An(o);return new r(i)}static createProgramAddressSync(t,e){let n=tt.Buffer.alloc(0);t.forEach(function(i){if(i.length>rp)throw new TypeError("Max seed length exceeded");n=tt.Buffer.concat([n,lt(i)])}),n=tt.Buffer.concat([n,e.toBuffer(),tt.Buffer.from("ProgramDerivedAddress")]);let o=An(n);if(Ef(o))throw new Error("Invalid seeds, address must fall off the curve");return new r(o)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,o;for(;n!=0;){try{let i=t.concat(tt.Buffer.from([n]));o=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[o,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){let e=new r(t);return Ef(e.toBytes())}};Uf=et;et.default=new Uf("11111111111111111111111111111111");Si.set(et,{kind:"struct",fields:[["_bn","u256"]]});var Fw=new et("BPFLoader1111111111111111111111111111111111"),Vr=1232,qa=127,ki=64,Ba=class extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}};Object.defineProperty(Ba.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var Ia=class extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}};Object.defineProperty(Ia.prototype,"name",{value:"TransactionExpiredTimeoutError"});var Aa=class extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}};Object.defineProperty(Aa.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var dn=class{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){let t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(let e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");let n=new Map;this.keySegments().flat().forEach((i,s)=>{n.set(i.toBase58(),s)});let o=i=>{let s=n.get(i.toBase58());if(s===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return s};return t.map(i=>({programIdIndex:o(i.programId),accountKeyIndexes:i.keys.map(s=>o(s.pubkey)),data:i.data}))}},at=(r="publicKey")=>k.blob(32,r),op=(r="signature")=>k.blob(64,r),hn=(r="string")=>{let t=k.struct([k.u32("length"),k.u32("lengthPadding"),k.blob(k.offset(k.u32(),-8),"chars")],r),e=t.decode.bind(t),n=t.encode.bind(t),o=t;return o.decode=(i,s)=>e(i,s).chars.toString(),o.encode=(i,s,l)=>{let f={chars:tt.Buffer.from(i,"utf8")};return n(f,s,l)},o.alloc=i=>k.u32().span+k.u32().span+tt.Buffer.from(i,"utf8").length,o},ip=(r="authorized")=>k.struct([at("staker"),at("withdrawer")],r),sp=(r="lockup")=>k.struct([k.ns64("unixTimestamp"),k.ns64("epoch"),at("custodian")],r),ap=(r="voteInit")=>k.struct([at("nodePubkey"),at("authorizedVoter"),at("authorizedWithdrawer"),k.u8("commission")],r),cp=(r="voteAuthorizeWithSeedArgs")=>k.struct([k.u32("voteAuthorizationType"),at("currentAuthorityDerivedKeyOwnerPubkey"),hn("currentAuthorityDerivedKeySeed"),at("newAuthorized")],r);function qf(r,t){let e=o=>{if(o.span>=0)return o.span;if(typeof o.alloc=="function")return o.alloc(t[o.property]);if("count"in o&&"elementLayout"in o){let i=t[o.property];if(Array.isArray(i))return i.length*e(o.elementLayout)}else if("fields"in o)return qf({layout:o},t[o.property]);return 0},n=0;return r.layout.fields.forEach(o=>{n+=e(o)}),n}function Te(r){let t=0,e=0;for(;;){let n=r.shift();if(t|=(n&127)<<e*7,e+=1,!(n&128))break}return t}function Me(r,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){r.push(n);break}else n|=128,r.push(n)}}function St(r,t){if(!r)throw new Error(t||"Assertion failed")}var Ei=class r{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){let n=new Map,o=s=>{let l=s.toBase58(),f=n.get(l);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(l,f)),f},i=o(e);i.isSigner=!0,i.isWritable=!0;for(let s of t){o(s.programId).isInvoked=!0;for(let l of s.keys){let f=o(l.pubkey);f.isSigner||=l.isSigner,f.isWritable||=l.isWritable}}return new r(e,n)}getMessageComponents(){let t=[...this.keyMetaMap.entries()];St(t.length<=256,"Max static account keys length exceeded");let e=t.filter(([,f])=>f.isSigner&&f.isWritable),n=t.filter(([,f])=>f.isSigner&&!f.isWritable),o=t.filter(([,f])=>!f.isSigner&&f.isWritable),i=t.filter(([,f])=>!f.isSigner&&!f.isWritable),s={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{St(e.length>0,"Expected at least one writable signer key");let[f]=e[0];St(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let l=[...e.map(([f])=>new et(f)),...n.map(([f])=>new et(f)),...o.map(([f])=>new et(f)),...i.map(([f])=>new et(f))];return[s,l]}extractTableLookup(t){let[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,s=>!s.isSigner&&!s.isInvoked&&s.isWritable),[o,i]=this.drainKeysFoundInLookupTable(t.state.addresses,s=>!s.isSigner&&!s.isInvoked&&!s.isWritable);if(!(e.length===0&&o.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:o},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,e){let n=new Array,o=new Array;for(let[i,s]of this.keyMetaMap.entries())if(e(s)){let l=new et(i),f=t.findIndex(m=>m.equals(l));f>=0&&(St(f<256,"Max lookup table index exceeded"),n.push(f),o.push(l),this.keyMetaMap.delete(i))}return[n,o]}},zf="Reached end of buffer unexpectedly";function fr(r){if(r.length===0)throw new Error(zf);return r.shift()}function Pe(r,...t){let[e]=t;if(t.length===2?e+(t[1]??0)>r.length:e>=r.length)throw new Error(zf);return r.splice(...t)}var eo=class r{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new et(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:ve.default.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new dn(this.staticAccountKeys)}static compile(t){let e=Ei.compile(t.instructions,t.payerKey),[n,o]=e.getMessageComponents(),s=new dn(o).compileInstructions(t.instructions).map(l=>({programIdIndex:l.programIdIndex,accounts:l.accountKeyIndexes,data:ve.default.encode(l.data)}));return new r({header:n,accountKeys:o,recentBlockhash:t.recentBlockhash,instructions:s})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){let n=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<i}else{let n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){let t=this.accountKeys.length,e=[];Me(e,t);let n=this.instructions.map(x=>{let{accounts:M,programIdIndex:E}=x,T=Array.from(ve.default.decode(x.data)),_=[];Me(_,M.length);let I=[];return Me(I,T.length),{programIdIndex:E,keyIndicesCount:tt.Buffer.from(_),keyIndices:M,dataLength:tt.Buffer.from(I),data:T}}),o=[];Me(o,n.length);let i=tt.Buffer.alloc(Vr);tt.Buffer.from(o).copy(i);let s=o.length;n.forEach(x=>{let E=k.struct([k.u8("programIdIndex"),k.blob(x.keyIndicesCount.length,"keyIndicesCount"),k.seq(k.u8("keyIndex"),x.keyIndices.length,"keyIndices"),k.blob(x.dataLength.length,"dataLength"),k.seq(k.u8("userdatum"),x.data.length,"data")]).encode(x,i,s);s+=E}),i=i.slice(0,s);let l=k.struct([k.blob(1,"numRequiredSignatures"),k.blob(1,"numReadonlySignedAccounts"),k.blob(1,"numReadonlyUnsignedAccounts"),k.blob(e.length,"keyCount"),k.seq(at("key"),t,"keys"),at("recentBlockhash")]),f={numRequiredSignatures:tt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:tt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:tt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:tt.Buffer.from(e),keys:this.accountKeys.map(x=>lt(x.toBytes())),recentBlockhash:ve.default.decode(this.recentBlockhash)},m=tt.Buffer.alloc(2048),v=l.encode(f,m);return i.copy(m,v),m.slice(0,v+i.length)}static from(t){let e=[...t],n=fr(e);if(n!==(n&qa))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let o=fr(e),i=fr(e),s=Te(e),l=[];for(let M=0;M<s;M++){let E=Pe(e,0,Pr);l.push(new et(tt.Buffer.from(E)))}let f=Pe(e,0,Pr),m=Te(e),v=[];for(let M=0;M<m;M++){let E=fr(e),T=Te(e),_=Pe(e,0,T),I=Te(e),L=Pe(e,0,I),N=ve.default.encode(tt.Buffer.from(L));v.push({programIdIndex:E,accounts:_,data:N})}let x={header:{numRequiredSignatures:n,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:i},recentBlockhash:ve.default.encode(tt.Buffer.from(f)),accountKeys:l,instructions:v};return new r(x)}},Ra=class r{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(let e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new dn(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){let e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){let o=t-n,i=this.addressTableLookups.reduce((s,l)=>s+l.writableIndexes.length,0);return o<i}else if(t>=this.header.numRequiredSignatures){let o=t-e,s=n-e-this.header.numReadonlyUnsignedAccounts;return o<s}else{let o=e-this.header.numReadonlySignedAccounts;return t<o}}resolveAddressTableLookups(t){let e={writable:[],readonly:[]};for(let n of this.addressTableLookups){let o=t.find(i=>i.key.equals(n.accountKey));if(!o)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(let i of n.writableIndexes)if(i<o.state.addresses.length)e.writable.push(o.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(let i of n.readonlyIndexes)if(i<o.state.addresses.length)e.readonly.push(o.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){let e=Ei.compile(t.instructions,t.payerKey),n=new Array,o={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(let v of i){let x=e.extractTableLookup(v);if(x!==void 0){let[M,{writable:E,readonly:T}]=x;n.push(M),o.writable.push(...E),o.readonly.push(...T)}}let[s,l]=e.getMessageComponents(),m=new dn(l,o).compileInstructions(t.instructions);return new r({header:s,staticAccountKeys:l,recentBlockhash:t.recentBlockhash,compiledInstructions:m,addressTableLookups:n})}serialize(){let t=Array();Me(t,this.staticAccountKeys.length);let e=this.serializeInstructions(),n=Array();Me(n,this.compiledInstructions.length);let o=this.serializeAddressTableLookups(),i=Array();Me(i,this.addressTableLookups.length);let s=k.struct([k.u8("prefix"),k.struct([k.u8("numRequiredSignatures"),k.u8("numReadonlySignedAccounts"),k.u8("numReadonlyUnsignedAccounts")],"header"),k.blob(t.length,"staticAccountKeysLength"),k.seq(at(),this.staticAccountKeys.length,"staticAccountKeys"),at("recentBlockhash"),k.blob(n.length,"instructionsLength"),k.blob(e.length,"serializedInstructions"),k.blob(i.length,"addressTableLookupsLength"),k.blob(o.length,"serializedAddressTableLookups")]),l=new Uint8Array(Vr),m=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(v=>v.toBytes()),recentBlockhash:ve.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:o},l);return l.slice(0,m)}serializeInstructions(){let t=0,e=new Uint8Array(Vr);for(let n of this.compiledInstructions){let o=Array();Me(o,n.accountKeyIndexes.length);let i=Array();Me(i,n.data.length);let s=k.struct([k.u8("programIdIndex"),k.blob(o.length,"encodedAccountKeyIndexesLength"),k.seq(k.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),k.blob(i.length,"encodedDataLength"),k.blob(n.data.length,"data")]);t+=s.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(o),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0,e=new Uint8Array(Vr);for(let n of this.addressTableLookups){let o=Array();Me(o,n.writableIndexes.length);let i=Array();Me(i,n.readonlyIndexes.length);let s=k.struct([at("accountKey"),k.blob(o.length,"encodedWritableIndexesLength"),k.seq(k.u8(),n.writableIndexes.length,"writableIndexes"),k.blob(i.length,"encodedReadonlyIndexesLength"),k.seq(k.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=s.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(o),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t],n=fr(e),o=n&qa;St(n!==o,"Expected versioned message but received legacy message");let i=o;St(i===0,`Expected versioned message with version 0 but found version ${i}`);let s={numRequiredSignatures:fr(e),numReadonlySignedAccounts:fr(e),numReadonlyUnsignedAccounts:fr(e)},l=[],f=Te(e);for(let T=0;T<f;T++)l.push(new et(Pe(e,0,Pr)));let m=ve.default.encode(Pe(e,0,Pr)),v=Te(e),x=[];for(let T=0;T<v;T++){let _=fr(e),I=Te(e),L=Pe(e,0,I),N=Te(e),C=new Uint8Array(Pe(e,0,N));x.push({programIdIndex:_,accountKeyIndexes:L,data:C})}let M=Te(e),E=[];for(let T=0;T<M;T++){let _=new et(Pe(e,0,Pr)),I=Te(e),L=Pe(e,0,I),N=Te(e),C=Pe(e,0,N);E.push({accountKey:_,writableIndexes:L,readonlyIndexes:C})}return new r({header:s,staticAccountKeys:l,recentBlockhash:m,compiledInstructions:x,addressTableLookups:E})}},Kf={deserializeMessageVersion(r){let t=r[0],e=t&qa;return e===t?"legacy":e},deserialize:r=>{let t=Kf.deserializeMessageVersion(r);if(t==="legacy")return eo.from(r);if(t===0)return Ra.deserialize(r);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};var up=tt.Buffer.alloc(ki).fill(0),bt=class{constructor(t){this.keys=void 0,this.programId=void 0,this.data=tt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}},vt=class r{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){let{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){let{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{let{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new bt(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let _=0;_<e.length;_++)if(e[_].programId===void 0)throw new Error(`Transaction instruction index ${_} has undefined program id`);let o=[],i=[];e.forEach(_=>{_.keys.forEach(L=>{i.push({...L})});let I=_.programId.toString();o.includes(I)||o.push(I)}),o.forEach(_=>{i.push({pubkey:new et(_),isSigner:!1,isWritable:!1})});let s=[];i.forEach(_=>{let I=_.pubkey.toString(),L=s.findIndex(N=>N.pubkey.toString()===I);L>-1?(s[L].isWritable=s[L].isWritable||_.isWritable,s[L].isSigner=s[L].isSigner||_.isSigner):s.push(_)}),s.sort(function(_,I){if(_.isSigner!==I.isSigner)return _.isSigner?-1:1;if(_.isWritable!==I.isWritable)return _.isWritable?-1:1;let L={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return _.pubkey.toBase58().localeCompare(I.pubkey.toBase58(),"en",L)});let l=s.findIndex(_=>_.pubkey.equals(n));if(l>-1){let[_]=s.splice(l,1);_.isSigner=!0,_.isWritable=!0,s.unshift(_)}else s.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(let _ of this.signatures){let I=s.findIndex(L=>L.pubkey.equals(_.publicKey));if(I>-1)s[I].isSigner||(s[I].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${_.publicKey.toString()}`)}let f=0,m=0,v=0,x=[],M=[];s.forEach(({pubkey:_,isSigner:I,isWritable:L})=>{I?(x.push(_.toString()),f+=1,L||(m+=1)):(M.push(_.toString()),L||(v+=1))});let E=x.concat(M),T=e.map(_=>{let{data:I,programId:L}=_;return{programIdIndex:E.indexOf(L.toString()),accounts:_.keys.map(N=>E.indexOf(N.pubkey.toString())),data:ve.default.encode(I)}});return T.forEach(_=>{St(_.programIdIndex>=0),_.accounts.forEach(I=>St(I>=0))}),new eo({header:{numRequiredSignatures:f,numReadonlySignedAccounts:m,numReadonlyUnsignedAccounts:v},accountKeys:E,recentBlockhash:t,instructions:T})}_compile(){let t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((o,i)=>e[i].equals(o.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");let e=new Set;this.signatures=t.filter(n=>{let o=n.toString();return e.has(o)?!1:(e.add(o),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");let e=new Set,n=[];for(let i of t){let s=i.publicKey.toString();e.has(s)||(e.add(s),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));let o=this._compile();this._partialSign(o,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");let e=new Set,n=[];for(let i of t){let s=i.publicKey.toString();e.has(s)||(e.add(s),n.push(i))}let o=this._compile();this._partialSign(o,...n)}_partialSign(t,...e){let n=t.serialize();e.forEach(o=>{let i=Na(n,o.secretKey);this._addSignature(o.publicKey,lt(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){St(e.length===64);let n=this.signatures.findIndex(o=>t.equals(o.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=tt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){let n={};for(let{signature:o,publicKey:i}of this.signatures)o===null?e&&(n.missing||=[]).push(i):ep(o,t,i.toBytes())||(n.invalid||=[]).push(i);return n.invalid||n.missing?n:void 0}serialize(t){let{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),o=this.serializeMessage();if(n){let i=this._getMessageSignednessErrors(o,e);if(i){let s="Signature verification failed.";throw i.invalid&&(s+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(l=>l.toBase58()).join("`, `")}\`].`),i.missing&&(s+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(l=>l.toBase58()).join("`, `")}\`].`),new Error(s)}}return this._serialize(o)}_serialize(t){let{signatures:e}=this,n=[];Me(n,e.length);let o=n.length+e.length*64+t.length,i=tt.Buffer.alloc(o);return St(e.length<256),tt.Buffer.from(n).copy(i,0),e.forEach(({signature:s},l)=>{s!==null&&(St(s.length===64,"signature has invalid length"),tt.Buffer.from(s).copy(i,n.length+l*64))}),t.copy(i,n.length+e.length*64),St(i.length<=Vr,`Transaction too large: ${i.length} > ${Vr}`),i}get keys(){return St(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return St(this.instructions.length===1),this.instructions[0].programId}get data(){return St(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t],n=Te(e),o=[];for(let i=0;i<n;i++){let s=Pe(e,0,ki);o.push(ve.default.encode(tt.Buffer.from(s)))}return r.populate(eo.from(e),o)}static populate(t,e=[]){let n=new r;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((o,i)=>{let s={signature:o==ve.default.encode(up)?null:ve.default.decode(o),publicKey:t.accountKeys[i]};n.signatures.push(s)}),t.instructions.forEach(o=>{let i=o.accounts.map(s=>{let l=t.accountKeys[s];return{pubkey:l,isSigner:n.signatures.some(f=>f.publicKey.toString()===l.toString())||t.isAccountSigner(s),isWritable:t.isAccountWritable(s)}});n.instructions.push(new bt({keys:i,programId:t.accountKeys[o.programIdIndex],data:ve.default.decode(o.data)}))}),n._message=t,n._json=n.toJSON(),n}};var pn=class r{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)St(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{let n=[];for(let o=0;o<t.header.numRequiredSignatures;o++)n.push(new Uint8Array(ki));this.signatures=n}this.message=t}serialize(){let t=this.message.serialize(),e=Array();Me(e,this.signatures.length);let n=k.struct([k.blob(e.length,"encodedSignaturesLength"),k.seq(op(),this.signatures.length,"signatures"),k.blob(t.length,"serializedMessage")]),o=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},o);return o.slice(0,i)}static deserialize(t){let e=[...t],n=[],o=Te(e);for(let s=0;s<o;s++)n.push(new Uint8Array(Pe(e,0,ki)));let i=Kf.deserialize(new Uint8Array(e));return new r(i,n)}sign(t){let e=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let o of t){let i=n.findIndex(s=>s.equals(o.publicKey));St(i>=0,`Cannot sign with non signer key ${o.publicKey.toBase58()}`),this.signatures[i]=Na(e,o.secretKey)}}addSignature(t,e){St(e.byteLength===64,"Signature must be 64 bytes long");let o=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));St(o>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[o]=e}},fp=160,lp=64,hp=fp/lp,dp=1e3/hp,ur=new et("SysvarC1ock11111111111111111111111111111111"),Ww=new et("SysvarEpochSchedu1e111111111111111111111111"),Hw=new et("Sysvar1nstructions1111111111111111111111111"),wa=new et("SysvarRecentB1ockHashes11111111111111111111"),ro=new et("SysvarRent111111111111111111111111111111111"),Vw=new et("SysvarRewards111111111111111111111111111111"),$w=new et("SysvarS1otHashes111111111111111111111111111"),Gw=new et("SysvarS1otHistory11111111111111111111111111"),va=new et("SysvarStakeHistory1111111111111111111111111");async function Bf(r,t,e,n){let o=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},i=await r.sendTransaction(t,e,o),s;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)s=(await r.confirmTransaction({abortSignal:n?.abortSignal,signature:i,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){let{nonceInstruction:l}=t.nonceInfo,f=l.keys[0].pubkey;s=(await r.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:t.nonceInfo.nonce,signature:i},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),s=(await r.confirmTransaction(i,n&&n.commitment)).value;if(s.err)throw new Error(`Transaction ${i} failed (${JSON.stringify(s)})`);return i}function pp(r){return new Promise(t=>setTimeout(t,r))}function ct(r,t){let e=r.layout.span>=0?r.layout.span:qf(r,t),n=tt.Buffer.alloc(e),o=Object.assign({instruction:r.index},t);return r.layout.encode(o,n),n}var yp=k.nu64("lamportsPerSignature"),gp=k.struct([k.u32("version"),k.u32("state"),at("authorizedPubkey"),at("nonce"),k.struct([yp],"feeCalculator")]),If=gp.span;var mp=r=>{let t=r.decode.bind(r),e=r.encode.bind(r);return{decode:t,encode:e}},bp=r=>t=>{let e=(0,Of.blob)(r,t),{encode:n,decode:o}=mp(e),i=e;return i.decode=(s,l)=>{let f=o(s,l);return(0,oo.toBigIntLE)(tt.Buffer.from(f))},i.encode=(s,l,f)=>{let m=(0,oo.toBufferLE)(s,r);return n(m,l,f)},i},yn=bp(8);var Ne=Object.freeze({Create:{index:0,layout:k.struct([k.u32("instruction"),k.ns64("lamports"),k.ns64("space"),at("programId")])},Assign:{index:1,layout:k.struct([k.u32("instruction"),at("programId")])},Transfer:{index:2,layout:k.struct([k.u32("instruction"),yn("lamports")])},CreateWithSeed:{index:3,layout:k.struct([k.u32("instruction"),at("base"),hn("seed"),k.ns64("lamports"),k.ns64("space"),at("programId")])},AdvanceNonceAccount:{index:4,layout:k.struct([k.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:k.struct([k.u32("instruction"),k.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:k.struct([k.u32("instruction"),at("authorized")])},AuthorizeNonceAccount:{index:7,layout:k.struct([k.u32("instruction"),at("authorized")])},Allocate:{index:8,layout:k.struct([k.u32("instruction"),k.ns64("space")])},AllocateWithSeed:{index:9,layout:k.struct([k.u32("instruction"),at("base"),hn("seed"),k.ns64("space"),at("programId")])},AssignWithSeed:{index:10,layout:k.struct([k.u32("instruction"),at("base"),hn("seed"),at("programId")])},TransferWithSeed:{index:11,layout:k.struct([k.u32("instruction"),yn("lamports"),hn("seed"),at("programId")])},UpgradeNonceAccount:{index:12,layout:k.struct([k.u32("instruction")])}}),_e=class r{constructor(){}static createAccount(t){let e=Ne.Create,n=ct(e,{lamports:t.lamports,space:t.space,programId:lt(t.programId.toBuffer())});return new bt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let e,n;if("basePubkey"in t){let o=Ne.TransferWithSeed;e=ct(o,{lamports:BigInt(t.lamports),seed:t.seed,programId:lt(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{let o=Ne.Transfer;e=ct(o,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new bt({keys:n,programId:this.programId,data:e})}static assign(t){let e,n;if("basePubkey"in t){let o=Ne.AssignWithSeed;e=ct(o,{base:lt(t.basePubkey.toBuffer()),seed:t.seed,programId:lt(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let o=Ne.Assign;e=ct(o,{programId:lt(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new bt({keys:n,programId:this.programId,data:e})}static createAccountWithSeed(t){let e=Ne.CreateWithSeed,n=ct(e,{base:lt(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:lt(t.programId.toBuffer())}),o=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey!=t.fromPubkey&&o.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new bt({keys:o,programId:this.programId,data:n})}static createNonceAccount(t){let e=new vt;"basePubkey"in t&&"seed"in t?e.add(r.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:If,programId:this.programId})):e.add(r.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:If,programId:this.programId}));let n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(n)),e}static nonceInitialize(t){let e=Ne.InitializeNonceAccount,n=ct(e,{authorized:lt(t.authorizedPubkey.toBuffer())}),o={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:wa,isSigner:!1,isWritable:!1},{pubkey:ro,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new bt(o)}static nonceAdvance(t){let e=Ne.AdvanceNonceAccount,n=ct(e),o={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:wa,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new bt(o)}static nonceWithdraw(t){let e=Ne.WithdrawNonceAccount,n=ct(e,{lamports:t.lamports});return new bt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:wa,isSigner:!1,isWritable:!1},{pubkey:ro,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){let e=Ne.AuthorizeNonceAccount,n=ct(e,{authorized:lt(t.newAuthorizedPubkey.toBuffer())});return new bt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let e,n;if("basePubkey"in t){let o=Ne.AllocateWithSeed;e=ct(o,{base:lt(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:lt(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{let o=Ne.Allocate;e=ct(o,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new bt({keys:n,programId:this.programId,data:e})}};_e.programId=new et("11111111111111111111111111111111");var wp=Vr-300,La=class r{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/r.chunkSize)+1+1)}static async load(t,e,n,o,i){{let x=await t.getMinimumBalanceForRentExemption(i.length),M=await t.getAccountInfo(n.publicKey,"confirmed"),E=null;if(M!==null){if(M.executable)return console.error("Program load failed, account is already executable"),!1;M.data.length!==i.length&&(E=E||new vt,E.add(_e.allocate({accountPubkey:n.publicKey,space:i.length}))),M.owner.equals(o)||(E=E||new vt,E.add(_e.assign({accountPubkey:n.publicKey,programId:o}))),M.lamports<x&&(E=E||new vt,E.add(_e.transfer({fromPubkey:e.publicKey,toPubkey:n.publicKey,lamports:x-M.lamports})))}else E=new vt().add(_e.createAccount({fromPubkey:e.publicKey,newAccountPubkey:n.publicKey,lamports:x>0?x:1,space:i.length,programId:o}));E!==null&&await Bf(t,E,[e,n],{commitment:"confirmed"})}let s=k.struct([k.u32("instruction"),k.u32("offset"),k.u32("bytesLength"),k.u32("bytesLengthPadding"),k.seq(k.u8("byte"),k.offset(k.u32(),-8),"bytes")]),l=r.chunkSize,f=0,m=i,v=[];for(;m.length>0;){let x=m.slice(0,l),M=tt.Buffer.alloc(l+16);s.encode({instruction:0,offset:f,bytes:x,bytesLength:0,bytesLengthPadding:0},M);let E=new vt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:o,data:M});v.push(Bf(t,E,[e,n],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await pp(1e3/4),f+=l,m=m.slice(l)}await Promise.all(v);{let x=k.struct([k.u32("instruction")]),M=tt.Buffer.alloc(x.span);x.encode({instruction:1},M);let E=new vt().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:ro,isSigner:!1,isWritable:!1}],programId:o,data:M}),T="processed",_=await t.sendTransaction(E,[e,n],{preflightCommitment:T}),{context:I,value:L}=await t.confirmTransaction({signature:_,lastValidBlockHeight:E.lastValidBlockHeight,blockhash:E.recentBlockhash},T);if(L.err)throw new Error(`Transaction ${_} failed (${JSON.stringify(L)})`);for(;;){try{if(await t.getSlot({commitment:T})>I.slot)break}catch{}await new Promise(N=>setTimeout(N,Math.round(dp/2)))}}return!0}};La.chunkSize=wp;var jw=new et("BPFLoader2111111111111111111111111111111111");var Yw=globalThis.fetch;var Zw={index:1,layout:k.struct([k.u32("typeIndex"),yn("deactivationSlot"),k.nu64("lastExtendedSlot"),k.u8("lastExtendedStartIndex"),k.u8(),k.seq(at(),k.offset(k.u8(),-1),"authority")])};var ae=fn(ii(et),$(),r=>new et(r)),Df=si([$(),Bt("base64")]),za=fn(ii(tt.Buffer),Df,r=>tt.Buffer.from(r[0],"base64")),Xw=30*1e3;function Ff(r){return ke([z({jsonrpc:Bt("2.0"),id:$(),result:r}),z({jsonrpc:Bt("2.0"),id:$(),error:z({code:un(),message:$(),data:J(wu())})})])}var vp=Ff(un());function xt(r){return fn(Ff(r),vp,t=>"error"in t?t:{...t,result:cn(t.result,r)})}function qe(r){return xt(z({context:z({slot:A()}),value:r}))}function Ai(r){return z({context:z({slot:A()}),value:r})}var xp=z({foundation:A(),foundationTerm:A(),initial:A(),taper:A(),terminal:A()}),Jw=xt(Y(j(z({epoch:A(),effectiveSlot:A(),amount:A(),postBalance:A(),commission:J(j(A()))})))),Sp=Y(z({slot:A(),prioritizationFee:A()})),kp=z({total:A(),validator:A(),foundation:A(),epoch:A()}),Ep=z({epoch:A(),slotIndex:A(),slotsInEpoch:A(),absoluteSlot:A(),blockHeight:J(A()),transactionCount:J(A())}),_p=z({slotsPerEpoch:A(),leaderScheduleSlotOffset:A(),warmup:Fe(),firstNormalEpoch:A(),firstNormalSlot:A()}),Bp=Zs($(),Y(A())),$r=j(ke([z({}),$()])),Ip=z({err:$r}),Ap=Bt("receivedSignature"),Qw=z({"solana-core":$(),"feature-set":J(A())}),t1=qe(z({err:j(ke([z({}),$()])),logs:j(Y($())),accounts:J(j(Y(j(z({executable:Fe(),owner:$(),lamports:A(),data:Y($()),rentEpoch:J(A())}))))),unitsConsumed:J(A()),returnData:J(j(z({programId:$(),data:si([$(),Bt("base64")])})))})),e1=qe(z({byIdentity:Zs($(),Y(A())),range:z({firstSlot:A(),lastSlot:A()})}));var r1=xt(xp),n1=xt(kp),o1=xt(Sp),i1=xt(Ep),s1=xt(_p),a1=xt(Bp),c1=xt(A()),u1=qe(z({total:A(),circulating:A(),nonCirculating:A(),nonCirculatingAccounts:Y(ae)})),Rp=z({amount:$(),uiAmount:j(A()),decimals:A(),uiAmountString:J($())}),f1=qe(Y(z({address:ae,amount:$(),uiAmount:j(A()),decimals:A(),uiAmountString:J($())}))),l1=qe(Y(z({pubkey:ae,account:z({executable:Fe(),owner:ae,lamports:A(),data:za,rentEpoch:A()})}))),Ta=z({program:$(),parsed:un(),space:A()}),h1=qe(Y(z({pubkey:ae,account:z({executable:Fe(),owner:ae,lamports:A(),data:Ta,rentEpoch:A()})}))),d1=qe(Y(z({lamports:A(),address:ae}))),Ka=z({executable:Fe(),owner:ae,lamports:A(),data:za,rentEpoch:A()}),p1=z({pubkey:ae,account:Ka}),Lp=fn(ke([ii(tt.Buffer),Ta]),ke([Df,Ta]),r=>Array.isArray(r)?cn(r,za):r),Tp=z({executable:Fe(),owner:ae,lamports:A(),data:Lp,rentEpoch:A()}),y1=z({pubkey:ae,account:Tp}),g1=z({state:ke([Bt("active"),Bt("inactive"),Bt("activating"),Bt("deactivating")]),active:A(),inactive:A()}),m1=xt(Y(z({signature:$(),slot:A(),err:$r,memo:j($()),blockTime:J(j(A()))}))),b1=xt(Y(z({signature:$(),slot:A(),err:$r,memo:j($()),blockTime:J(j(A()))}))),w1=z({subscription:A(),result:Ai(Ka)}),Mp=z({pubkey:ae,account:Ka}),v1=z({subscription:A(),result:Ai(Mp)}),Pp=z({parent:A(),slot:A(),root:A()}),x1=z({subscription:A(),result:Pp}),Cp=ke([z({type:ke([Bt("firstShredReceived"),Bt("completed"),Bt("optimisticConfirmation"),Bt("root")]),slot:A(),timestamp:A()}),z({type:Bt("createdBank"),parent:A(),slot:A(),timestamp:A()}),z({type:Bt("frozen"),slot:A(),timestamp:A(),stats:z({numTransactionEntries:A(),numSuccessfulTransactions:A(),numFailedTransactions:A(),maxTransactionsPerEntry:A()})}),z({type:Bt("dead"),slot:A(),timestamp:A(),err:$()})]),S1=z({subscription:A(),result:Cp}),k1=z({subscription:A(),result:Ai(ke([Ip,Ap]))}),E1=z({subscription:A(),result:A()}),_1=z({pubkey:$(),gossip:j($()),tpu:j($()),rpc:j($()),version:j($())}),Af=z({votePubkey:$(),nodePubkey:$(),activatedStake:A(),epochVoteAccount:Fe(),epochCredits:Y(si([A(),A(),A()])),commission:A(),lastVote:A(),rootSlot:j(A())}),B1=xt(z({current:Y(Af),delinquent:Y(Af)})),Op=ke([Bt("processed"),Bt("confirmed"),Bt("finalized")]),Up=z({slot:A(),confirmations:j(A()),err:$r,confirmationStatus:J(Op)}),I1=qe(Y(j(Up))),A1=xt(A()),Wf=z({accountKey:ae,writableIndexes:Y(A()),readonlyIndexes:Y(A())}),Da=z({signatures:Y($()),message:z({accountKeys:Y($()),header:z({numRequiredSignatures:A(),numReadonlySignedAccounts:A(),numReadonlyUnsignedAccounts:A()}),instructions:Y(z({accounts:Y(A()),data:$(),programIdIndex:A()})),recentBlockhash:$(),addressTableLookups:J(Y(Wf))})}),Hf=z({pubkey:ae,signer:Fe(),writable:Fe(),source:J(ke([Bt("transaction"),Bt("lookupTable")]))}),Vf=z({accountKeys:Y(Hf),signatures:Y($())}),$f=z({parsed:un(),program:$(),programId:ae}),Gf=z({accounts:Y(ae),data:$(),programId:ae}),Np=ke([Gf,$f]),qp=ke([z({parsed:un(),program:$(),programId:$()}),z({accounts:Y($()),data:$(),programId:$()})]),jf=fn(Np,qp,r=>"accounts"in r?cn(r,Gf):cn(r,$f)),Yf=z({signatures:Y($()),message:z({accountKeys:Y(Hf),instructions:Y(jf),recentBlockhash:$(),addressTableLookups:J(j(Y(Wf)))})}),_i=z({accountIndex:A(),mint:$(),owner:J($()),uiTokenAmount:Rp}),Zf=z({writable:Y(ae),readonly:Y(ae)}),Ri=z({err:$r,fee:A(),innerInstructions:J(j(Y(z({index:A(),instructions:Y(z({accounts:Y(A()),data:$(),programIdIndex:A()}))})))),preBalances:Y(A()),postBalances:Y(A()),logMessages:J(j(Y($()))),preTokenBalances:J(j(Y(_i))),postTokenBalances:J(j(Y(_i))),loadedAddresses:J(Zf),computeUnitsConsumed:J(A())}),Fa=z({err:$r,fee:A(),innerInstructions:J(j(Y(z({index:A(),instructions:Y(jf)})))),preBalances:Y(A()),postBalances:Y(A()),logMessages:J(j(Y($()))),preTokenBalances:J(j(Y(_i))),postTokenBalances:J(j(Y(_i))),loadedAddresses:J(Zf),computeUnitsConsumed:J(A())}),mn=ke([Bt(0),Bt("legacy")]),Gr=z({pubkey:$(),lamports:A(),postBalance:j(A()),rewardType:j($()),commission:J(j(A()))}),R1=xt(j(z({blockhash:$(),previousBlockhash:$(),parentSlot:A(),transactions:Y(z({transaction:Da,meta:j(Ri),version:J(mn)})),rewards:J(Y(Gr)),blockTime:j(A()),blockHeight:j(A())}))),L1=xt(j(z({blockhash:$(),previousBlockhash:$(),parentSlot:A(),rewards:J(Y(Gr)),blockTime:j(A()),blockHeight:j(A())}))),T1=xt(j(z({blockhash:$(),previousBlockhash:$(),parentSlot:A(),transactions:Y(z({transaction:Vf,meta:j(Ri),version:J(mn)})),rewards:J(Y(Gr)),blockTime:j(A()),blockHeight:j(A())}))),M1=xt(j(z({blockhash:$(),previousBlockhash:$(),parentSlot:A(),transactions:Y(z({transaction:Yf,meta:j(Fa),version:J(mn)})),rewards:J(Y(Gr)),blockTime:j(A()),blockHeight:j(A())}))),P1=xt(j(z({blockhash:$(),previousBlockhash:$(),parentSlot:A(),transactions:Y(z({transaction:Vf,meta:j(Fa),version:J(mn)})),rewards:J(Y(Gr)),blockTime:j(A()),blockHeight:j(A())}))),C1=xt(j(z({blockhash:$(),previousBlockhash:$(),parentSlot:A(),rewards:J(Y(Gr)),blockTime:j(A()),blockHeight:j(A())}))),O1=xt(j(z({blockhash:$(),previousBlockhash:$(),parentSlot:A(),transactions:Y(z({transaction:Da,meta:j(Ri)})),rewards:J(Y(Gr)),blockTime:j(A())}))),U1=xt(j(z({blockhash:$(),previousBlockhash:$(),parentSlot:A(),signatures:Y($()),blockTime:j(A())}))),N1=xt(j(z({slot:A(),meta:j(Ri),blockTime:J(j(A())),transaction:Da,version:J(mn)}))),q1=xt(j(z({slot:A(),transaction:Yf,meta:j(Fa),blockTime:J(j(A())),version:J(mn)}))),z1=qe(z({blockhash:$(),feeCalculator:z({lamportsPerSignature:A()})})),K1=qe(z({blockhash:$(),lastValidBlockHeight:A()})),D1=qe(Fe()),zp=z({slot:A(),numTransactions:A(),numSlots:A(),samplePeriodSecs:A()}),F1=xt(Y(zp)),W1=qe(j(z({feeCalculator:z({lamportsPerSignature:A()})}))),H1=xt($()),V1=xt($()),Kp=z({err:$r,logs:Y($()),signature:$()}),$1=z({result:Ai(Kp),subscription:A()});var Ma=class r{constructor(t){this._keypair=void 0,this._keypair=t??kf()}static generate(){return new r(kf())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");let n=t.slice(32,64);if(!e||!e.skipValidation){let o=t.slice(0,32),i=Ea(o);for(let s=0;s<32;s++)if(n[s]!==i[s])throw new Error("provided secretKey is invalid")}return new r({publicKey:n,secretKey:t})}static fromSeed(t){let e=Ea(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),new r({publicKey:e,secretKey:n})}get publicKey(){return new et(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},Qn=Object.freeze({CreateLookupTable:{index:0,layout:k.struct([k.u32("instruction"),yn("recentSlot"),k.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:k.struct([k.u32("instruction")])},ExtendLookupTable:{index:2,layout:k.struct([k.u32("instruction"),yn(),k.seq(at(),k.offset(k.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:k.struct([k.u32("instruction")])},CloseLookupTable:{index:4,layout:k.struct([k.u32("instruction")])}});var Pa=class{constructor(){}static createLookupTable(t){let[e,n]=et.findProgramAddressSync([t.authority.toBuffer(),(0,oo.toBufferLE)(BigInt(t.recentSlot),8)],this.programId),o=Qn.CreateLookupTable,i=ct(o,{recentSlot:BigInt(t.recentSlot),bumpSeed:n}),s=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:_e.programId,isSigner:!1,isWritable:!1}];return[new bt({programId:this.programId,keys:s,data:i}),e]}static freezeLookupTable(t){let e=Qn.FreezeLookupTable,n=ct(e),o=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new bt({programId:this.programId,keys:o,data:n})}static extendLookupTable(t){let e=Qn.ExtendLookupTable,n=ct(e,{addresses:t.addresses.map(i=>i.toBytes())}),o=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&o.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:_e.programId,isSigner:!1,isWritable:!1}),new bt({programId:this.programId,keys:o,data:n})}static deactivateLookupTable(t){let e=Qn.DeactivateLookupTable,n=ct(e),o=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new bt({programId:this.programId,keys:o,data:n})}static closeLookupTable(t){let e=Qn.CloseLookupTable,n=ct(e),o=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new bt({programId:this.programId,keys:o,data:n})}};Pa.programId=new et("AddressLookupTab1e1111111111111111111111111");var xi=Object.freeze({RequestUnits:{index:0,layout:k.struct([k.u8("instruction"),k.u32("units"),k.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:k.struct([k.u8("instruction"),k.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:k.struct([k.u8("instruction"),k.u32("units")])},SetComputeUnitPrice:{index:3,layout:k.struct([k.u8("instruction"),yn("microLamports")])}}),Ca=class{constructor(){}static requestUnits(t){let e=xi.RequestUnits,n=ct(e,t);return new bt({keys:[],programId:this.programId,data:n})}static requestHeapFrame(t){let e=xi.RequestHeapFrame,n=ct(e,t);return new bt({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(t){let e=xi.SetComputeUnitLimit,n=ct(e,t);return new bt({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(t){let e=xi.SetComputeUnitPrice,n=ct(e,{microLamports:BigInt(t.microLamports)});return new bt({keys:[],programId:this.programId,data:n})}};Ca.programId=new et("ComputeBudget111111111111111111111111111111");var Rf=64,Lf=32,Tf=64,Mf=k.struct([k.u8("numSignatures"),k.u8("padding"),k.u16("signatureOffset"),k.u16("signatureInstructionIndex"),k.u16("publicKeyOffset"),k.u16("publicKeyInstructionIndex"),k.u16("messageDataOffset"),k.u16("messageDataSize"),k.u16("messageInstructionIndex")]),Oa=class r{constructor(){}static createInstructionWithPublicKey(t){let{publicKey:e,message:n,signature:o,instructionIndex:i}=t;St(e.length===Lf,`Public Key must be ${Lf} bytes but received ${e.length} bytes`),St(o.length===Tf,`Signature must be ${Tf} bytes but received ${o.length} bytes`);let s=Mf.span,l=s+e.length,f=l+o.length,m=1,v=tt.Buffer.alloc(f+n.length),x=i??65535;return Mf.encode({numSignatures:m,padding:0,signatureOffset:l,signatureInstructionIndex:x,publicKeyOffset:s,publicKeyInstructionIndex:x,messageDataOffset:f,messageDataSize:n.length,messageInstructionIndex:x},v),v.fill(e,s),v.fill(o,l),v.fill(n,f),new bt({keys:[],programId:r.programId,data:v})}static createInstructionWithPrivateKey(t){let{privateKey:e,message:n,instructionIndex:o}=t;St(e.length===Rf,`Private key must be ${Rf} bytes but received ${e.length} bytes`);try{let i=Ma.fromSecretKey(e),s=i.publicKey.toBytes(),l=Na(n,i.secretKey);return this.createInstructionWithPublicKey({publicKey:s,message:n,signature:l,instructionIndex:o})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}};Oa.programId=new et("Ed25519SigVerify111111111111111111111111111");var Dp=(r,t)=>{let e=Jn.sign(r,t);return[e.toCompactRawBytes(),e.recovery]};Jn.utils.isValidPrivateKey;var Fp=Jn.getPublicKey,Pf=32,xa=20,Cf=64,Wp=11,Sa=k.struct([k.u8("numSignatures"),k.u16("signatureOffset"),k.u8("signatureInstructionIndex"),k.u16("ethAddressOffset"),k.u8("ethAddressInstructionIndex"),k.u16("messageDataOffset"),k.u16("messageDataSize"),k.u8("messageInstructionIndex"),k.blob(20,"ethAddress"),k.blob(64,"signature"),k.u8("recoveryId")]),Ua=class r{constructor(){}static publicKeyToEthAddress(t){St(t.length===Cf,`Public key must be ${Cf} bytes but received ${t.length} bytes`);try{return tt.Buffer.from(ya(lt(t))).slice(-xa)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){let{publicKey:e,message:n,signature:o,recoveryId:i,instructionIndex:s}=t;return r.createInstructionWithEthAddress({ethAddress:r.publicKeyToEthAddress(e),message:n,signature:o,recoveryId:i,instructionIndex:s})}static createInstructionWithEthAddress(t){let{ethAddress:e,message:n,signature:o,recoveryId:i,instructionIndex:s=0}=t,l;typeof e=="string"?e.startsWith("0x")?l=tt.Buffer.from(e.substr(2),"hex"):l=tt.Buffer.from(e,"hex"):l=e,St(l.length===xa,`Address must be ${xa} bytes but received ${l.length} bytes`);let f=1+Wp,m=f,v=f+l.length,x=v+o.length+1,M=1,E=tt.Buffer.alloc(Sa.span+n.length);return Sa.encode({numSignatures:M,signatureOffset:v,signatureInstructionIndex:s,ethAddressOffset:m,ethAddressInstructionIndex:s,messageDataOffset:x,messageDataSize:n.length,messageInstructionIndex:s,signature:lt(o),ethAddress:lt(l),recoveryId:i},E),E.fill(lt(n),Sa.span),new bt({keys:[],programId:r.programId,data:E})}static createInstructionWithPrivateKey(t){let{privateKey:e,message:n,instructionIndex:o}=t;St(e.length===Pf,`Private key must be ${Pf} bytes but received ${e.length} bytes`);try{let i=lt(e),s=Fp(i,!1).slice(1),l=tt.Buffer.from(ya(lt(n))),[f,m]=Dp(l,i);return this.createInstructionWithPublicKey({publicKey:s,message:n,signature:f,recoveryId:m,instructionIndex:o})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}};Ua.programId=new et("KeccakSecp256k11111111111111111111111111111");var Xf,Hp=new et("StakeConfig11111111111111111111111111111111");var no=class{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}};Xf=no;no.default=new Xf(0,0,et.default);var Mr=Object.freeze({Initialize:{index:0,layout:k.struct([k.u32("instruction"),ip(),sp()])},Authorize:{index:1,layout:k.struct([k.u32("instruction"),at("newAuthorized"),k.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:k.struct([k.u32("instruction")])},Split:{index:3,layout:k.struct([k.u32("instruction"),k.ns64("lamports")])},Withdraw:{index:4,layout:k.struct([k.u32("instruction"),k.ns64("lamports")])},Deactivate:{index:5,layout:k.struct([k.u32("instruction")])},Merge:{index:7,layout:k.struct([k.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:k.struct([k.u32("instruction"),at("newAuthorized"),k.u32("stakeAuthorizationType"),hn("authoritySeed"),at("authorityOwner")])}}),G1=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),Bi=class{constructor(){}static initialize(t){let{stakePubkey:e,authorized:n,lockup:o}=t,i=o||no.default,s=Mr.Initialize,l=ct(s,{authorized:{staker:lt(n.staker.toBuffer()),withdrawer:lt(n.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:lt(i.custodian.toBuffer())}}),f={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ro,isSigner:!1,isWritable:!1}],programId:this.programId,data:l};return new bt(f)}static createAccountWithSeed(t){let e=new vt;e.add(_e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:o,lockup:i}=t;return e.add(this.initialize({stakePubkey:n,authorized:o,lockup:i}))}static createAccount(t){let e=new vt;e.add(_e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:o,lockup:i}=t;return e.add(this.initialize({stakePubkey:n,authorized:o,lockup:i}))}static delegate(t){let{stakePubkey:e,authorizedPubkey:n,votePubkey:o}=t,i=Mr.Delegate,s=ct(i);return new vt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!1},{pubkey:ur,isSigner:!1,isWritable:!1},{pubkey:va,isSigner:!1,isWritable:!1},{pubkey:Hp,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(t){let{stakePubkey:e,authorizedPubkey:n,newAuthorizedPubkey:o,stakeAuthorizationType:i,custodianPubkey:s}=t,l=Mr.Authorize,f=ct(l,{newAuthorized:lt(o.toBuffer()),stakeAuthorizationType:i.index}),m=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ur,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return s&&m.push({pubkey:s,isSigner:!0,isWritable:!1}),new vt().add({keys:m,programId:this.programId,data:f})}static authorizeWithSeed(t){let{stakePubkey:e,authorityBase:n,authoritySeed:o,authorityOwner:i,newAuthorizedPubkey:s,stakeAuthorizationType:l,custodianPubkey:f}=t,m=Mr.AuthorizeWithSeed,v=ct(m,{newAuthorized:lt(s.toBuffer()),stakeAuthorizationType:l.index,authoritySeed:o,authorityOwner:lt(i.toBuffer())}),x=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:ur,isSigner:!1,isWritable:!1}];return f&&x.push({pubkey:f,isSigner:!0,isWritable:!1}),new vt().add({keys:x,programId:this.programId,data:v})}static splitInstruction(t){let{stakePubkey:e,authorizedPubkey:n,splitStakePubkey:o,lamports:i}=t,s=Mr.Split,l=ct(s,{lamports:i});return new bt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:l})}static split(t,e){let n=new vt;return n.add(_e.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),n.add(this.splitInstruction(t))}static splitWithSeed(t,e){let{stakePubkey:n,authorizedPubkey:o,splitStakePubkey:i,basePubkey:s,seed:l,lamports:f}=t,m=new vt;return m.add(_e.allocate({accountPubkey:i,basePubkey:s,seed:l,space:this.space,programId:this.programId})),e&&e>0&&m.add(_e.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),m.add(this.splitInstruction({stakePubkey:n,authorizedPubkey:o,splitStakePubkey:i,lamports:f}))}static merge(t){let{stakePubkey:e,sourceStakePubKey:n,authorizedPubkey:o}=t,i=Mr.Merge,s=ct(i);return new vt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ur,isSigner:!1,isWritable:!1},{pubkey:va,isSigner:!1,isWritable:!1},{pubkey:o,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(t){let{stakePubkey:e,authorizedPubkey:n,toPubkey:o,lamports:i,custodianPubkey:s}=t,l=Mr.Withdraw,f=ct(l,{lamports:i}),m=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:ur,isSigner:!1,isWritable:!1},{pubkey:va,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return s&&m.push({pubkey:s,isSigner:!0,isWritable:!1}),new vt().add({keys:m,programId:this.programId,data:f})}static deactivate(t){let{stakePubkey:e,authorizedPubkey:n}=t,o=Mr.Deactivate,i=ct(o);return new vt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ur,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}};Bi.programId=new et("Stake11111111111111111111111111111111111111");Bi.space=200;var to=Object.freeze({InitializeAccount:{index:0,layout:k.struct([k.u32("instruction"),ap()])},Authorize:{index:1,layout:k.struct([k.u32("instruction"),at("newAuthorized"),k.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:k.struct([k.u32("instruction"),k.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:k.struct([k.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:k.struct([k.u32("instruction"),cp()])}}),j1=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),Ii=class r{constructor(){}static initializeAccount(t){let{votePubkey:e,nodePubkey:n,voteInit:o}=t,i=to.InitializeAccount,s=ct(i,{voteInit:{nodePubkey:lt(o.nodePubkey.toBuffer()),authorizedVoter:lt(o.authorizedVoter.toBuffer()),authorizedWithdrawer:lt(o.authorizedWithdrawer.toBuffer()),commission:o.commission}}),l={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ro,isSigner:!1,isWritable:!1},{pubkey:ur,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s};return new bt(l)}static createAccount(t){let e=new vt;return e.add(_e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){let{votePubkey:e,authorizedPubkey:n,newAuthorizedPubkey:o,voteAuthorizationType:i}=t,s=to.Authorize,l=ct(s,{newAuthorized:lt(o.toBuffer()),voteAuthorizationType:i.index}),f=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ur,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new vt().add({keys:f,programId:this.programId,data:l})}static authorizeWithSeed(t){let{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:o,newAuthorizedPubkey:i,voteAuthorizationType:s,votePubkey:l}=t,f=to.AuthorizeWithSeed,m=ct(f,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:lt(n.toBuffer()),currentAuthorityDerivedKeySeed:o,newAuthorized:lt(i.toBuffer()),voteAuthorizationType:s.index}}),v=[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:ur,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new vt().add({keys:v,programId:this.programId,data:m})}static withdraw(t){let{votePubkey:e,authorizedWithdrawerPubkey:n,lamports:o,toPubkey:i}=t,s=to.Withdraw,l=ct(s,{lamports:o}),f=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new vt().add({keys:f,programId:this.programId,data:l})}static safeWithdraw(t,e,n){if(t.lamports>e-n)throw new Error("Withdraw will leave vote account with insufficient funds.");return r.withdraw(t)}static updateValidatorIdentity(t){let{votePubkey:e,authorizedWithdrawerPubkey:n,nodePubkey:o}=t,i=to.UpdateValidatorIdentity,s=ct(i),l=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new vt().add({keys:l,programId:this.programId,data:s})}};Ii.programId=new et("Vote111111111111111111111111111111111111111");Ii.space=3762;var Y1=new et("Va1idator1nfo111111111111111111111111111111"),Z1=z({name:$(),website:J($()),details:J($()),keybaseUsername:J($())});var X1=new et("Vote111111111111111111111111111111111111111"),J1=k.struct([at("nodePubkey"),at("authorizedWithdrawer"),k.u8("commission"),k.nu64(),k.seq(k.struct([k.nu64("slot"),k.u32("confirmationCount")]),k.offset(k.u32(),-8),"votes"),k.u8("rootSlotValid"),k.nu64("rootSlot"),k.nu64(),k.seq(k.struct([k.nu64("epoch"),at("authorizedVoter")]),k.offset(k.u32(),-8),"authorizedVoters"),k.struct([k.seq(k.struct([at("authorizedPubkey"),k.nu64("epochOfLastAuthorizedSwitch"),k.nu64("targetEpoch")]),32,"buf"),k.nu64("idx"),k.u8("isEmpty")],"priorVoters"),k.nu64(),k.seq(k.struct([k.nu64("epoch"),k.nu64("credits"),k.nu64("prevCredits")]),k.offset(k.u32(),-8),"epochCredits"),k.struct([k.nu64("slot"),k.nu64("timestamp")],"lastTimestamp")]);var jr=Ae(Wa());B();var jp="solana:mainnet",Yp="solana:devnet",Zp="solana:testnet",Xp="solana:localnet",el=[jp,Yp,Zp,Xp];function rl(r){return"version"in r}var Li=class{constructor(t){this.secureSvmClient=t}async connect({silent:t}){let e=await this.secureSvmClient.connect({silent:t});if(!e.response)throw e.error;return e.response}async disconnect(){let t=await this.secureSvmClient.disconnect();if(!t.response)throw t.error;return t.response}async signMessage(t){let e=await this.secureSvmClient.signMessage({publicKey:t.publicKey.toBase58(),message:(0,jr.encode)(t.message),uuid:t.uuid});if(!e.response)throw e.error;return(0,jr.decode)(e.response.signedMessage)}async signIn(t){let e=await this.secureSvmClient.signIn({input:t});if(!e.response)throw e.error;return e.response}async signTransaction(t){let e=(0,jr.encode)(t.tx.serialize({requireAllSignatures:!1})),n=await this.secureSvmClient.signTransaction({publicKey:t.publicKey.toBase58(),tx:e});if(!n.response?.signature||!n.response?.signedTx)throw n.error;return rl(t.tx)?pn.deserialize((0,jr.decode)(n.response.signedTx)):vt.from((0,jr.decode)(n.response.signedTx))}getKey(){return this.secureSvmClient.getKey()}};var bn=class{constructor(t){this.secureSvmClient=new ho(t),this.wallet=new Li(this.secureSvmClient)}};B();B();var nl="solana:signAndSendTransaction";B();var ol="solana:signMessage";B();var il="solana:signTransaction";var Jp=el,Qp=[nl,il,ol],Ti=class r{#o;#r;#t;#e;#n;#i;get address(){return this.#o}get publicKey(){return this.#r.slice()}get chains(){return this.#t.slice()}get features(){return this.#e.slice()}get label(){return this.#n}get icon(){return this.#i}constructor({address:t,publicKey:e,label:n,icon:o}){new.target===r&&Object.freeze(this),this.#o=t,this.#r=e,this.#t=Jp,this.#e=Qp,this.#n=n,this.#i=o}};var Ha=Ae(Wa()),io=class r{#o;#r;#t;#e;#n;constructor(t){new.target===r&&Object.freeze(this),this.#o=!0,this.#r=!1,this.#t=void 0,this.#n=t,this.#e=new bn(this.#n)}#i(t){this.#r=!0,this.#t=new et(t),this.#e=new bn(this.#n)}async connect(t){if(this.#t&&!t?.reconnect)return{address:this.#t.toBase58()};let e=await this.#e.wallet.connect({silent:t?.onlyIfTrusted});return this.#i(e.publicKey),{address:e.publicKey}}async signIn(t){let e=await this.#e.wallet.signIn(t??{});return this.#i(e.publicKey),{account:new Ti({address:e.publicKey,publicKey:new et(e.publicKey).toBuffer()}),signedMessage:(0,Ha.decode)(e.signedMessage),signatures:e.signatures.map(n=>(0,Ha.decode)(n))}}async signTransaction(t){if(this.#t||await this.connect(),!this.#t)throw new Error("wallet not connected");let e=pn.deserialize(t.transaction);return{signedTransaction:(await this.#e.wallet.signTransaction({publicKey:new et(t.account.publicKey??this.#t),tx:e})).serialize()}}getKey(){return this.#e.wallet.getKey()}get isDeplan(){return this.#o}get isConnected(){return this.#r}get publicKey(){return this.#t??null}};function ty(){let r=new lo({origin:{context:"browser",name:document.title,address:window.location.origin}});ey(r)}function ey(r){let t=new io(r);try{Object.defineProperty(window,"deplan",{value:t})}catch{console.warn("DePlan couldn't override `window.deplan`. Disable other Solana wallets to use DePlan.")}}ty();})();
